# OS补充

## 其他补充

### 为什么随机存储可以成为计算机操作系统出现的基础？（课本 267 页）

1. 随机存储
2. 线性存储：线性存储

### 为什么随机存取很重要呢？

1. 因为操作系统引入了虚拟存储，虚拟分页，虚拟的地址空间需要 1000 个页框，但是我只给了 100 个页框进行使用，命中即为是这 100 个。
2. 如果没有命中，则缺页，启动缺页中断处理，然后到磁盘中查找对应的页调入，寻找相对于磁带的形式而言非常大。让用户感觉不到有磁带的延时。

### 计算机操作系统的用途

1. 管理软硬件资源
2. 控制程序执行
3. 改善人机界面
4. 合理组织计算机工作流程

### OS的三大抽象

1. 进程抽象
   1. 进程是对进入内存的执行程序在处理器上操作的状态集的一个抽象。
   2. 进程是并发和并行操作的基础。
   3. 进程可以使用 `fork()`、`wait()`、`exec()` 等系统调用。
   4. 进程的执行依赖于内存和设备上的信息资源。
2. 虚存抽象
   1. 虚拟内存的本质是在物理内存的基础上创建一个新的抽象概念。
   2. 虚存抽象保证了安全性
   3. 进程的执行还依赖于存放在内存中的程序和数据，而他们往往存储在设备上，所以我们需要对设备进行抽象。
3. 文件抽象
   1. 文件是设备的一种抽象，通过将文件的字节映射到存储设备的物理块中来实现文件抽象。
   2. 提供了 `open()`、`read()` 和 `write()` 等方法来控制和使用文件。
   3. 磁盘、光盘等外存设备都有极其复杂的物理接口，通常我们将其抽象，使得所存放的信息可以表示为一个命名的逻辑字节流，称其为文件，这是资源抽象的一个特例。
   4. 为了管理方便，操作系统将除处理器和内存以外，将磁盘和其他外部设备资源都抽象为文件，减少系统开销，复用系统调用。
4. 操作系统的基本任务：防止硬件资源被失控的程序滥用；屏蔽复杂的硬件操作细节。<img src="2.png" style="zoom:25%;" />

### 多道程序设计

1. 优点：
   1. CPU 与外部设备充分并行
   2. 外部设备之间充分并行
   3. 发挥 CPU、内存和设备的使用效率
   4. 提高单位时间的算题量（吞吐率）
2. 多道程序设计的主要缺点：延长了作业的周转时间。
3. 实现：进入内存执行的程序建立管理实体：进程动态概念，驻留在操作系统中。OS应该能管理与控制进程程序的执行，OS协调管理各类资源在进程间的使用。
4. 实现要点：如何使用资源；如何复用CPU；如何使CPU和I/O设备并行；如何中断（让出CPU）；程序道数受到物理资源限制。
5. 需要处理的问题：储存保护与程序浮动；处理器管理与分配；资源管理与调度。



### `OS内核是中断驱动的/中断是激活操作系统的唯一方式`

### 为什么操作系统不能使用名空间?（没有高级语言，为什么不可以通过名字来调用）

操作系统处于系统底层之上，是不可以将高阶的名字，翻译成计算机操作系统可以理解的地址。底层是通过地址号来调用，而我们的按名访问本质上也只是完成了从名空间到地址空间的映射而已

### 寄存器

1. 用户可见寄存器
   1. 作用：可以使程序员减少访问主存储器的次数，提高指令执行的效。所有程序可使用，包括应用程序和系统程序。
   2. 数据（通用）寄存器：AX、BX、CX、DX等。
   3. 地址寄存器：索引（SI、DI）、栈指针（SP、BP）、段地址（CS、DS、SS、ES）、页表寄存器等。
   4. 控制和状态寄存器：控制和状态寄存器用于控制处理器的操作，主要是被具有特权的操作系统程序使用，以控制程序的执行。
      1. 程序计数器PC：存储将取指令的地址。
      2. 指令寄存器IR：储存最近使用的指令。
      3. 条件码CC：CPU为指令操作结果设置的位，标志正/负/零/溢出等结果。
      4. 标志位：中断位等。
   5. 程序状态字PSW：记录当前程序运行的动态信息，包括：
      1. 程序计数器、指令寄存器、条件码
      2. 中断字、中断允许/禁止、中断屏蔽、处理器模式、内存保护、调试控制
   6. PSW 也是计算机系统的**寄存器**
      1. 通常设置一组控制与状态寄存器
      2. 也可以专设一个 PSW 寄存器
   7. 标志划分为三组：**状态标志、控制标志和系统标志**（更多见 P58）
      1. 状态标志：使得一条指令的执行结果影响其后指令的执行，比如溢出等标志
      2. 控制指令：控制操作系统行为，比如模式转换等。
      3. 系统标志：与进程管理有关，用于保护模式。

