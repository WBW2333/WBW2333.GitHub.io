<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>计网</title>
</head>
<body><h1 id='计网-01-计算机网络体系结构'>计网-01-计算机网络体系结构</h1>
<p>思维导图：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%8812.54.30.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午12.54.30"></p>
<h2 id='一计算机网络概述'>一、计算机网络概述</h2>
<h3 id='1）概念'>（1）概念</h3>
<ol start='' >
<li><p>计算机网络的概念</p>
<ol start='' >
<li><p>网络：网状的东西或网状系统。</p>
</li>
<li><p>计算机网络：一个将分散的、具有独立功能的计算机系统，通过通信设备与线路连接起来，由功能完善的软件实现<strong>资源共享</strong>和<strong>信息传递</strong>的系统。</p>
</li>
<li><p>计算机网络是<em>互连的、自治的计算机集合</em></p>
<ol start='' >
<li>互连：通过通信链路互联互通。</li>
<li>自治：无主从关系。</li>

</ol>
</li>
<li><p>网络把许多计算机连接在一起，互联网将许多网络连接在一起，因特网是世界上最大的互联网。</p>
</li>

</ol>
</li>
<li><p>计算机网络的发展</p>
<ol start='' >
<li>第一阶段：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-25%20%E4%B8%8A%E5%8D%889.08.46.png" referrerpolicy="no-referrer" alt="截屏2023-06-25 上午9.08.46"></li>
<li>第二阶段：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-25%20%E4%B8%8A%E5%8D%889.10.49.png" referrerpolicy="no-referrer" alt="截屏2023-06-25 上午9.10.49"></li>
<li>第三阶段——多层次ISP结构：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-25%20%E4%B8%8A%E5%8D%889.11.16.png" referrerpolicy="no-referrer" alt="截屏2023-06-25 上午9.11.16"></li>

</ol>
</li>
<li><p>计算机网络的功能</p>
<ol start='' >
<li>数据通信：计算机网络<em>最基本和最重要的功能</em>，实现联网计算机之间各种信息的传输，将分散在不同地理位置的计算机联系起来，进行统一的调配、控制和管理。</li>
<li>资源共享：可以是软件共享、数据共享，也可以是硬件共享。使得计算机网络中的资源互通有无、分工协作，从而极大地提高硬件资源、软件资源和数据资源的利用率。</li>
<li>提高可靠性：计网中的各台计算机可以通过网络互为替代机。</li>
<li>负载均衡：将工作任务均衡地分配给计网中的各台计算机。</li>

</ol>
</li>

</ol>
<h3 id='2）组成和分类'>（2）组成和分类</h3>
<ol start='' >
<li><p>组成</p>
<ol start='' >
<li><p>从组成部分上看：</p>
<ol start='' >
<li>硬件：主机、通信链路、交换设备、通信处理机。</li>
<li>软件：实现资源共享的软件和方便用户使用的工具软件。</li>
<li>协议（一系列规则和约定的集合）：计网的核心，规定了网络传输数据时所遵循的规范。</li>

</ol>
</li>
<li><p>从工作方式上看：</p>
<ol start='' >
<li>边缘部分：所有连接到网络上、供用户直接使用的主机组成。</li>
<li>核心部分：大量的网络和连接这些网络的路由器组成，为边缘部分提供连通性和交换服务。</li>

</ol>
</li>
<li><p>从功能组成上看：</p>
<ol start='' >
<li>通信子网：各种传输介质、通信设备和相应的网络协议组成，使网络具有数据传输、交换、控制和储存的能力，实现联网计算机之间的数据通信。</li>
<li>资源子网：实现资源共享功能的设备及其软件的集合。</li>
<li><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-25%20%E4%B8%8A%E5%8D%889.30.24.png" referrerpolicy="no-referrer" alt="截屏2023-06-25 上午9.30.24"></li>

</ol>
</li>

</ol>
</li>
<li><p>分类</p>
<ol start='' >
<li><p>按分布范围分</p>
<ol start='' >
<li>广域网（WAN）——<code>交换技术</code>：提供长距离通信，运送主机所发送的数据，覆盖范围是<strong>直径几十千米到几千千米</strong>的区域，有时也称为远程网。</li>
<li>城域网（MAN）：覆盖范围可以跨越几个街区甚至整个城市，<strong>直径为5-50km</strong>。</li>
<li>局域网（LAN）——<code>广播技术</code>：覆盖范围较小，<strong>直径为几十米到几千米的区域</strong>。</li>
<li>个人区域网（PAN）：个人工作的地方将消费电子设备用无线技术连接起来的网络，也称为无线个人区域网（WPAN），覆盖区域<strong>直径约为10m</strong>。</li>

</ol>
</li>
<li><p>按使用者分</p>
<ol start='' >
<li>公用网：电信公司出资建设的大型网络，也称公众网。</li>
<li>专用网：某个部门建造的网络，不像部门以外的人提供服务。</li>

</ol>
</li>
<li><p>按交换技术分</p>
<ol start='' >
<li>电路交换</li>
<li>报文交换</li>
<li>分组交换</li>

</ol>
</li>
<li><p>按拓扑结构分：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-25%20%E4%B8%8A%E5%8D%889.38.37.png" referrerpolicy="no-referrer" alt="截屏2023-06-25 上午9.38.37"></p>
</li>
<li><p>按传输技术分</p>
<ol start='' >
<li>广播式网络：共享公共通信信道。</li>
<li>点对点网络：使用分组存储转发和路由选择机制。</li>

</ol>
</li>

</ol>
</li>

</ol>
<h3 id='3）标准化工作及相关组织'>（3）标准化工作及相关组织</h3>
<ol start='' >
<li><p>要实现不同厂商的硬软件之间相互连通，必须遵从统一的标准。</p>
</li>
<li><p>标准的分类</p>
<ol start='' >
<li>法定标准：有权威机构制定的、正式的、合法的标准——OSI</li>
<li>事实标准：有某些公司的产品在竞争中占据了主流，时间长了，这些产品中的协议和技术就成了标准——TCP/IP</li>

</ol>
</li>
<li><p>RFC（Request For Comments）是因特网的标准形式，因特网的所有标准都以RFC的形式在网上发布。</p>
<ol start='' >
<li><p>不是所有RFC都是因特网标准。</p>
</li>
<li><p>RFC要成为因特网标准需要经过四个阶段</p>
<ol start='' >
<li>因特网草案（Internet Draft）</li>
<li>建议标准（Proposed Standard）</li>
<li>草案标准（Draft Standard）</li>
<li>因特网标准（Internet Standard）</li>

</ol>
</li>

</ol>
</li>
<li><p>制定、实施相关网络标准的标准化组织：</p>
<ol start='' >
<li>国际标准化组织ISO：OSI参考模型、HDLC协议。</li>
<li>国际电信联盟ITU：制定通信规则。</li>
<li>国际电气电子工程师协会IEEE：学术机构、IEEE802系列标准、5G。</li>
<li>Internet工程任务组IETF：负责因特网相关标准制定。</li>

</ol>
</li>

</ol>
<h3 id='4）性能指标'>（4）性能指标</h3>
<ol start='' >
<li><p>速率</p>
<ol start='' >
<li>速率即数据率或成数据传输率或比特率，指的是连接在计算机网络上的主机在数字信道上传送数据位数的速率。</li>
<li>单位：b/s</li>

</ol>
</li>
<li><p>带宽</p>
<ol start='' >
<li>带宽表示网络的通信线路所能传送数据的能力，即数字信道能传送的“最高数据传输速率”，即网络设备所支持的最高速度。</li>
<li>单位：b/s</li>
<li><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-26%20%E4%B8%8A%E5%8D%889.27.21.png" referrerpolicy="no-referrer" alt="截屏2023-06-26 上午9.27.21"></li>

</ol>
</li>
<li><p>吞吐量</p>
<ol start='' >
<li>吞吐量指单位时间内通过某个网络/信道/接口的数据量，受网络带宽或网络额定速率的限制。</li>
<li>单位：b/s</li>

</ol>
</li>
<li><p>时延</p>
<ol start='' >
<li><p>指数据/报文/分组从网络/链路的一段传送的另一端所需的时间，也叫延迟或迟延。</p>
</li>
<li><p>单位：s</p>
</li>
<li><p>组成</p>
<ol start='' >
<li><p>发送时延/传输时延</p>
<ol start='' >
<li>节点将分组的所有比特推向链路需要的时间，即从发送第一个比特开始，到发送最后一个比特结束。</li>
<li>发送时延=分组长度/信道宽度。</li>

</ol>
</li>
<li><p>传播时延</p>
<ol start='' >
<li>一个比特从一段传播到另一端的时间</li>
<li>传播时延=信道长度/电磁波在信道上的速率。</li>

</ol>
</li>
<li><p>排队时延</p>
<ol start='' >
<li>分组在进入路由器后在输入队列中排队等待处理，路由器确定端口后还会再输出队列中排队等待转发。</li>

</ol>
</li>
<li><p>处理时延</p>
<ol start='' >
<li>数据在交换节点为储存转发而进行的一些必要的处理所花费的时间，如分析分组的首部、从分组中提取数据等。</li>

</ol>
</li>

</ol>
</li>

</ol>
</li>
<li><p>时延带宽积</p>
<ol start='' >
<li>指发送端发送的第一个比特即将到达终点时发送端已经发出了多少比特，因此又称为以比特为单位的链路长度。</li>
<li>时延带宽积=传播时延x信道带宽</li>
<li><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-26%20%E4%B8%8A%E5%8D%889.49.10.png" referrerpolicy="no-referrer" alt="截屏2023-06-26 上午9.49.10"></li>

</ol>
</li>
<li><p>往返时延RTT</p>
<ol start='' >
<li><p>指从发送端发出一个短分组，到发送端收到接收端的确认，总共经历的时延。</p>
</li>
<li><p>在互联网中，往返时延还包括各中间节点的处理时延、排队时延及转发数据时的发送时延。</p>
</li>
<li><p>RTT包括</p>
<ol start='' >
<li>往返传播时延=传播时延*2</li>
<li>末端处理时延</li>

</ol>
</li>

</ol>
</li>
<li><p>利用率</p>
<ol start='' >
<li><p>信道利用率</p>
<ol start='' >
<li>某一信道有多少百分比的时间是有数据通过的。</li>
<li>信道利用率=有数据时间/总时间</li>

</ol>
</li>
<li><p>网络利用率</p>
<ol start='' >
<li>信道利用率加权平均值。</li>

</ol>
</li>
<li><p>时延与利用率</p>
<ol start='' >
<li>关系图：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-26%20%E4%B8%8A%E5%8D%889.52.57.png" referrerpolicy="no-referrer" alt="截屏2023-06-26 上午9.52.57"></li>
<li>利用率即数据链路上有数据的时间，如果利用率大，说明数据在链路上传输时间长，则表明时延长。</li>

</ol>
</li>

</ol>
</li>

</ol>
<p>&nbsp;</p>
<h2 id='二体系结构'>二、体系结构</h2>
<p>将计算机网络的各层及其协议的集合称为网络的体系结构，从功能上描述计算机网络结构，是分层结构。</p>
<h3 id='1）分层结构'>（1）分层结构</h3>
<ol start='' >
<li><p>分层的基本原则</p>
<ol start='' >
<li>每层都实现一种相对独立的功能，降低大系统的复杂度。</li>
<li>各层之间界面自然清晰，易于理解，相互交流尽可能少。</li>
<li>各层功能的精确定义独立于具体的实现方法，可以采用最合适的技术来实现。</li>
<li>保持下层对上层的独立性，上层单向使用下层提供的服务。</li>
<li>整个分层结构应能促进标准化工作。</li>

</ol>
</li>
<li><p>分层结构</p>
<ol start='' >
<li><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-26%20%E4%B8%8A%E5%8D%8810.16.38.png" referrerpolicy="no-referrer" alt="截屏2023-06-26 上午10.16.38"></li>
<li>实体：第n层中的活动元素成为n层实体，同一层的实体成为对等实体。</li>
<li></li>
<li><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-26%20%E4%B8%8A%E5%8D%8810.17.03.png" referrerpolicy="no-referrer" alt="截屏2023-06-26 上午10.17.03"></li>

</ol>
</li>

</ol>
<h3 id='2）协议'>（2）协议</h3>
<ol start='' >
<li><p>为进行网络中的对等实体数据交换而建立的规则、标准或约定成为网络协议（水平）。</p>
</li>
<li><p>组成：</p>
<ol start='' >
<li>语法：规定传输数据的格式</li>
<li>语义：规定所要完成的功能</li>
<li>同步：规定各种操作的顺序</li>

</ol>
</li>
<li><p>一个完整的协议通常应具有线路管理（建立、释放、连接）、差错控制、数据转换等功能。</p>
</li>

</ol>
<h3 id='3）接口'>（3）接口</h3>
<ol start='' >
<li>接口（访问服务点SAP）是同一结点内相邻两层间交换信息的连接点，是一个系统内部的规定。</li>
<li>上层使用下层服务入口，<strong>仅仅在相邻层之间有接口</strong>，且所提供服务的具体细节向上一层完全屏蔽。</li>

</ol>
<h3 id='4）服务'>（4）服务</h3>
<ol start='' >
<li>服务：下层为相邻上层提供的功能调用（垂直)。</li>
<li>协议、接口、服务三者之间的关系：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-26%20%E4%B8%8A%E5%8D%8811.02.31.png" referrerpolicy="no-referrer" alt="截屏2023-06-26 上午11.02.31"></li>

</ol>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2 id='三参考模型'>三、参考模型</h2>
<h3 id='1）isoosi参考模型'>（1）ISO/OSI参考模型</h3>
<ol start='' >
<li><p>结构：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-26%20%E4%B8%8A%E5%8D%8810.30.29.png" referrerpolicy="no-referrer" alt="截屏2023-06-26 上午10.30.29"></p>
</li>
<li><p>通信过程：</p>
<ol start='' >
<li>传输过程：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-26%20%E4%B8%8A%E5%8D%8810.42.56.png" referrerpolicy="no-referrer" alt="截屏2023-06-26 上午10.42.56"></li>
<li>处理过程：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-26%20%E4%B8%8A%E5%8D%8810.45.02.png" referrerpolicy="no-referrer" alt="截屏2023-06-26 上午10.45.02"></li>
<li>层次结构：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-26%20%E4%B8%8A%E5%8D%8811.14.38.png" referrerpolicy="no-referrer" alt="截屏2023-06-26 上午11.14.38"></li>

</ol>
</li>
<li><p>应用层</p>
<ol start='' >
<li><p>所有能与用户交互产生网络流量的程序，是用户与网络的界面。</p>
</li>
<li><p>应用层是OSI模型的最高层，为特定类型的网络提供访问OSI模型的手段，因为用户的需求多种多样，因此应用层需要用不同的协议来满足需求，因此应用层也是最复杂、协议最多的一层。</p>
</li>
<li><p>典型的应用层服务：</p>
<ol start='' >
<li>文件传输（FTP）</li>
<li>电子邮件（SMTP）</li>
<li>万维网（HTTP）</li>

</ol>
</li>

</ol>
</li>
<li><p>表示层</p>
<ol start='' >
<li><p>用于处理在两个通信系统中交换信息的表示方式（语法和语义）</p>
</li>
<li><p>功能</p>
<ol start='' >
<li>数据格式变换</li>
<li>数据加密解密</li>
<li>数据压缩和恢复</li>

</ol>
</li>
<li><p>主要协议：JPEG、ASCII。</p>
</li>

</ol>
</li>
<li><p>会话层</p>
<ol start='' >
<li><p>会话层向表示层实体/用户进程提供建立连接并在连接上有序地传输数据，也是建立同步（SYN）。</p>
</li>
<li><p>会话层允许不同主机上的各个进程之间进行会话。</p>
</li>
<li><p>功能</p>
<ol start='' >
<li>建立、管理、终止会话</li>
<li>使用校验点可使会话在通信失效时从校验点/同步点继续恢复通信，实现数据同步。</li>

</ol>
</li>
<li><p>主要协议：ADSP、ASP。</p>
</li>

</ol>
</li>
<li><p>传输层</p>
<ol start='' >
<li><p>负责主机中两个进程的通信，即<strong>端到端</strong>的通信，传输单位时报文段或用户数据报。</p>
</li>
<li><p>传输层负责端到端的通信，即可以忽略通信子网的存在。</p>
</li>
<li><p>功能</p>
<ol start='' >
<li>可靠传输、不可靠传输</li>
<li>差错控制</li>
<li>流量控制</li>
<li>复用：多个应用层进程可同事使用下面运输层的服务。</li>
<li>分用：运输层把收到的信息分别交付给上面应用层中相应的进程。</li>

</ol>
</li>
<li><p>主要协议：TCP、UDP。</p>
</li>

</ol>
</li>
<li><p>网络层</p>
<ol start='' >
<li><p>关心通信子网的运行控制，把网络层的协议数据单元（分组）从源端传到目的端，为分组交换网上的不同主机提供通信服务，传输单位是数据报。</p>
</li>
<li><p>功能</p>
<ol start='' >
<li>路由控制</li>
<li>流量控制</li>
<li>差错控制</li>
<li>拥塞控制：采取措施来缓解网络的拥塞状态。</li>

</ol>
</li>
<li><p>注意协议：IP、IPX、ICMP、IGMP、ARP、RARP、OSRP。</p>
</li>

</ol>
</li>
<li><p>数据链路层</p>
<ol start='' >
<li><p>把网络层传下来的数据包组装成帧，传输单位是帧。</p>
</li>
<li><p>功能</p>
<ol start='' >
<li>成帧（定义帧的开始和结束）</li>
<li>差错控制：帧错+位错</li>
<li>流量控制</li>
<li>访问（接入）控制：控制对信道的访问</li>
<li>传输管理</li>

</ol>
</li>
<li><p>主要协议：SDLC、HDLC、PPP、STP。</p>
</li>

</ol>
</li>
<li><p>物理层</p>
<ol start='' >
<li><p>在物理媒体上为数据端设备透明的传输原始比特流，传输单位是比特。</p>
</li>
<li><p>物理层主要定义数据终端设备（DTE）和数据通信设备（DCE）的物理和逻辑连接方法。</p>
</li>
<li><p>透明传输：不管所传数据是什么比特组合，都能够在链路上传输。</p>
</li>
<li><p>功能</p>
<ol start='' >
<li>定义接口特性</li>
<li>定义传输模式：单工、半双工、双工</li>
<li>定义传输速率</li>
<li>比特同步</li>
<li>比特编码</li>

</ol>
</li>
<li><p>主要协议：Rj45、802.3、EIA-232C、EIA/TIA RS-449、CCITT的X.21。</p>
</li>

</ol>
</li>

</ol>
<h3 id='2）tcpip参考模型'>（2）TCP/IP参考模型</h3>
<ol start='' >
<li><p>OSI模型和TCP/IP模型：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%8812.42.00.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午12.42.00"></p>
</li>
<li><p>TCP/IP模型和OSI模型的相同点</p>
<ol start='' >
<li>二者都采取分层的体系结构，将大且复杂的问题划分成小的问题，且分层的功能也大体相同。</li>
<li>二者都是基于独立的协议栈的概念。</li>
<li>二者都可以解决异构网络的互连，实现不同计算机之间的通信。</li>

</ol>
</li>
<li><p>TCP/IP模型和OSI模型的不同点</p>
<ol start='' >
<li>OSI模型的最大贡献就是精确地定义了服务、协议、接口这三个主要概念，而TCP/IP模型在这三个概念上没有明确区分。</li>
<li>OSI模型产生在协议发明之前，没有偏向任何协议，有良好的通用性。TCP/IP模型则正好相反，模型能很好的匹配为之设计的协议，但是通用型不好。</li>
<li>TCP/IP模型设计之初就考虑到异构网互联的问题，将IP作为一个单独的重要层次。OSI则在后期通过在网络层中划分子层来实现IP的功能。</li>
<li><strong>OSI在网络层支持无连接和面向连接的通信，但在传输层仅有面向连接的通信。TCP/IP认为可靠性是端到端的问题，在网络层只有一种无连接的通信，但在传输层有无连接和面向连接的模式</strong>。</li>
<li><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%8812.50.42.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午12.50.42"></li>

</ol>
</li>

</ol>
<h3 id='3）5层参考模型'>（3）5层参考模型</h3>
<ol start='' >
<li>5层模型是采用OSI和TCP/IP的这种办法，综合两者的设计实现的只有5层协议的体系结构。</li>
<li>参考模型：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%8812.52.26.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午12.52.26"></li>
<li>5层参考模型的数据封装和解封装：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%8812.53.40.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午12.53.40"></li>

</ol>
<h1 id='计网-02-物理层'>计网-02-物理层</h1>
<h2 id='一通信基础'>一、通信基础</h2>
<h3 id='1）数据通信'>（1）数据通信</h3>
<ol start='' >
<li><p>物理层指的是解决如何在连接各种计算机的传输媒体上传输数据比特流的方法，而不是具体的传输媒体。</p>
</li>
<li><p>物理层主要任务：确定与传输媒体接口有关的一些特性——定义标准。</p>
<ol start='' >
<li>机械特性：定义物理连接的特性，规定物理连接时所采用的规格、接口形状等。</li>
<li>电气特性：规定传输二进制位时，线路上信号的电压范围、传输速率、抗阻匹配等。</li>
<li>功能特性：指明某条线上出现的某一电平表示何种意义，接口部件的信号线的用途。</li>
<li>规程特性/过程特性：定义各物理线路的工作规程和时序关系。</li>

</ol>
</li>
<li><p>数据通信模型：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%881.17.38.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午1.17.38"></p>
</li>

</ol>
<h3 id='2）基本概念'>（2）基本概念</h3>
<ol start='' >
<li><p>数据、信号、码元</p>
<ol start='' >
<li>数据通信的目的是传送消息。</li>
<li>数据：传送信息的实体，通常是有意义的符号序列，数据通信就是不同计算机之间传输表示信息的二进制序列的过程。</li>
<li>信号：数据的电气/电磁的表现，是数据在传输过程中的存在形式。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%881.19.01.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午1.19.01"></li>
<li>码元：用一个固定时长的信号波形（数字脉冲）表示一位k进制数字，代表不同离散数值的基本波形，是数字通信中数字信号的计量单位，这个时长内的信号称为k进制码元，该时长称为码元宽度。一般每个码元代表一组比特。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%881.42.24.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午1.42.24"></li>

</ol>
</li>
<li><p>信源、信道、信宿</p>
<ol start='' >
<li><p>数据通信指的是终端之间的通信，一个数据通信系统主要被划分为信源、信道、信宿。</p>
</li>
<li><p>信源：产生和发送数据的源头。</p>
</li>
<li><p>信道：信号的传输媒介，一般表示向某个方向传送消息的介质，信此一条通信线路往往包含一条发送信道和一条接受信道。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%881.32.17.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午1.32.17"></p>
</li>
<li><p>信宿：接受数据的终点。</p>
</li>
<li><p>通信方式</p>
<ol start='' >
<li>单工/单向通信：只有一个方向的通信而没有反方向的交互，<em>仅需要一条信道</em>，如广播。</li>
<li>半双工通信/双向交替通信：通信的双方都可以发送或接收消息，但任何一方都不能同时发送或接收，<em>需要两条信道</em>，如对讲机。</li>
<li>全双工通信/双向同时通信：通信双方可以同时发送和接收信息，<em>需要两条信道</em>，如打电话。</li>

</ol>
</li>
<li><p>数据传输方式</p>
<ol start='' >
<li>串行传输：1比特1比特地按照时间顺序传输，速度慢，费用低，适合远距离通信。</li>
<li>并行传输：若干比特通过多条通信信道同时传输，速度快，费用高，适合近距离通信。</li>

</ol>
</li>
<li><p>同步传输：数据的传送以一个数据区块为单位，又称区块传输，传送数据时，要先送出一个或多个同步字符再送出整批数据。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%881.40.02.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午1.40.02"></p>
</li>
<li><p>异步传输：异步传输将比特分成小组传输，发送方在任何时间都可能发送这些比特组，接收方不知道他们什么时候到达，传送数据时加一个字符起始位和一个字符的终止位。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%881.40.18.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午1.40.18"></p>
</li>

</ol>
</li>
<li><p>速率、波特、带宽</p>
<ol start='' >
<li><p>速率：也叫数据率，指数据的传输速率，表示单位时间内传输的数据量。</p>
<ol start='' >
<li>码元传输速率：即波特率，表示单位时间内传输的码元个数，单位是波特（Baud）。<strong>数字信号与进制有关，但是码元速率与进制数无关，只和码元长度T有关，<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="11.735ex" height="2.737ex" role="img" focusable="false" viewBox="0 -864.9 5187.1 1209.9" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.781ex;"><defs><path id="MJX-1-TEX-I-1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path><path id="MJX-1-TEX-I-1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path><path id="MJX-1-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-1-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-1-TEX-I-1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path><path id="MJX-1-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-1-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D445" xlink:href="#MJX-1-TEX-I-1D445"></use></g><g data-mml-node="mi" transform="translate(792,-150) scale(0.707)"><use data-c="1D435" xlink:href="#MJX-1-TEX-I-1D435"></use></g></g><g data-mml-node="mo" transform="translate(1656.5,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"></use></g><g data-mml-node="mfrac" transform="translate(2712.2,0)"><g data-mml-node="mn" transform="translate(292.1,394) scale(0.707)"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"></use></g><g data-mml-node="mi" transform="translate(220,-345) scale(0.707)"><use data-c="1D447" xlink:href="#MJX-1-TEX-I-1D447"></use></g><rect width="697.8" height="60" x="120" y="220"></rect></g><g data-mml-node="mo" transform="translate(3650.1,0)"><use data-c="28" xlink:href="#MJX-1-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(4039.1,0)"><use data-c="1D435" xlink:href="#MJX-1-TEX-I-1D435"></use></g><g data-mml-node="mo" transform="translate(4798.1,0)"><use data-c="29" xlink:href="#MJX-1-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">R_B = \frac{1}{T}(B)</script></strong>。</li>
<li>信息传输速率：表示单位时间内传输的二进制码元个数，即比特数，显示1s传输多少个比特，单位是b/s。</li>
<li>码元传输速率和信息传输速率的关系：若一个码元携带n bit的信息量，则M Baid的码元传输速率所对应的信息传输速率为M*n bit/s。</li>

</ol>
</li>
<li><p>波特：1波特表示数字通信系统每秒传输一个码元。</p>
</li>
<li><p>带宽：表示单位时间内从网络中的某一点到另一点所能通过的“最高数据率”，常用来表示网络的通信线路所能传输数据的能力，单位是bps。</p>
</li>

</ol>
</li>

</ol>
<h3 id='3）两个极限公式'>（3）两个极限公式</h3>
<ol start='' >
<li><p>失真：</p>
<ol start='' >
<li><p><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%889.07.20.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午9.07.20"></p>
</li>
<li><p>影响失真程度的因素</p>
<ol start='' >
<li>码元传输速率</li>
<li>信号传输距离</li>
<li>噪声干扰</li>
<li>传输媒体质量</li>

</ol>
</li>
<li><p>失真的一种现象——码间串扰</p>
<ol start='' >
<li>码间串扰就是接受端收到的信号波失去了码元之间清晰界限的情况。</li>
<li>由于信号在传输过程中受到信道的影响，相邻码元之间发生干扰导致接收端无法准确判别码元边界，会导致接收端对码元的解调和解码产生错误。</li>
<li>在任何信道中，码元传输速率都是有上限的。</li>
<li><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%889.09.25.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午9.09.25"></li>

</ol>
</li>

</ol>
</li>
<li><p>奈氏准则（奈奎斯特定理）</p>
<ol start='' >
<li>奈氏准则：在理想低通（无噪声，带宽受限）条件下，为了避免码间串扰，极限码元传输速率为2W Baud，W是信道带宽，单位是Hz。</li>
<li><em>奈氏准则只是限定码元传输速率的上限，没有限制信息传输速率</em>。</li>
<li>理想低通道下的极限数据传输率：<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="14.004ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 6189.6 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-2-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-2-TEX-I-1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path><path id="MJX-2-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path><path id="MJX-2-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path><path id="MJX-2-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-2-TEX-I-1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"></path><path id="MJX-2-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-2-TEX-I-1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path><path id="MJX-2-TEX-N-2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path><path id="MJX-2-TEX-I-1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path><path id="MJX-2-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-2-TEX-N-32"></use></g><g data-mml-node="mi" transform="translate(500,0)"><use data-c="1D44A" xlink:href="#MJX-2-TEX-I-1D44A"></use></g><g data-mml-node="mi" transform="translate(1548,0)"><use data-c="1D459" xlink:href="#MJX-2-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(1846,0)"><use data-c="1D45C" xlink:href="#MJX-2-TEX-I-1D45C"></use></g><g data-mml-node="msub" transform="translate(2331,0)"><g data-mml-node="mi"><use data-c="1D454" xlink:href="#MJX-2-TEX-I-1D454"></use></g><g data-mml-node="mn" transform="translate(510,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-2-TEX-N-32"></use></g></g><g data-mml-node="mi" transform="translate(3244.6,0)"><use data-c="1D449" xlink:href="#MJX-2-TEX-I-1D449"></use></g><g data-mml-node="mo" transform="translate(4013.6,0)"><use data-c="28" xlink:href="#MJX-2-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(4402.6,0)"><use data-c="1D44F" xlink:href="#MJX-2-TEX-I-1D44F"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(4831.6,0)"><g data-mml-node="mo"><use data-c="2F" xlink:href="#MJX-2-TEX-N-2F"></use></g></g><g data-mml-node="mi" transform="translate(5331.6,0)"><use data-c="1D460" xlink:href="#MJX-2-TEX-I-1D460"></use></g><g data-mml-node="mo" transform="translate(5800.6,0)"><use data-c="29" xlink:href="#MJX-2-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">2Wlog_2V (b/s)</script>，V表示码元的离散电平数目即有几种码元。</li>
<li>码元传输速率受到奈氏准则制约，所以要提高数据传输速率，就必须设法使的每个码元能够携带更多个的比特信息量，这就需要多元制的方法。</li>
<li>例题：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%889.18.08.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午9.18.08"></li>

</ol>
</li>
<li><p>香农定理</p>
<ol start='' >
<li><p>噪声存在于所有信道和设备中，因此噪声会对接受端对码元的判决产生错误。但是噪声的影响是相对的，如果信号很强则噪声影响较小，因此信噪比很重要。</p>
</li>
<li><p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="19.817ex" height="3.447ex" role="img" focusable="false" viewBox="0 -1011.8 8758.9 1523.5" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -1.158ex;"><defs><path id="MJX-3-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">信</text></g><g data-mml-node="mtext" transform="translate(878.7,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">噪</text></g><g data-mml-node="mtext" transform="translate(1757.4,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">比</text></g><g data-mml-node="mo" transform="translate(2913.8,0)"><use data-c="3D" xlink:href="#MJX-3-TEX-N-3D"></use></g><g data-mml-node="mfrac" transform="translate(3969.6,0)"><g data-mml-node="mrow" transform="translate(220,481.4) scale(0.707)"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">信</text></g><g data-mml-node="mtext" transform="translate(878.7,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">号</text></g><g data-mml-node="mtext" transform="translate(1757.4,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">的</text></g><g data-mml-node="mtext" transform="translate(2636.1,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">平</text></g><g data-mml-node="mtext" transform="translate(3514.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">均</text></g><g data-mml-node="mtext" transform="translate(4393.4,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">功</text></g><g data-mml-node="mtext" transform="translate(5272.1,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">率</text></g></g><g data-mml-node="mrow" transform="translate(220,-370.3) scale(0.707)"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">噪</text></g><g data-mml-node="mtext" transform="translate(878.7,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">声</text></g><g data-mml-node="mtext" transform="translate(1757.4,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">的</text></g><g data-mml-node="mtext" transform="translate(2636.1,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">平</text></g><g data-mml-node="mtext" transform="translate(3514.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">均</text></g><g data-mml-node="mtext" transform="translate(4393.4,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">功</text></g><g data-mml-node="mtext" transform="translate(5272.1,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">率</text></g></g><rect width="4549.3" height="60" x="120" y="220"></rect></g></g></g></svg></mjx-container><script type="math/tex">信噪比=\frac{信号的平均功率}{噪声的平均功率}</script>，常记为S/N，用分贝（dB）作为度量单位，即：<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="26.895ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 11887.7 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-4-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-4-TEX-I-1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path><path id="MJX-4-TEX-I-1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path><path id="MJX-4-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-4-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-4-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-4-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-4-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path><path id="MJX-4-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path><path id="MJX-4-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-4-TEX-I-1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path><path id="MJX-4-TEX-N-2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path><path id="MJX-4-TEX-I-1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">信</text></g><g data-mml-node="mtext" transform="translate(878.7,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">噪</text></g><g data-mml-node="mtext" transform="translate(1757.4,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">比</text></g><g data-mml-node="mo" transform="translate(2636.1,0)"><use data-c="28" xlink:href="#MJX-4-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(3025.1,0)"><use data-c="1D451" xlink:href="#MJX-4-TEX-I-1D451"></use></g><g data-mml-node="mi" transform="translate(3545.1,0)"><use data-c="1D435" xlink:href="#MJX-4-TEX-I-1D435"></use></g><g data-mml-node="mo" transform="translate(4304.1,0)"><use data-c="29" xlink:href="#MJX-4-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(4970.8,0)"><use data-c="3D" xlink:href="#MJX-4-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(6026.6,0)"><use data-c="31" xlink:href="#MJX-4-TEX-N-31"></use><use data-c="30" xlink:href="#MJX-4-TEX-N-30" transform="translate(500,0)"></use></g><g data-mml-node="mi" transform="translate(7026.6,0)"><use data-c="1D459" xlink:href="#MJX-4-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(7324.6,0)"><use data-c="1D45C" xlink:href="#MJX-4-TEX-I-1D45C"></use></g><g data-mml-node="msub" transform="translate(7809.6,0)"><g data-mml-node="mi"><use data-c="1D454" xlink:href="#MJX-4-TEX-I-1D454"></use></g><g data-mml-node="TeXAtom" transform="translate(510,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-4-TEX-N-31"></use><use data-c="30" xlink:href="#MJX-4-TEX-N-30" transform="translate(500,0)"></use></g></g></g><g data-mml-node="mo" transform="translate(9076.7,0)"><use data-c="28" xlink:href="#MJX-4-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(9465.7,0)"><use data-c="1D446" xlink:href="#MJX-4-TEX-I-1D446"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(10110.7,0)"><g data-mml-node="mo"><use data-c="2F" xlink:href="#MJX-4-TEX-N-2F"></use></g></g><g data-mml-node="mi" transform="translate(10610.7,0)"><use data-c="1D441" xlink:href="#MJX-4-TEX-I-1D441"></use></g><g data-mml-node="mo" transform="translate(11498.7,0)"><use data-c="29" xlink:href="#MJX-4-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">信噪比(dB)=10log_{10}(S/N)</script>。</p>
</li>
<li><p>香农定理：在带宽受限且有噪声的信道中，为了不产生误差，信息的数据传输速率有上限值。</p>
</li>
<li><p>信道的极限数据传输速率=<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="21.389ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 9454 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-5-TEX-I-1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path><path id="MJX-5-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path><path id="MJX-5-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path><path id="MJX-5-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-5-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-5-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-5-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-5-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-5-TEX-I-1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path><path id="MJX-5-TEX-N-2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path><path id="MJX-5-TEX-I-1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path><path id="MJX-5-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-5-TEX-I-1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path><path id="MJX-5-TEX-I-1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D44A" xlink:href="#MJX-5-TEX-I-1D44A"></use></g><g data-mml-node="mi" transform="translate(1048,0)"><use data-c="1D459" xlink:href="#MJX-5-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(1346,0)"><use data-c="1D45C" xlink:href="#MJX-5-TEX-I-1D45C"></use></g><g data-mml-node="msub" transform="translate(1831,0)"><g data-mml-node="mi"><use data-c="1D454" xlink:href="#MJX-5-TEX-I-1D454"></use></g><g data-mml-node="mn" transform="translate(510,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-5-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(2744.6,0)"><use data-c="28" xlink:href="#MJX-5-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(3133.6,0)"><use data-c="31" xlink:href="#MJX-5-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(3855.8,0)"><use data-c="2B" xlink:href="#MJX-5-TEX-N-2B"></use></g><g data-mml-node="mi" transform="translate(4856,0)"><use data-c="1D446" xlink:href="#MJX-5-TEX-I-1D446"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(5501,0)"><g data-mml-node="mo"><use data-c="2F" xlink:href="#MJX-5-TEX-N-2F"></use></g></g><g data-mml-node="mi" transform="translate(6001,0)"><use data-c="1D441" xlink:href="#MJX-5-TEX-I-1D441"></use></g><g data-mml-node="mo" transform="translate(6889,0)"><use data-c="29" xlink:href="#MJX-5-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(7278,0)"><use data-c="28" xlink:href="#MJX-5-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(7667,0)"><use data-c="1D44F" xlink:href="#MJX-5-TEX-I-1D44F"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(8096,0)"><g data-mml-node="mo"><use data-c="2F" xlink:href="#MJX-5-TEX-N-2F"></use></g></g><g data-mml-node="mi" transform="translate(8596,0)"><use data-c="1D460" xlink:href="#MJX-5-TEX-I-1D460"></use></g><g data-mml-node="mo" transform="translate(9065,0)"><use data-c="29" xlink:href="#MJX-5-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">Wlog_2(1+S/N) (b/s)</script>。注意S/N是没有单位的，S/N不等于信噪比，如果只知道信噪比是多少分贝则需要通过信噪比计算S/N。</p>
</li>
<li><p>结论：</p>
<ol start='' >
<li>信道的带宽或信噪比越大，则信息的极限传输速率越高。</li>
<li>对一定的传输带宽和一定的信噪比，信息的传输速率的上限也一定。</li>
<li>只要信息的传输速率低于信道的极限传输速率，则一定能找到方法实现无差错的传输。</li>
<li>香农定理的出的为极限信息传输速率，实际信道的速率要低。</li>
<li>若W或S/N无上限，那么理论上信道极限传输速率也无上限。</li>

</ol>
</li>
<li><p>例题：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%889.27.15.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午9.27.15"></p>
</li>

</ol>
</li>
<li><p>如何选择奈氏准则和香农定理：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%889.29.34.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午9.29.34"></p>
</li>
<li><p>实际的信道传输速率限制应该是二者结果的最小值。</p>
</li>

</ol>
<h3 id='4）编码与调制'>（4）编码与调制</h3>
<ol start='' >
<li><p>数据无论是数字的还是模拟的，都为了传输都需要转变成信号，把<strong>数据变换为模拟信号的过程称为调制</strong>，把<strong>数据变换为数字信号的过程称为编码</strong>。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%889.38.43.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午9.38.43"></p>
</li>
<li><p>基带信号与宽带信号：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%889.36.45.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午9.36.45"></p>
</li>
<li><p>数字数据编码为数字信号</p>
<p><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%889.48.38.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午9.48.38"></p>
<ol start='' >
<li><p>归零编码（RZ）：</p>
<ol start='' >
<li>用电平的高低代表0/1。 </li>
<li>在每个时钟周期的中间都要恢复到0，接收方可以通过该跳变调整时钟基准，为传输双方提供了自同步机制。</li>
<li>由于归零占用了一些带宽，因此传输效率收到了影响。</li>

</ol>
</li>
<li><p><strong>非归零编码（NRZ）</strong>：高1低0，编码容易实现，但是没有检测功能，且无法判断一个码元的开始和结束，以至于收发双方难以保持同步。</p>
</li>
<li><p>反向不归零编码（NRZI）：信号电平翻转表示0，信号电平不变表示1。</p>
</li>
<li><p><strong>曼彻斯特编码</strong>：</p>
<ol start='' >
<li>将一个码元分成两个相等的间隔，用两个间隔的高低电平跳变表示码元。</li>
<li>该编码的特点是每一个码元的中间出现电平跳变，位于中间的跳变既可以作为时钟信号也可以作为数据信号，但是所占的频带宽度是原始基带宽度的两倍。</li>
<li>每个码元都调成两个电平，所以数据传输速率只有调制速率的1/2。</li>

</ol>
</li>
<li><p><strong>差分曼彻斯特编码</strong>：</p>
<ol start='' >
<li>使用前半个码元的电平与上一个码元的后半个码元的电平是否相同表示0/1。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%8810.04.33.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午10.04.33"></li>
<li>在每个码元的中间都有一次电平的跳转，可以实现自同步，且抗干扰强于曼彻斯特编码。</li>
<li>常用于局域网传播。</li>

</ol>
</li>
<li><p>4B/5B编码</p>
<ol start='' >
<li>将发送的数据流的每4位作为一组，然后按照4B/5B编码规则将其转换成对应的5位码，之后再传输给接收方，编码效率为80%。</li>
<li>比如用这种方式映射4位码和5位码：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%8810.07.13.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午10.07.13"></li>
<li>用5位码的16个对应16种4位码，其他16种作为控制码（帧的开始和结束、路线的状态信息等）或保留。</li>

</ol>
</li>

</ol>
</li>
<li><p>数字信号调制为模拟信号</p>
<p><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%8810.12.30.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午10.12.30"></p>
<ol start='' >
<li><p>数字数据调制技术在发送端将数字信号转换为模拟信号，在接受端将模拟信号还原为数字信号，分别对应于调制解调器和调制和解调过程。</p>
</li>
<li><p>幅移键控（ASK）——调幅：</p>
<ol start='' >
<li>通过改变载波信号的振幅来表示1/0，而载波的频率和相位都不改变。</li>
<li>容易实现，但抗干扰能力差。</li>

</ol>
</li>
<li><p>频移键控（FSK）——调频：</p>
<ol start='' >
<li>通过改变载波信号的频率来表示1/0，而载波的振幅和相位都不改变。</li>
<li>容易实现，抗干扰能力强，应用广泛。</li>

</ol>
</li>
<li><p>相移键控（PSK）——调相：</p>
<ol start='' >
<li>通过改变载波信号的相位来表示1/0，而载波的振幅和频率都不改变。</li>
<li>分为绝对调相和相对调相。</li>

</ol>
</li>
<li><p>正交振幅调制（QAM）——调幅+调相：</p>
<ol start='' >
<li>在频率相同的前提下，将ASK和PSK结合，形成叠加信号。</li>
<li>设波特率为B，采用m个相位，每个相位有n中振幅，则数据传输速率R为：<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="20.317ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 8980.1 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-6-TEX-I-1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path><path id="MJX-6-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-6-TEX-I-1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path><path id="MJX-6-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path><path id="MJX-6-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path><path id="MJX-6-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-6-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-6-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-6-TEX-I-1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-6-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-6-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-6-TEX-I-1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path><path id="MJX-6-TEX-N-2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path><path id="MJX-6-TEX-I-1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D445" xlink:href="#MJX-6-TEX-I-1D445"></use></g><g data-mml-node="mo" transform="translate(1036.8,0)"><use data-c="3D" xlink:href="#MJX-6-TEX-N-3D"></use></g><g data-mml-node="mi" transform="translate(2092.6,0)"><use data-c="1D435" xlink:href="#MJX-6-TEX-I-1D435"></use></g><g data-mml-node="mi" transform="translate(2851.6,0)"><use data-c="1D459" xlink:href="#MJX-6-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(3149.6,0)"><use data-c="1D45C" xlink:href="#MJX-6-TEX-I-1D45C"></use></g><g data-mml-node="msub" transform="translate(3634.6,0)"><g data-mml-node="mi"><use data-c="1D454" xlink:href="#MJX-6-TEX-I-1D454"></use></g><g data-mml-node="mn" transform="translate(510,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-6-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(4548.1,0)"><use data-c="28" xlink:href="#MJX-6-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(4937.1,0)"><use data-c="1D45A" xlink:href="#MJX-6-TEX-I-1D45A"></use></g><g data-mml-node="mi" transform="translate(5815.1,0)"><use data-c="1D45B" xlink:href="#MJX-6-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(6415.1,0)"><use data-c="29" xlink:href="#MJX-6-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(6804.1,0)"><use data-c="28" xlink:href="#MJX-6-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(7193.1,0)"><use data-c="1D44F" xlink:href="#MJX-6-TEX-I-1D44F"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(7622.1,0)"><g data-mml-node="mo"><use data-c="2F" xlink:href="#MJX-6-TEX-N-2F"></use></g></g><g data-mml-node="mi" transform="translate(8122.1,0)"><use data-c="1D460" xlink:href="#MJX-6-TEX-I-1D460"></use></g><g data-mml-node="mo" transform="translate(8591.1,0)"><use data-c="29" xlink:href="#MJX-6-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">R=Blog_2(mn) (b/s)</script>。</li>

</ol>
</li>

</ol>
</li>
<li><p>模拟数据编码为数字信号</p>
<ol start='' >
<li><p>计算机内部的是二进制数据，处理的是数字音频，所以要将模拟音频转化成有限个数字表示的离散序列，即实现音频数字化，如对音频信号进行编码的脉码调制（PCM）。</p>
</li>
<li><p>步骤</p>
<ol start='' >
<li><p>采样：</p>
<ol start='' >
<li>对模拟信号进行周期性扫描，把时间上连续的信号变成时间上离散的信号。</li>
<li>采样定理：<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="22.558ex" height="2.315ex" role="img" focusable="false" viewBox="0 -705 9970.8 1023.2" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.72ex;"><defs><path id="MJX-7-TEX-I-1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path><path id="MJX-7-TEX-N-3E" d="M84 520Q84 528 88 533T96 539L99 540Q106 540 253 471T544 334L687 265Q694 260 694 250T687 235Q685 233 395 96L107 -40H101Q83 -38 83 -20Q83 -19 83 -17Q82 -10 98 -1Q117 9 248 71Q326 108 378 132L626 250L378 368Q90 504 86 509Q84 513 84 520Z"></path><path id="MJX-7-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-7-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D453" xlink:href="#MJX-7-TEX-I-1D453"></use></g><g data-mml-node="TeXAtom" transform="translate(523,-176.7) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">采</text></g><g data-mml-node="mtext" transform="translate(878.7,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">样</text></g><g data-mml-node="mtext" transform="translate(1757.4,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">频</text></g><g data-mml-node="mtext" transform="translate(2636.1,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">率</text></g></g></g><g data-mml-node="mo" transform="translate(3336.1,0)"><use data-c="3E" xlink:href="#MJX-7-TEX-N-3E"></use><use data-c="3D" xlink:href="#MJX-7-TEX-N-3D" transform="translate(778,0)"></use></g><g data-mml-node="mn" transform="translate(5169.9,0)"><use data-c="32" xlink:href="#MJX-7-TEX-N-32"></use></g><g data-mml-node="msub" transform="translate(5669.9,0)"><g data-mml-node="mi"><use data-c="1D453" xlink:href="#MJX-7-TEX-I-1D453"></use></g><g data-mml-node="TeXAtom" transform="translate(523,-176.7) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">信</text></g><g data-mml-node="mtext" transform="translate(878.7,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">号</text></g><g data-mml-node="mtext" transform="translate(1757.4,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">最</text></g><g data-mml-node="mtext" transform="translate(2636.1,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">高</text></g><g data-mml-node="mtext" transform="translate(3514.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">频</text></g><g data-mml-node="mtext" transform="translate(4393.4,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">率</text></g></g></g></g></g></svg></mjx-container><script type="math/tex">f_{采样频率} >= 2f_{信号最高频率}</script>时，能够使所得的离散信号无失真地代表被抽象的模拟数据。</li>

</ol>
</li>
<li><p>量化：把采样的电平幅值按照一定的分级标度转化为对应的数字值，并取整数，这就把连续的电平幅值转换为离散的数字量。</p>
</li>
<li><p>编码：把量化的结果转换为与之对应的二进制编码。</p>
</li>

</ol>
</li>

</ol>
</li>
<li><p>模拟数据调制为模拟信号：为了实现传输的有效性，可能需要较高的频率。这种调制方式还可以使用频分复用技术，充分利用带宽资源。在电话机和本地交换机所传输的信号是采用模拟信号传输模拟数据的方式：模拟的声音数据是加载到模拟的载波信号中传输的。</p>
</li>

</ol>
<h3 id='5）数据交换'>（5）数据交换</h3>
<ol start='' >
<li><p>电路交换（Circuit Exchanging）</p>
<ol start='' >
<li><p>原理：在数据传输期间，源结点与目的结点之间有一条由中间节点构成的专用物理连接线路，在数据传输结束之前这条线路都一直保持。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%8810.35.17.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午10.35.17"></p>
</li>
<li><p>阶段：连接建立、数据传输、连接释放<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%8810.34.52.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午10.34.52"></p>
</li>
<li><p>特点：独占资源，用户始终占用端到端的固定传输带宽，适用于远程批处理信息传输或系统间实时性要求高的大量数据传输情况。</p>
</li>
<li><p>优点：</p>
<ol start='' >
<li>通信时延小</li>
<li>有序传输：双方通信按顺序传输数据</li>
<li>没有冲突：不会出现争用物理信道的情况。</li>
<li>适用范围广</li>
<li>实时性强</li>
<li>控制简单</li>

</ol>
</li>
<li><p>缺点：</p>
<ol start='' >
<li>建立连接时间长</li>
<li>线路独占</li>
<li>灵活性差</li>
<li>难以规格化</li>

</ol>
</li>

</ol>
</li>
<li><p>报文交换（Message Exchanging）</p>
<ol start='' >
<li><p>报文（message）是网络中交换与传输的数据单元，即站点一次性要发送的数据块。报文包含了将要发送的完整的数据信息，其长短很不一致，长度不限且可变。</p>
</li>
<li><p>原理：无需在两个站点之间建立专用通路，其数据传输的单位是报文，传输过程使用存储转发方式。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%8810.50.35.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午10.50.35"></p>
</li>
<li><p>优点：</p>
<ol start='' >
<li>无需建立连接</li>
<li>动态分配线路</li>
<li>提高路线可靠性</li>
<li>提高路线利用率</li>
<li>提供多目标服务</li>

</ol>
</li>
<li><p>缺点：</p>
<ol start='' >
<li>实时性差：数据进入交换结点后要经历存储、转发过程，引起转发时延。</li>
<li>只适用于数字信号</li>
<li>报文交换对报文大小没有限制，这要求网络节点有较大的缓存空间。</li>

</ol>
</li>

</ol>
</li>
<li><p>分组交换（Packet Exchanging）</p>
<ol start='' >
<li><p>分组：大多数计算机网络都不能连续的传送任意长的数据，所以将数据分割成小块然后逐块发送，这种小块就称作分组。</p>
</li>
<li><p>原理：分组交换与报文交换的工作方式基本相同，都采用存储转发方式，形式上的主要差别在于，分组交换网中要限制所传输的数据单位的长度，一般选128B。发送节点首先对从终端设备送来的数据报文进行接收、存储，而后将报文划分成一定长度的分组，并以分组为单位进行传输和交换。接收结点将收到的分组组装成信息或报文。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%8810.57.02.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午10.57.02"></p>
</li>
<li><p>优点：</p>
<ol start='' >
<li>无建立时延</li>
<li>线路利用率高</li>
<li>简化了存储管理</li>
<li>加速传输</li>
<li>减少了出错概率和重发数据量</li>

</ol>
</li>
<li><p>缺点：</p>
<ol start='' >
<li>存在存储转发时延</li>
<li>需要传输额外的信息量</li>
<li>当分组交换采用数据报服务时，可能出现失序、丢失或重复分组等问题。</li>

</ol>
</li>

</ol>
</li>
<li><p>数据交换方式的选择<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%8810.58.48.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午10.58.48"></p>
</li>

</ol>
<h3 id='6）分组交换方式的细分'>（6）分组交换方式的细分</h3>
<ol start='' >
<li><p>数据报方式</p>
<ol start='' >
<li><p>作为通信子网用户的端系统发送一个报文时，在端系统中实现的高层协议先把报文拆成若干带有序号的数据单元，并在网络层加上地址等控制信息后形成数据报分组（即网络层的 PDU)。中间结点存储分组很短一段时间，找到最佳的路由后，尽快转发每个分组。不同的分组可以走不同的路径，也可以按不同的顺序到达目的结点。</p>
</li>
<li><p>流程：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%8811.01.09.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午11.01.09"></p>
</li>
<li><p>特点：</p>
<ol start='' >
<li>发送分组前不需要建立连接</li>
<li>网络尽最大能力交付，传输不保证可靠性。同一报文的不同分组达到目的节点时可能发生乱序、重复与丢失。</li>
<li>发送的分组中要包括发送端和接受端的完整地址，以便可以独立运输。</li>
<li>分组在交换结点存储转发时需要排队等候和处理，这会带来一定的时延。</li>
<li>网络具有冗余路径。</li>
<li>存储转发的延时较小，提高网络吞吐量。</li>
<li>收发双方不独占链路，资源利用率高。</li>

</ol>
</li>

</ol>
</li>
<li><p>虚电路方式</p>
<ol start='' >
<li><p>虚电路：一条源主机到目的主机类似于电路的路径（逻辑连接），路径上所有节点都要维持这条虚电路的建立，都维持一张虚电路表记录打开的虚电路信息。</p>
</li>
<li><p>虚电路方式是将数据包和电路交换的结合，发挥两者优点。</p>
</li>
<li><p>过程：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%8811.06.08.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午11.06.08"></p>
</li>
<li><p>特点</p>
<ol start='' >
<li>虚电路的建立和拆除需要时间开销，对短分组来说很浪费，但是对长时间的频繁交换则很高效。</li>
<li>虚电路的路由选择体现在连接建立阶段，连接建立后就确定了传输路径。</li>
<li>虚电路提供了可靠的通信功能，能保证每个分组正确且有序到达。</li>
<li>指明弱点：当网络中某个节点或链路失效时，所有经过该节点或链路的虚电路都被破坏。</li>

</ol>
</li>

</ol>
</li>
<li><p>数据报&amp;虚电路<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8A%E5%8D%8811.08.50.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 上午11.08.50"></p>
</li>

</ol>
<h2 id='二传输介质'>二、传输介质</h2>
<h3 id='1）传输介质'>（1）传输介质</h3>
<ol start='' >
<li><p>传输介质也成传输媒体/媒介，是数据传输系统中发送设备和接收设备之间的<strong>物理通路</strong>。</p>
</li>
<li><p><em>传输媒体不是物理层</em>，传输媒体比物理层更低，因此有时也称传输媒体为第0层。在传输媒体中传输的是信号，但传输媒体并不知道所传输的信号代表什么，但物理层规定了电气特性，因此能识别所传送的比特流。</p>
</li>
<li><p>传输介质分为</p>
<ol start='' >
<li>导向性传输介质：电磁波被导向沿着固体媒介传播。</li>
<li>非导向性传播介质：自由空间，介质可以是空气、海水等。</li>

</ol>
</li>

</ol>
<h3 id='2）双绞线'>（2）双绞线</h3>
<ol start='' >
<li>双绞线是古老、常用的传输介质，由两根并排绞合、相互绝缘的铜导线组成，绞合可以减少对相邻导线的电磁干扰。</li>
<li>在双绞线外加上一个由金属丝编织成的屏蔽层来进一步提高抗电磁干扰能力，这就是屏蔽双绞线（STP），无屏蔽层的双绞线就称为非屏蔽双绞线（UTP）。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8B%E5%8D%888.58.31.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 下午8.58.31"></li>
<li>双绞线价格便宜，是最常用的传输介质之一，在局域网和传统电话网中普遍使用。</li>
<li>距离太远时，对于模拟传输，要用放大器方法衰减的信号。对于数字传输，要用中继器将失真的信号整形。</li>

</ol>
<h3 id='3）同轴电缆'>（3）同轴电缆</h3>
<ol start='' >
<li>同轴电缆由内导体、绝缘层、网状编织屏蔽层和塑料外层构成按特性阻抗数值的不同，通常将同轴电缆分为两类：50Ω同轴电缆和75Ω同轴电缆。其中，50Ω同轴电缆主要用于传送基带数宇信号，又称基带同轴电缆，它在局域网中应用广泛；75Ω同轴电缆主要用于传送宽带信号，又称宽带同轴电缆，主要用于有线电视系统。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8B%E5%8D%889.01.16.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 下午9.01.16"></li>
<li>由于外导体屏蔽层的作用，同轴电缆具有良好的抗干扰特性，被广泛用于传输较高速率的数据，其传输距离更远，但价格较双绞线贵。</li>

</ol>
<h3 id='4）光纤'>（4）光纤</h3>
<ol start='' >
<li><p>光纤通信就是利用光导纤维（简称光纤）传递光脉冲来进行通信。</p>
</li>
<li><p>有光脉冲表示1，无光脉冲表示0。可见光的频率约为 10^8 MHz，因此光纤通信系统的带宽范围极大。</p>
</li>
<li><p>光纤主要由纤芯和包层构成，纤芯很细，其直径只有8至100µm，光波通过纤芯进行传导，包层较纤芯有较低的折射率。当光线从高折射率的介质射向低折射率的介质时，其折射角将大于入射角。因此，只要入射角大于某个临界角度，就会出现全反射，即光线碰到包层时就会折射回纤芯，这个过程不断重复，光也就沿着光纤传输下去。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8B%E5%8D%889.03.28.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 下午9.03.28"></p>
</li>
<li><p>多模光纤和单模光纤：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8B%E5%8D%889.04.00.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 下午9.04.00"></p>
</li>
<li><p>特点</p>
<ol start='' >
<li>传输损耗小，中继距离长，对远距离传输特别经济</li>
<li>抗雷电和电磁干扰性能好</li>
<li>无串音干扰，保密性好，也不易被窃听或截取数据</li>
<li>体积小，重量轻</li>

</ol>
</li>

</ol>
<h3 id='5）无线传输介质'>（5）无线传输介质</h3>
<ol start='' >
<li><p>无线电波</p>
<ol start='' >
<li>无线电波有较强的穿透能力，传播距离远，广泛应用于通信领域。</li>
<li>信号向所有方向传播，有效距离内的接收设备无需对准某个方向即可进行连接，大大简化了通信连接。</li>

</ol>
</li>
<li><p>微波</p>
<ol start='' >
<li>微波信号沿固定方向传播，有很强的方向性，都沿直线传播。</li>

</ol>
</li>
<li><p>红外线、激光</p>
<ol start='' >
<li>红外线、激光信号沿固定方向传播。</li>
<li>需要把传输的信号分别转换成各自的信号格式，即红外光信号和激光信号，再在空间中传播。</li>

</ol>
</li>

</ol>
<p>&nbsp;</p>
<h2 id='三物理层设备'>三、物理层设备</h2>
<h3 id='1）中继器'>（1）中继器</h3>
<ol start='' >
<li><p>诞生原因：由于存在损耗，在线路上传输的信号功率会逐渐衰减，衰减到一定程度时将造成信号失真，因此会导致接收错误。</p>
</li>
<li><p>功能：对信号进行再生和还原，对衰减的信号进行方法，保持与原数据相同并增加信号的传输距离，延长网络长度。</p>
</li>
<li><p>中继器的两端：</p>
<ol start='' >
<li>两端的网络部分是网段而不是子网，适用于完全相同的两类网络互连，且两个网段的速率要相同。</li>
<li>中继器两端一定要是一个协议，中继器不会存储转发。</li>

</ol>
</li>
<li><p>5-4-3规则：</p>
<ol start='' >
<li>5：最多可以连接 5 个段（包括起始段和终止段）。</li>
<li>4：最多可以使用 4 个中继器进行信号的传输。</li>
<li>3：最多可以有 3 个段被设备（主机或中继器）连接，即中继器之间最多只能有 3 个段。</li>
<li><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8B%E5%8D%889.12.24.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 下午9.12.24"></li>

</ol>
</li>

</ol>
<h3 id='2）集线器多口中继器）'>（2）集线器（多口中继器）</h3>
<ol start='' >
<li>集线器的功能：对信号进行再生放大转发，对衰减的信号进行放大，接着转发到其他所有（除输入端口外）处于工作状态的端口上，以增加信号传输的距离，延长网络的长度。</li>
<li>不具备信号的定向传送能力，是一个共享式设备——广播。</li>
<li><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-27%20%E4%B8%8B%E5%8D%889.15.04.png" referrerpolicy="no-referrer" alt="截屏2023-06-27 下午9.15.04"></li>

</ol>
<h1 id='计网-03-数据链路层'>计网-03-数据链路层</h1>
<h2 id='一数据链路层的组成'>一、数据链路层的组成</h2>
<ol start='' >
<li><p>节点/结点：主机、路由器</p>
</li>
<li><p>链路：网络中两个节点之间的物理通道，链路的传输介质主要有......，分为有线链路、无线链路。</p>
</li>
<li><p>数据链路：网络中两个节点之间的逻辑通路，把实现控制数据传输协议的硬件和软件加到链路上就构成数据链路。</p>
</li>
<li><p>帧：链路层的协议数据单元，封装网络层数据报。</p>
</li>
<li><p>功能：</p>
<ol start='' >
<li>在物理层提供的服务的基础上向网络层提供服务。</li>
<li>其主要作用是加强物理层传输原始比特流的功能，将物理层提供的可能出错的物理连接改造为逻辑上无差错的数据链路，使之对网络层表现为一条无差错的链路。</li>

</ol>
</li>

</ol>
<p>&nbsp;</p>
<h2 id='二数据链路层的功能'>二、数据链路层的功能</h2>
<h3 id='1）为网络层提供服务'>（1）为网络层提供服务：</h3>
<ol start='' >
<li><p>无确认无连接服务</p>
<ol start='' >
<li>源机器发送数据帧不先建立链路连接，目的机器收到数据后也不确认。</li>
<li>数据链路层不关心丢失的帧而交给上层处理。</li>
<li>适用于实时通信或误码率较低的通信通道。</li>

</ol>
</li>
<li><p>有确认无连接服务</p>
<ol start='' >
<li>源机器发送数据帧不先建立链路连接，目的机器收到数据后必须发回确认。</li>
<li>源机器在限定时间内未收到确认信号则重传丢失的帧，可以提高传输的可靠性。</li>
<li>适用于误码率较高的通信信道。</li>

</ol>
</li>
<li><p>有确认面向连接服务（有连接服务则必定需要确认）</p>
<ol start='' >
<li>帧传输过程分为三个阶段：建立数据链路、传输帧、释放数据链路。</li>
<li>目的机器对收到的每一帧都要给出确认，源机器确认收到才能发送下一帧，因而可靠性最高。</li>
<li>适用于通信要求（可靠性、实时性）较高的场合。</li>

</ol>
</li>

</ol>
<h3 id='2）链路管理'>（2）链路管理</h3>
<p>数据链路层连接的建立、维持、释放过程为链路管理。</p>
<h3 id='3）组帧'>（3）组帧<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8A%E5%8D%888.55.15.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 上午8.55.15"></h3>
<ol start='' >
<li><p>封装成帧</p>
<ol start='' >
<li>在一段数据的前后部分添加首部和尾部，构成一个帧。接受端收到物理层上交的比特流之后就能根据首部和尾部的标记识别到帧的开始和结束。</li>
<li>帧定界：根据首部和尾部包含的控制信息，确定帧的界限。</li>
<li>帧同步：接收方应当能从接收到的二进制比特流中区分出帧的起始和终止。（如在HDLC协议中用标识位F（01111110）来表示开始和结束）<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8A%E5%8D%889.01.22.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 上午9.01.22"></li>

</ol>
</li>
<li><p>组帧的四种方法</p>
<ol start='' >
<li><p>字符计数法<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8A%E5%8D%889.02.57.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 上午9.02.57"></p>
<ol start='' >
<li>帧首部使用一个计数字段（第一个字节，8位）标明帧内字符数</li>
<li>缺点：长度信息全部放在开头，一旦第一字节出错则整个读取过程全部错误。</li>

</ol>
</li>
<li><p>字符（节）填充法</p>
<ol start='' >
<li>使用特定字符来表示一帧的开始和结束，如果数据段出现了特殊字符，则可在特殊字符前填充一个转义字符（ESC）来实现透明传输。</li>
<li>接收方受到数据后会自己删除ESC字符，结果仍得到原来的数据。</li>
<li><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8A%E5%8D%889.09.36.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 上午9.09.36"></li>

</ol>
</li>
<li><p>零比特填充法</p>
<ol start='' >
<li>使用01111110表示一个帧的开始和结束（6个1）。</li>
<li>在发送端，在信息字段的每个5个连续的1后面填充一个0，则此时无论是否有6个1都能破坏这个会被误判的字符。</li>
<li>在接受端，进行逆操作，每5个连续的1则删除后面的0。</li>
<li>零比特填充法很容易通过硬件实现，性能优于字符填充法。</li>
<li><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8A%E5%8D%889.14.18.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 上午9.14.18"></li>

</ol>
</li>
<li><p>违规编码法</p>
<ol start='' >
<li>在物理层进行比特编码时通常采用违规编码法。</li>
<li>如曼彻斯特编码通过电平高低变化表示0/1，而高-高、低-低的变化则是非法的，硬刺痛过这种违规编码序列来定界帧的起始和终止，局域网IEEE802标准就用了这种方法。</li>
<li>违规编码法不需要任何填充技术，但只适用于采用冗余编码的特殊编码环境。</li>
<li></li>

</ol>
</li>

</ol>
</li>
<li><p>透明传输</p>
<ol start='' >
<li>指不管所传数据是什么比特组合，都能在链路上传输。因此链路层是不知道有什么会阻碍数据传输的东西。</li>
<li>当所传数据的比特组合恰和某个控制信息一样时，就必须采取适当的措施使接收方不会将数据误以为是控制信息。</li>

</ol>
</li>

</ol>
<h3 id='4）差错控制帧错位错）'>（4）差错控制（帧错/位错）</h3>
<ol start='' >
<li><p>传输中由于噪声会产生差错</p>
<ol start='' >
<li>位错：比特位出错，1变成0、0变成1。</li>
<li>帧错：丢失、重复、失序。</li>

</ol>
<p>本章节进讨论位错。</p>
</li>
<li><p>检错编码</p>
<ol start='' >
<li><p>检错编码都使用<strong>冗余编码</strong>技术：在数据发送之前，先按某种关系附加上一定的冗余位，构成一个符合某一规则的码字后再发送。当要发送的有效数据变化时，相应的冗余位也随之变化，使码字遵从不变的规则。接收端根据收到码字是否仍符合原规则，从而判断是否出错。</p>
</li>
<li><p>奇偶校验码</p>
<ol start='' >
<li>奇校验码和偶校验码的统称。</li>
<li>在信息段的后面添加一位0/1表示信息段中“1”的数量为偶数/奇数。</li>
<li>只能检测出奇数个比特的错误，检错能力为50%，也没有纠错能力。</li>

</ol>
</li>
<li><p>CRC循环冗余码</p>
<p><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8A%E5%8D%889.40.45.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 上午9.40.45"></p>
</li>
<li><p>纠错编码——海明码</p>
<p><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8A%E5%8D%889.57.35.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 上午9.57.35"></p>
<p><img src="https://wbw2333.github.io/assets/imgs/../../../Library/Application%20Support/typora-user-images/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8A%E5%8D%889.57.50.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 上午9.57.50"></p>
</li>

</ol>
</li>

</ol>
<h3 id='5）流量控制与可靠传输机制'>（5）流量控制与可靠传输机制</h3>
<ol start='' >
<li><p>较高的发送速度和较低的接受能力的不匹配就会造成传输出错，因此流量控制也是数据链路层的重要工作。</p>
</li>
<li><p>数据链路层的流量控制是点对点的，而传输层的流量控制是端到端的。</p>
<ol start='' >
<li>数据链路层流量控制手段：接收方收不下则不回复确认信息。</li>
<li>传输层流量控制手段：接受端发送一个窗口公告。</li>

</ol>
</li>
<li><p>停止-等待控制</p>
<ol start='' >
<li>发送方每发送一帧，都要等待接收方的应答信号，之后才能发送下一帧。</li>
<li>接收方每接收一帧，都要反馈一个应答信号，表示可接收下一帧，如果接收方不反馈应答信号，那么发送方必须一直等待。</li>
<li>每次只允许发送一帧，然后就陷入等待接收方确认信息的过程中，因而传输效率很低。</li>
<li><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8A%E5%8D%8810.15.35.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 上午10.15.35"></li>

</ol>
</li>
<li><p>滑动窗口控制</p>
<ol start='' >
<li><p>在任意时刻，发送方都维持一组连续的允许发送的帧的序号，称为发送窗口。</p>
</li>
<li><p>同时接收方也维持一组连续的允许接收帧的序号，称为接收窗口。</p>
</li>
<li><p>发送窗口用来对发送方进行流量控制，而发送窗口的大小W代表在还未收到对方确认信息的情况下发送方最多还可以发送多少个数据帧。</p>
</li>
<li><p>在接收端设置接收窗口是为了控制可以接收哪些数据帧和不可以接收哪些帧。在接收方，只有收到的数据帧的序号落入接收窗口内时，才允许将该数据帧收下。若接收到的数据帧落在接收窗口之外，则一律将其丢弃。</p>
</li>
<li><p>图示：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8A%E5%8D%8810.19.01.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 上午10.19.01"></p>
</li>
<li><p>发送端每收到一个确认帧，发送窗口就向前滑动一个帧的位置，当发送窗口内没有可以发送的帧（即窗口内的帧全部是已发送但未收到确认的帧）时，发送方就会停止发送，直到收到接收方发送的确认帧使窗口移动，窗口内有可以发送的帧后，才开始继续发送。</p>
</li>
<li><p>接收端收到数据帧后，将窗口向前移一个位置，并发回确认帧，若收到的数据帧落在接收窗口之外，则一律丢弃。</p>
</li>
<li><p>滑动窗口有以下重要特性：</p>
<ol start='' >
<li><p>只有接收窗口向前滑动 （同时接收方发送了确认帧）时，发送窗口才有可能（只有发送方收到确认帧后才一定） 向前滑动。</p>
</li>
<li><p>从滑动窗口的概念看，停止-等待协议、后退N帧协议和选择重传协议只在发送窗口大小与接收窗口大小上有所差别：</p>
<ol start='' >
<li>停止-等待协议：发送窗口=1，接受窗口=1</li>
<li>后退N帧协议：发送窗口&gt;1，接受窗口=1</li>
<li>选择重传协议：发送窗口&gt;1，接受窗口&gt;1</li>

</ol>
</li>
<li><p>接收窗口的大小为1时，可保证帧的有序接收。</p>
</li>
<li><p>数据链路层的滑动窗口协议中，窗口的大小在传输过程中是固定的(注意与第5章传输层的滑动窗口协议的区别）。</p>
</li>

</ol>
</li>
<li><p>滑动窗口机制可以解决流量控制和可靠传输两个问题。</p>
</li>

</ol>
</li>
<li><p>可靠传输机制：</p>
<ol start='' >
<li><p>数据链路层的可靠传输通常使用确认和超时重传两种机制来完成。</p>
</li>
<li><p>确认</p>
<ol start='' >
<li>确认是一种无数据的控制帧，这种控制帧使得接收方可以让发送方知道哪些内容被正确接收。</li>
<li>有些情况下为了提高传输效率，将确认捎带在一个回复帧中，称为捎带确认。</li>

</ol>
</li>
<li><p>超时重传</p>
<ol start='' >
<li>超时重传是指发送方在发送某个数据帧后就开启一个计时器，在一定时间内如果没有得到发送的数据帧的确认帧，那么就重新发送该数据帧，直到发送成功为止。</li>

</ol>
</li>

</ol>
</li>
<li><p>自动重传请求 (Automatic Repeat reQuest, ARQ）</p>
<ol start='' >
<li>通过接收方请求发送方重传出错的数据帧来恢复出错的帧，是通信中用于处理信道所带来差错的方法之一。</li>
<li>传统自动重传请求分为三种，即停止-等待 (Stop-and-Wait) ARQ、后退N帧(Go-Back-N) ARO 和选择性重传 (Selective Repeat)ARO。后两种协议是滑动窗口技术与请求重发技术的结合，由于窗口尺寸开到足够大时，帧在线路上可以连续地流动，因此又称其为连续 ARQ 协议。注意，在数据链路层中流量控制机制和可靠传输机制是交织在一起的。</li>

</ol>
</li>

</ol>
<h3 id='6）停止-等待协议'>（6）停止-等待协议</h3>
<ol start='' >
<li><p>停等协议中，源站发送单个帧后必须等待确认，目的站的应答到达之前不能发送新的帧。</p>
</li>
<li><p>可能出现的差错</p>
<ol start='' >
<li><p>数据帧丢失或出现帧出错</p>
<ol start='' >
<li>目的站点未收到数据帧，则不会发送确认信息。</li>
<li>目的站点根据差错检查技术发现出错以后，简单的丢弃这个数据帧并不发送确认信息。</li>
<li>源站设置一个计时器，当计时器满仍未收到确认信息后，则重新发送数据帧。</li>
<li>计时器的重传时间应当比帧传输的平均RTT更长一些。</li>

</ol>
</li>
<li><p>数据帧接受但是确认帧（ACK）丢失</p>
<ol start='' >
<li>目的站点发送的确认帧丢失，则源站回等待直到重新发送数据帧。</li>
<li>目的站点如果收到同样的数据，则会丢弃上个数据帧接受这一个，并重新发送确认帧。</li>

</ol>
</li>
<li><p>确认帧延迟</p>
<ol start='' >
<li>目的站点的确认帧延迟到达，源站会在时间超时后重新发送。</li>
<li>源站收到的之前的数据帧的延迟确认帧会直接忽略。</li>

</ol>
</li>

</ol>
</li>
<li><p>源站发送一个帧后必须保留副本，直到收到这个帧的确认帧后才能丢弃。</p>
</li>
<li><p>停等协议的信道利用率很低，性能差。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8A%E5%8D%8810.53.21.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 上午10.53.21"></p>
</li>

</ol>
<h3 id='7）后退n帧协议'>（7）后退N帧协议</h3>
<ol start='' >
<li><p>发送窗口：发送方维持一组连续的允许发送的帧的序号。</p>
</li>
<li><p>接受窗口：接收方维持一组连续的允许接受帧的序号。</p>
</li>
<li><p>发送方的窗口中的帧都可以发送，但是只有接收到接收方的确认信息才能移动窗口。</p>
</li>
<li><p>发送方的任务</p>
<ol start='' >
<li>上层的调用：上层要发送数据，发送方如果窗口未满则发送帧，否则提示上层等待或放入缓存。</li>
<li>收到ACK：GBN协议中，对n号帧的确认采用<strong>累计确认</strong>的方式，表明接收方已经收到n号帧和之前的所有帧。</li>
<li>超时事件：如果定时器超时，则后退n帧，重传所有未被确认的n个帧。</li>

</ol>
</li>
<li><p>接收方的任务</p>
<ol start='' >
<li>如果正确收到n号帧，并且按序，则发送一个ACK。</li>
<li>其余情况全部丢弃帧，并未最近按序接收的帧重新发送ACK。</li>

</ol>
</li>
<li><p><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8B%E5%8D%881.19.10.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 下午1.19.10"></p>
</li>
<li><p>滑动窗口长度：若采用n个比特对帧编号，那么发送窗口尺寸W应满足：1&lt;=W&lt;=2^n-1（帧的编号从0开始）。因此发送窗口尺寸过大，就是使得接收方无法区分新帧和旧帧。</p>
</li>
<li><p>重点总结</p>
<ol start='' >
<li>累计确认</li>
<li>接收方只按顺序接收帧，不按序则丢弃</li>
<li>接收方发送确认序列号最大的、按序到达的帧</li>
<li>发送窗口最大为2^n-1，接受窗口大小为1</li>

</ol>
</li>
<li><p>性能</p>
<ol start='' >
<li>因连续发送数据帧而提高了信道利用率</li>
<li>在重传时必须把原来已经传送的数据帧全部重传，降低了效率</li>

</ol>
</li>

</ol>
<h3 id='8）选择重传协议'>（8）选择重传协议</h3>
<ol start='' >
<li><p>滑动窗口： <img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8B%E5%8D%881.38.34.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 下午1.38.34"></p>
</li>
<li><p>发送方的任务</p>
<ol start='' >
<li>上层的调用</li>
<li>收到ACK：将收到ACK对应的帧标记为已接收，如果该帧时窗口左边界，则窗口向前移动到第一个未被确认的帧。</li>
<li>超时事件：每个帧都有定时器，一个超时事件后只重传一个帧。</li>

</ol>
</li>
<li><p>接收方的任务</p>
<ol start='' >
<li>接受所有帧，不论是否按序。</li>
<li>失序的帧放在缓存区，并返回一个确认帧。</li>
<li>直到所有帧都按序接收到再将这些帧按序交付上层，然后向前滑动窗口。</li>

</ol>
</li>
<li><p>流程：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8B%E5%8D%881.45.34.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 下午1.45.34"></p>
</li>
<li><p>窗口的长度：</p>
<ol start='' >
<li>发送窗口和接收窗口应相等。</li>
<li><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="37.185ex" height="2.452ex" role="img" focusable="false" viewBox="0 -833.9 16435.7 1083.9" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-8-TEX-I-1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path><path id="MJX-8-TEX-I-1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-8-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path><path id="MJX-8-TEX-I-1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path><path id="MJX-8-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-8-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-8-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-8-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-8-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-8-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-8-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D44A" xlink:href="#MJX-8-TEX-I-1D44A"></use></g><g data-mml-node="TeXAtom" transform="translate(977,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D45A" xlink:href="#MJX-8-TEX-I-1D45A"></use></g><g data-mml-node="mi" transform="translate(878,0)"><use data-c="1D44E" xlink:href="#MJX-8-TEX-I-1D44E"></use></g><g data-mml-node="mi" transform="translate(1407,0)"><use data-c="1D465" xlink:href="#MJX-8-TEX-I-1D465"></use></g></g></g><g data-mml-node="mo" transform="translate(2704.1,0)"><use data-c="3D" xlink:href="#MJX-8-TEX-N-3D"></use></g><g data-mml-node="mo" transform="translate(3759.9,0)"><use data-c="28" xlink:href="#MJX-8-TEX-N-28"></use></g><g data-mml-node="msup" transform="translate(4148.9,0)"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-8-TEX-N-32"></use></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D45B" xlink:href="#MJX-8-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(600,0)"><use data-c="2212" xlink:href="#MJX-8-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(1378,0)"><use data-c="31" xlink:href="#MJX-8-TEX-N-31"></use></g></g></g><g data-mml-node="mo" transform="translate(6059.9,0)"><use data-c="29" xlink:href="#MJX-8-TEX-N-29"></use></g><g data-mml-node="mi" transform="translate(6448.9,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">，</text></g><g data-mml-node="mi" transform="translate(7327.6,0)"><use data-c="1D45B" xlink:href="#MJX-8-TEX-I-1D45B"></use></g><g data-mml-node="mtext" transform="translate(7927.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">表</text></g><g data-mml-node="mtext" transform="translate(8806.2,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">示</text></g><g data-mml-node="mtext" transform="translate(9684.9,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">用</text></g><g data-mml-node="mi" transform="translate(10563.6,0)"><use data-c="1D45B" xlink:href="#MJX-8-TEX-I-1D45B"></use></g><g data-mml-node="mtext" transform="translate(11163.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">比</text></g><g data-mml-node="mtext" transform="translate(12042.3,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">特</text></g><g data-mml-node="mtext" transform="translate(12921,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">来</text></g><g data-mml-node="mtext" transform="translate(13799.7,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">编</text></g><g data-mml-node="mtext" transform="translate(14678.4,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">号</text></g><g data-mml-node="mtext" transform="translate(15557.1,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">帧</text></g></g></g></svg></mjx-container><script type="math/tex">W_{max}=(2^{n-1})，n表示用n比特来编号帧</script>。</li>

</ol>
</li>
<li><p>重点：</p>
<ol start='' >
<li>对数据帧注意确认，接收一个确认一个</li>
<li>只重传出错帧</li>
<li>接收方有缓存</li>
<li><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="12.83ex" height="2.244ex" role="img" focusable="false" viewBox="0 -833.9 5670.9 991.7" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.357ex;"><defs><path id="MJX-9-TEX-I-1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path><path id="MJX-9-TEX-I-1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-9-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path><path id="MJX-9-TEX-I-1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path><path id="MJX-9-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-9-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-9-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-9-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-9-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D44A" xlink:href="#MJX-9-TEX-I-1D44A"></use></g><g data-mml-node="TeXAtom" transform="translate(977,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D45A" xlink:href="#MJX-9-TEX-I-1D45A"></use></g><g data-mml-node="mi" transform="translate(878,0)"><use data-c="1D44E" xlink:href="#MJX-9-TEX-I-1D44E"></use></g><g data-mml-node="mi" transform="translate(1407,0)"><use data-c="1D465" xlink:href="#MJX-9-TEX-I-1D465"></use></g></g></g><g data-mml-node="mo" transform="translate(2704.1,0)"><use data-c="3D" xlink:href="#MJX-9-TEX-N-3D"></use></g><g data-mml-node="msup" transform="translate(3759.9,0)"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-9-TEX-N-32"></use></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D45B" xlink:href="#MJX-9-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(600,0)"><use data-c="2212" xlink:href="#MJX-9-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(1378,0)"><use data-c="31" xlink:href="#MJX-9-TEX-N-31"></use></g></g></g></g></g></svg></mjx-container><script type="math/tex">W_{max}=2^{n-1}</script></li>

</ol>
</li>

</ol>
<p>&nbsp;</p>
<h2 id='三介质访问控制'>三、介质访问控制</h2>
<h3 id='1）介质访问控制的任务'>（1）介质访问控制的任务</h3>
<p>介质访问控制任务就是：为使用介质的每个结点隔离来自同一信道上其他结点所传送的信号，以协调活动结点的传输。即采取一定的措施，使得两对节点之间的通信不会互相干扰。</p>
<p>用来决定广播信道中信道分配的协议属于数据链路层的一个子层，称为介质访问控制 (Medium Access Control, MAC)子层。</p>
<h3 id='2）信道划分介质访问控制------静态划分信道'>（2）信道划分介质访问控制——静态划分信道</h3>
<ol start='' >
<li><p>信道划分介质访问控制：将使用介质的每个设备与来自同一信道上的其他设备的通信隔离开，把<strong>时域和频域资源</strong>合理地分配给网络上的设备。</p>
</li>
<li><p>多路复用技术</p>
<ol start='' >
<li>把多个信号组合在一条物理信道进行传播，使得多个计算机或终端设备共享信道资源，提高信道利用率。</li>
<li>把一条广播信道，逻辑上分成几条用于两个节点之间通信互不干扰的子信道，就是把广播信道转变为点对点信道。</li>
<li><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8B%E5%8D%882.00.51.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 下午2.00.51"></li>

</ol>
</li>
<li><p>频分多路复用FDM</p>
<ol start='' >
<li><p>将多路基带信号调制到不同频率载波上，再叠加形成一个复合信号的多路复用技术。</p>
</li>
<li><p>图示：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8B%E5%8D%882.01.39.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 下午2.01.39"></p>
</li>
<li><p>优点：</p>
<ol start='' >
<li>充分利用传输介质带宽，系统效率高。</li>
<li>技术成熟，实现简单。</li>

</ol>
</li>

</ol>
</li>
<li><p>时分多路复用TDM</p>
<ol start='' >
<li><p>将一条物理信道按时间分成若干时间片，轮流地分配给多个信号使用。</p>
</li>
<li><p>每个时间片只有一个信号占用。</p>
</li>
<li><p>图示：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8B%E5%8D%882.05.09.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 下午2.05.09"></p>
</li>
<li><p>改进——统计时分多路复用STDM</p>
<ol start='' >
<li>目的：提高信道的利用率。</li>
<li>采用STDM帧，并不固定分配时隙，而是按需分配，当终端有数据需要发送时才会分配到时间片。</li>
<li><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8B%E5%8D%882.33.47.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 下午2.33.47"></li>

</ol>
</li>

</ol>
</li>
<li><p>波分多路复用WDM</p>
<ol start='' >
<li>光的频分多路复用，在一根光纤中传输多种不同波长（频率）的光信号，由于波长不同，所以各路光信号互不干扰，最后再用波长分解复用器将各路波长分解出来。</li>
<li><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8B%E5%8D%882.36.47.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 下午2.36.47"></li>

</ol>
</li>
<li><p>码分多路复用CDM</p>
<ol start='' >
<li>采用不同的编码来区分各路原始信号的一种复用方式，即共享信道频率又共享时间。</li>
<li>也叫码分多路复用：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8B%E5%8D%882.41.26.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 下午2.41.26"></li>
<li>S和T分别是两个站点发送的码片序列，站点要发送比特1，就发送码片序列本身，发送0就发送码片序列的反码。</li>

</ol>
</li>
<li><p>信道利用率</p>
<ol start='' >
<li>信道的效率，也称信道利用率：指发送方在一个发送周期的时间内，有效地发送数据所需要的时间占整个发送周期的比率。</li>
<li>发送方从开始发送数据到收到第一个确认帧为止，称为一个发送周期，设为T，发送方在这个周期内共发送L比特的数据，发送方的数据传输速率为C，则发送方用于发送有效数据的时间为L/C，在这种情况下，信道的利用率为(L/C)/T。</li>
<li>信道吞吐率=信道利用率x发送方的发送速率。</li>

</ol>
</li>

</ol>
<h3 id='3）随机访问介质访问控制------动态分配信道'>（3）随机访问介质访问控制——动态分配信道</h3>
<ol start='' >
<li><p>在随机访问介质访问控制下，不用集中控制的方式解决发送信息的次序问题，而是直接让用户随机发送信息，占用信道全部速率。为了解决随即介入的碰撞，用户按照一定规则重复发送帧，知道帧成功发送。这些规则就是介质访问控制协议。</p>
</li>
<li><p>ALOHA协议</p>
<ol start='' >
<li><p>夏威夷大学早起研制的随机接入系统称为ALOHA，分为纯ALOHA协议和时隙ALOHA协议两种。</p>
</li>
<li><p>纯ALOHA协议</p>
<ol start='' >
<li>当任何站点要发送数据时，可以不监听信道，不按时间槽发送，随机重发</li>
<li>冲突检测：如果发生冲突，接收方就会检测差错并不予确认，发送方一段时间收不到就判断发生冲突。</li>
<li>冲突解决：超时后等待一<em>随机时间</em>再重传。</li>
<li><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8B%E5%8D%882.53.34.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 下午2.53.34"></li>
<li>纯ALOHA协议的吞吐量和信道利用率极低。</li>

</ol>
</li>
<li><p>时隙ALOHA协议</p>
<ol start='' >
<li>思想：把时间分成若干个相同的时时隙，所有用户在时隙开始时刻接入网络信道，并规定用户只能在每个时隙开始时才能发送帧。减少了数据冲突的概率，提高了信道的利用率。</li>
<li>碰撞后的重传手段和纯ALOHA协议一样。</li>

</ol>
</li>

</ol>
</li>
<li><p>CSMA协议</p>
<ol start='' >
<li><p>CS：载波监听</p>
</li>
<li><p>MA：多点接入</p>
</li>
<li><p>思想：发送帧之前监听信道。</p>
</li>
<li><p>CSMA协议是在ALOHA协议的基础上的改进，增加一个载波监听装置，每个站点发送数据之前要检测一下总线上是否有其他站点在发送数据。CSMA协议根据监听方式和监听到信道忙后的处理方式分为三种。</p>
</li>
<li><p>1-坚持CSMA</p>
<ol start='' >
<li><p>思想：</p>
<ol start='' >
<li>一个节点要发送数据时，首先监听信道，如果信道空闲，那么马上发送数据。</li>
<li>如果信道忙，那么等待并一直坚持监听信道至空闲。</li>
<li>如果发生冲突，随机等待一段时间后再开始监听。</li>

</ol>
</li>
<li><p>优点：只要信道空闲则马上发送，避免信道利用率损失。</p>
</li>
<li><p>缺点：假如有多个站点有数据要发送则冲突不可避免。</p>
</li>

</ol>
</li>
<li><p>非坚持CSMA</p>
<ol start='' >
<li><p>思想：</p>
<ol start='' >
<li>结点发送数据时先监听信道，如果信道空闲，那么马上发送数据。</li>
<li>如果信道忙，则等待一个随机时间后再进行监听。</li>

</ol>
</li>
<li><p>优点：采用随机的重发延迟时间可以减少冲突。</p>
</li>
<li><p>缺点：可能存在大家都在延迟等待的过程，信道就会处于空闲，降低利用率。</p>
</li>

</ol>
</li>
<li><p>p-坚持CSMA</p>
<ol start='' >
<li><p>思想：</p>
<ol start='' >
<li>适用于时分信道。</li>
<li>一个节点要发送数据时，首先监听信道，如果信道空闲，那么以概率p发送数据，以概率1-p推迟到下一个间隙，并在下一个间隙重复监听尝试。</li>
<li>如果信道忙，则到下一个间隙再进行监听。</li>

</ol>
</li>
<li><p>优点：既能减少冲突也能减少信道空闲时间。</p>
</li>
<li><p>缺点：发生冲突后还是要把数据帧发完，造成了浪费。</p>
</li>

</ol>
</li>
<li><p>对比：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8B%E5%8D%883.11.37.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 下午3.11.37"></p>
</li>

</ol>
</li>
<li><p>CSMA/CD协议</p>
<ol start='' >
<li><p>CS：载波监听，CSMA/CD协议的站点在<strong>发送数据之前</strong>和<strong>发送数据时</strong>都需要检测信道上是否有站点在发送数据。</p>
</li>
<li><p>CD：碰撞检测，“边发送边监听”，适配器边发送数据边检测信道上信号电压变化，以便判断其他站点是否在发送数据。</p>
</li>
<li><p>适用于总线型网络或半双工网络。</p>
</li>
<li><p>由于传播时延，因此某个时刻站点检测到信道空闲时，实际上此时信道未必是空闲的。</p>
</li>
<li><p>设<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="1.17ex" height="1.005ex" role="img" focusable="false" viewBox="0 -431 517 444" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.029ex;"><defs><path id="MJX-14-TEX-I-1D70F" d="M39 284Q18 284 18 294Q18 301 45 338T99 398Q134 425 164 429Q170 431 332 431Q492 431 497 429Q517 424 517 402Q517 388 508 376T485 360Q479 358 389 358T299 356Q298 355 283 274T251 109T233 20Q228 5 215 -4T186 -13Q153 -13 153 20V30L203 192Q214 228 227 272T248 336L254 357Q254 358 208 358Q206 358 197 358T183 359Q105 359 61 295Q56 287 53 286T39 284Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D70F" xlink:href="#MJX-14-TEX-I-1D70F"></use></g></g></g></svg></mjx-container><script type="math/tex">\tau</script>为单程传播时延。在t=0时，A发送数据，在t=<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="4.94ex" height="1.808ex" role="img" focusable="false" viewBox="0 -717 2183.4 799" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.186ex;"><defs><path id="MJX-11-TEX-I-1D70F" d="M39 284Q18 284 18 294Q18 301 45 338T99 398Q134 425 164 429Q170 431 332 431Q492 431 497 429Q517 424 517 402Q517 388 508 376T485 360Q479 358 389 358T299 356Q298 355 283 274T251 109T233 20Q228 5 215 -4T186 -13Q153 -13 153 20V30L203 192Q214 228 227 272T248 336L254 357Q254 358 208 358Q206 358 197 358T183 359Q105 359 61 295Q56 287 53 286T39 284Z"></path><path id="MJX-11-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-11-TEX-I-1D6FF" d="M195 609Q195 656 227 686T302 717Q319 716 351 709T407 697T433 690Q451 682 451 662Q451 644 438 628T403 612Q382 612 348 641T288 671T249 657T235 628Q235 584 334 463Q401 379 401 292Q401 169 340 80T205 -10H198Q127 -10 83 36T36 153Q36 286 151 382Q191 413 252 434Q252 435 245 449T230 481T214 521T201 566T195 609ZM112 130Q112 83 136 55T204 27Q233 27 256 51T291 111T309 178T316 232Q316 267 309 298T295 344T269 400L259 396Q215 381 183 342T137 256T118 179T112 130Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D70F" xlink:href="#MJX-11-TEX-I-1D70F"></use></g><g data-mml-node="mo" transform="translate(739.2,0)"><use data-c="2212" xlink:href="#MJX-11-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(1739.4,0)"><use data-c="1D6FF" xlink:href="#MJX-11-TEX-I-1D6FF"></use></g></g></g></svg></mjx-container><script type="math/tex">\tau-\delta</script>时，A 发送的数据还未到达B，由于B检测到信道空闲而发送数据。经过时间<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="3.267ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 1444 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-12-TEX-I-1D6FF" d="M195 609Q195 656 227 686T302 717Q319 716 351 709T407 697T433 690Q451 682 451 662Q451 644 438 628T403 612Q382 612 348 641T288 671T249 657T235 628Q235 584 334 463Q401 379 401 292Q401 169 340 80T205 -10H198Q127 -10 83 36T36 153Q36 286 151 382Q191 413 252 434Q252 435 245 449T230 481T214 521T201 566T195 609ZM112 130Q112 83 136 55T204 27Q233 27 256 51T291 111T309 178T316 232Q316 267 309 298T295 344T269 400L259 396Q215 381 183 342T137 256T118 179T112 130Z"></path><path id="MJX-12-TEX-N-2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path><path id="MJX-12-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D6FF" xlink:href="#MJX-12-TEX-I-1D6FF"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(444,0)"><g data-mml-node="mo"><use data-c="2F" xlink:href="#MJX-12-TEX-N-2F"></use></g></g><g data-mml-node="mn" transform="translate(944,0)"><use data-c="32" xlink:href="#MJX-12-TEX-N-32"></use></g></g></g></svg></mjx-container><script type="math/tex">\delta/2</script>后，即在t=<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="7.202ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3183.4 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-13-TEX-I-1D70F" d="M39 284Q18 284 18 294Q18 301 45 338T99 398Q134 425 164 429Q170 431 332 431Q492 431 497 429Q517 424 517 402Q517 388 508 376T485 360Q479 358 389 358T299 356Q298 355 283 274T251 109T233 20Q228 5 215 -4T186 -13Q153 -13 153 20V30L203 192Q214 228 227 272T248 336L254 357Q254 358 208 358Q206 358 197 358T183 359Q105 359 61 295Q56 287 53 286T39 284Z"></path><path id="MJX-13-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-13-TEX-I-1D6FF" d="M195 609Q195 656 227 686T302 717Q319 716 351 709T407 697T433 690Q451 682 451 662Q451 644 438 628T403 612Q382 612 348 641T288 671T249 657T235 628Q235 584 334 463Q401 379 401 292Q401 169 340 80T205 -10H198Q127 -10 83 36T36 153Q36 286 151 382Q191 413 252 434Q252 435 245 449T230 481T214 521T201 566T195 609ZM112 130Q112 83 136 55T204 27Q233 27 256 51T291 111T309 178T316 232Q316 267 309 298T295 344T269 400L259 396Q215 381 183 342T137 256T118 179T112 130Z"></path><path id="MJX-13-TEX-N-2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path><path id="MJX-13-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D70F" xlink:href="#MJX-13-TEX-I-1D70F"></use></g><g data-mml-node="mo" transform="translate(739.2,0)"><use data-c="2212" xlink:href="#MJX-13-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(1739.4,0)"><use data-c="1D6FF" xlink:href="#MJX-13-TEX-I-1D6FF"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(2183.4,0)"><g data-mml-node="mo"><use data-c="2F" xlink:href="#MJX-13-TEX-N-2F"></use></g></g><g data-mml-node="mn" transform="translate(2683.4,0)"><use data-c="32" xlink:href="#MJX-13-TEX-N-32"></use></g></g></g></svg></mjx-container><script type="math/tex">\tau-\delta/2</script>时，A 发送的数据和B发送的数据发生碰撞，但这时A和B都不知道。在t=<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="1.17ex" height="1.005ex" role="img" focusable="false" viewBox="0 -431 517 444" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.029ex;"><defs><path id="MJX-14-TEX-I-1D70F" d="M39 284Q18 284 18 294Q18 301 45 338T99 398Q134 425 164 429Q170 431 332 431Q492 431 497 429Q517 424 517 402Q517 388 508 376T485 360Q479 358 389 358T299 356Q298 355 283 274T251 109T233 20Q228 5 215 -4T186 -13Q153 -13 153 20V30L203 192Q214 228 227 272T248 336L254 357Q254 358 208 358Q206 358 197 358T183 359Q105 359 61 295Q56 287 53 286T39 284Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D70F" xlink:href="#MJX-14-TEX-I-1D70F"></use></g></g></g></svg></mjx-container><script type="math/tex">\tau</script>时，B检测到碰撞，于是停止发送数据。在t=<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="6.071ex" height="1.808ex" role="img" focusable="false" viewBox="0 -717 2683.4 799" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.186ex;"><defs><path id="MJX-15-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-15-TEX-I-1D70F" d="M39 284Q18 284 18 294Q18 301 45 338T99 398Q134 425 164 429Q170 431 332 431Q492 431 497 429Q517 424 517 402Q517 388 508 376T485 360Q479 358 389 358T299 356Q298 355 283 274T251 109T233 20Q228 5 215 -4T186 -13Q153 -13 153 20V30L203 192Q214 228 227 272T248 336L254 357Q254 358 208 358Q206 358 197 358T183 359Q105 359 61 295Q56 287 53 286T39 284Z"></path><path id="MJX-15-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-15-TEX-I-1D6FF" d="M195 609Q195 656 227 686T302 717Q319 716 351 709T407 697T433 690Q451 682 451 662Q451 644 438 628T403 612Q382 612 348 641T288 671T249 657T235 628Q235 584 334 463Q401 379 401 292Q401 169 340 80T205 -10H198Q127 -10 83 36T36 153Q36 286 151 382Q191 413 252 434Q252 435 245 449T230 481T214 521T201 566T195 609ZM112 130Q112 83 136 55T204 27Q233 27 256 51T291 111T309 178T316 232Q316 267 309 298T295 344T269 400L259 396Q215 381 183 342T137 256T118 179T112 130Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-15-TEX-N-32"></use></g><g data-mml-node="mi" transform="translate(500,0)"><use data-c="1D70F" xlink:href="#MJX-15-TEX-I-1D70F"></use></g><g data-mml-node="mo" transform="translate(1239.2,0)"><use data-c="2212" xlink:href="#MJX-15-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(2239.4,0)"><use data-c="1D6FF" xlink:href="#MJX-15-TEX-I-1D6FF"></use></g></g></g></svg></mjx-container><script type="math/tex">2\tau-\delta</script>时，A检测到碰撞，也停止发送数据。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-28%20%E4%B8%8B%E5%8D%883.29.16.png" referrerpolicy="no-referrer" alt="截屏2023-06-28 下午3.29.16">站A在发送帧后<em>至多经过时间<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.301ex" height="1.536ex" role="img" focusable="false" viewBox="0 -666 1017 679" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.029ex;"><defs><path id="MJX-19-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-19-TEX-I-1D70F" d="M39 284Q18 284 18 294Q18 301 45 338T99 398Q134 425 164 429Q170 431 332 431Q492 431 497 429Q517 424 517 402Q517 388 508 376T485 360Q479 358 389 358T299 356Q298 355 283 274T251 109T233 20Q228 5 215 -4T186 -13Q153 -13 153 20V30L203 192Q214 228 227 272T248 336L254 357Q254 358 208 358Q206 358 197 358T183 359Q105 359 61 295Q56 287 53 286T39 284Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-19-TEX-N-32"></use></g><g data-mml-node="mi" transform="translate(500,0)"><use data-c="1D70F" xlink:href="#MJX-19-TEX-I-1D70F"></use></g></g></g></svg></mjx-container><script type="math/tex">2\tau</script>（端到端传播时延的2倍）</em>就能知道所发送的帧有没有发生碰撞（当<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="7.099ex" height="1.672ex" role="img" focusable="false" viewBox="0 -717 3137.6 739" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.05ex;"><defs><path id="MJX-17-TEX-I-1D6FF" d="M195 609Q195 656 227 686T302 717Q319 716 351 709T407 697T433 690Q451 682 451 662Q451 644 438 628T403 612Q382 612 348 641T288 671T249 657T235 628Q235 584 334 463Q401 379 401 292Q401 169 340 80T205 -10H198Q127 -10 83 36T36 153Q36 286 151 382Q191 413 252 434Q252 435 245 449T230 481T214 521T201 566T195 609ZM112 130Q112 83 136 55T204 27Q233 27 256 51T291 111T309 178T316 232Q316 267 309 298T295 344T269 400L259 396Q215 381 183 342T137 256T118 179T112 130Z"></path><path id="MJX-17-TEX-N-27F6" d="M84 237T84 250T98 270H1444Q1328 357 1301 493Q1301 494 1301 496T1300 499Q1300 511 1317 511H1320Q1329 511 1332 510T1338 506T1341 497T1344 481T1352 456Q1374 389 1425 336T1544 261Q1553 258 1553 250Q1553 244 1548 241T1524 231T1486 212Q1445 186 1415 152T1370 85T1349 35T1341 4Q1339 -6 1336 -8T1320 -11Q1300 -11 1300 0Q1300 7 1305 25Q1337 151 1444 230H98Q84 237 84 250Z"></path><path id="MJX-17-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D6FF" xlink:href="#MJX-17-TEX-I-1D6FF"></use></g><g data-mml-node="mo" transform="translate(721.8,0)"><use data-c="27F6" xlink:href="#MJX-17-TEX-N-27F6"></use></g><g data-mml-node="mn" transform="translate(2637.6,0)"><use data-c="30" xlink:href="#MJX-17-TEX-N-30"></use></g></g></g></svg></mjx-container><script type="math/tex">\delta \longrightarrow 0</script>时)。因此把以太网端到端往返时间<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.301ex" height="1.536ex" role="img" focusable="false" viewBox="0 -666 1017 679" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.029ex;"><defs><path id="MJX-19-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-19-TEX-I-1D70F" d="M39 284Q18 284 18 294Q18 301 45 338T99 398Q134 425 164 429Q170 431 332 431Q492 431 497 429Q517 424 517 402Q517 388 508 376T485 360Q479 358 389 358T299 356Q298 355 283 274T251 109T233 20Q228 5 215 -4T186 -13Q153 -13 153 20V30L203 192Q214 228 227 272T248 336L254 357Q254 358 208 358Q206 358 197 358T183 359Q105 359 61 295Q56 287 53 286T39 284Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-19-TEX-N-32"></use></g><g data-mml-node="mi" transform="translate(500,0)"><use data-c="1D70F" xlink:href="#MJX-19-TEX-I-1D70F"></use></g></g></g></svg></mjx-container><script type="math/tex">2\tau</script>称为<strong>争用期</strong>（又称沖突窗口或碰撞窗口)。</p>
</li>
<li><p>每个站在自己发送数据之后的一小段时间内，存在发生碰撞的可能性，因此此时由于时延，有些站点可能检测到的信息时该站点发送数据之前的信息，会误以为信道空闲。只有经过争用期这段时间还未检测到碰撞时，才能确定这次发送不会发生碰撞。</p>
</li>
<li><p>最小帧长问题：</p>
<ol start='' >
<li>现考虑一种情况，某站点发送一个很短的帧，但在发送完毕之前并没有检测出碰撞。假定这个帧在继续向前传播到达目的站之前和别的站发送的帧发生了碰撞，因而目的站将收到有差错的帧(当然会把它丢弃)。可是发送站却不知道发生了碰撞，因而不会重传这个帧。</li>
<li>为了避免发生这种情况，以太网规定了一个最短帧长（争用期内可发送的数据长度）。</li>
<li>在争用期内如果检测到碰撞，站点就会停止发送，此时己发送出去的数据一定小于最短帧长，因此<em>凡长度小于这个最短帧长的帧都是由于冲突而异常中止的无效帧</em>。</li>
<li>最小帧长的计算公式为：最小帧长=总线传播时延x数据传输速率×2。</li>

</ol>
</li>
<li><p>CSMA/CD采用<strong>截断二进制指数规避算法</strong>解决碰撞问题</p>
<ol start='' >
<li><p>确定基本退避（推迟）时间为争用期<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.301ex" height="1.536ex" role="img" focusable="false" viewBox="0 -666 1017 679" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.029ex;"><defs><path id="MJX-19-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-19-TEX-I-1D70F" d="M39 284Q18 284 18 294Q18 301 45 338T99 398Q134 425 164 429Q170 431 332 431Q492 431 497 429Q517 424 517 402Q517 388 508 376T485 360Q479 358 389 358T299 356Q298 355 283 274T251 109T233 20Q228 5 215 -4T186 -13Q153 -13 153 20V30L203 192Q214 228 227 272T248 336L254 357Q254 358 208 358Q206 358 197 358T183 359Q105 359 61 295Q56 287 53 286T39 284Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-19-TEX-N-32"></use></g><g data-mml-node="mi" transform="translate(500,0)"><use data-c="1D70F" xlink:href="#MJX-19-TEX-I-1D70F"></use></g></g></g></svg></mjx-container><script type="math/tex">2\tau</script>。</p>
</li>
<li><p>定义参数k，一开始它等于重传次数，但k不超过10，即k=min[重传次数，10]。</p>
<ol start='' >
<li>当重传次数不超过10时，k等于重传次数。</li>
<li><strong>当重传次数大于10时，k就不再增大而一直等于10。</strong></li>

</ol>
</li>
<li><p>从离散的整数集合[0,1，.... ，2^k-1]中随机取出一个数r，重传所需要退避的时间就是<strong>r倍的基本退避时间</strong>，即
<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="3.321ex" height="1.536ex" role="img" focusable="false" viewBox="0 -666 1468 679" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.029ex;"><defs><path id="MJX-20-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-20-TEX-I-1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-20-TEX-I-1D70F" d="M39 284Q18 284 18 294Q18 301 45 338T99 398Q134 425 164 429Q170 431 332 431Q492 431 497 429Q517 424 517 402Q517 388 508 376T485 360Q479 358 389 358T299 356Q298 355 283 274T251 109T233 20Q228 5 215 -4T186 -13Q153 -13 153 20V30L203 192Q214 228 227 272T248 336L254 357Q254 358 208 358Q206 358 197 358T183 359Q105 359 61 295Q56 287 53 286T39 284Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-20-TEX-N-32"></use></g><g data-mml-node="mi" transform="translate(500,0)"><use data-c="1D45F" xlink:href="#MJX-20-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(951,0)"><use data-c="1D70F" xlink:href="#MJX-20-TEX-I-1D70F"></use></g></g></g></svg></mjx-container><script type="math/tex">2r\tau</script>。</p>
</li>
<li><p><strong>当重传达16次仍不能成功</strong>时，说明网络太拥挤，认为此帧永远无法正确发出，抛弃此帧并向高层报告出错。</p>
</li>

</ol>
</li>

</ol>
</li>
<li><p>CSMA/CA协议（408非重点）</p>
<ol start='' >
<li><p>为什么要用CSMA/CA：</p>
<ol start='' >
<li>无线局域网无法做到全面检测碰撞。</li>
<li>无线通信中并非所有站点都能监听其他站点，因此会存在“隐蔽站”问题。</li>

</ol>
</li>
<li><p>CA：碰撞避免</p>
</li>
<li><p>思想：</p>
<ol start='' >
<li>发送数据前，先检测信道是否空闲。</li>
<li>空闲则发出RTS（request to send），包括发送端地址、接受端地址、下一份数据将持续发送的时间等信息。</li>
<li>信道忙则等待。</li>
<li>接受端收到RTS后，将响应CST（clear to send）。接受端响应后不会响应其余站点发送的RTS。</li>
<li>发送端收到CTS后，开始发送数据帧，同时预约信道，告知其他站点需要传输数据的时间。</li>
<li>接受端收到数据帧后，检验数据正确后则相应ACK帧。</li>
<li>发送方收到ACK则发送下一个数据帧，否则一直重传直至规定重发次数为止。</li>
<li>采用二进制指数退避算法来确定随机的推迟时间。</li>

</ol>
</li>

</ol>
</li>
<li><p>CSMA/CD和CSMA/CA：</p>
<ol start='' >
<li><p>相同点：CSMA/CD 与CSMA/ CA机制都从属于 CSMA的思路，其核心是先听再说。换言之，两个在接入信道之前都须要进行监听。当发现信道空闲后，才能进行接入。</p>
</li>
<li><p>不同点：</p>
<ol start='' >
<li>传输介质不同：CSMA/CD 用于总线式以太网【有线】，而CSMA/ CA用于无线局域网【无线】。</li>
<li>载波检测方式不同：因传输介质不同，CSMA/CD与CSMA/ CA的检测方式也不同。CSMA/CD通过电缆中电压的变化来检测，当数据发生碰撞时，电缆中的电压就会随着发生变化；而CSMA/CA采用能量检测 (ED
载波检测（cs）和能量载波混合检测三种检测信道空闲的方式</li>
<li>CSMA/CD检测冲突，CSMA/CA避免冲突，二者出现冲突后都会进行有上限的重传。</li>

</ol>
</li>

</ol>
</li>

</ol>
<h3 id='4）轮询访问介质访问控制协议'>（4）轮询访问介质访问控制协议</h3>
<ol start='' >
<li><p>在轮询访问中，用户不能随机地发送信息，而要通过一个集中控制的监控站，以循环方式轮询每个结点，再决定信道的分配。当某结点使用信道时，其他结点都不能使用信道。</p>
</li>
<li><p>问题：轮询开销；等待延迟；单点故障</p>
</li>
<li><p>典型的轮询访问介质访问控制协议是令牌传递协议，它主要用在令牌环局域网中。</p>
</li>
<li><p>令牌传递协议</p>
<ol start='' >
<li><p>在会牌传递协议中，一个令牌（Token）沿着环形总线在各结点计算机间依次传递。</p>
</li>
<li><p>令牌：一个特殊的 MAC 控制帧，令牌本身并不包含信息，仅控制信道的使用，确保同一时刻只有一个站点独占信道。</p>
</li>
<li><p>当环上的一个站点希望传送帧时，必须等待令牌。一旦收到令牌，站点便可启动发送帧。帧中包括目的站点地址，以标识哪个站点应接收此帧。</p>
</li>
<li><p>站点只有取得令牌后才能发送数据帧，因此令牌环网不会发生碰撞。</p>
</li>
<li><p>站点在发送完一帧后，应释放令牌，以便让其他站使用。</p>
</li>
<li><p>由于令牌在网环上是按顺序依次传递的，因此对所有入网计算机而言，访问权是公平的。</p>
</li>
<li><p>需要发送数据的计算机只有在拿到该令牌后才能发送数据帧，因此不会发送冲突（因为令牌只有一个)。</p>
</li>
<li><p>过程：</p>
<ol start='' >
<li>网络空闲时，环路中只有令牌帧在循环传递。</li>
<li>令牌传递到有数据要发送的站点时，该站点就修改令牌中的一个标志位，并在令牌中附加自己需要传输的数据，将令牌变成一个数据帧，然后将这个数据帧发送出去。</li>
<li>数据帧沿着环路传输，接收到的站点一边转发数据，一边查看帧的目的地址。如果目的地址和自己的地址相同，那么接收站就复制该数据帧以便进一步处理。</li>
<li>数据帧沿着环路传输，直到到达该帧的源站点，源站点收到自己发出去的帧后便不再转发。同时，通过检验返回的帧来查看数据传输过程中是否出错，若有错则重传。</li>
<li>源站点传送完数据后，重新产生一个令牌，并传递给下一站点，以交出信道控制权。</li>
<li>会设置最长时间，如果取得令牌的站点需要发送的数据过大，则只能发送限定时间，剩余的数据需要等待下次取得令牌发送，即每个站点只能持有令牌一段时间。</li>

</ol>
</li>
<li><p>优势：非常适合负载较重、通信量大的网络中。</p>
</li>
<li><p>问题：令牌开销；等待延迟；单点故障</p>
</li>

</ol>
</li>

</ol>
<p>&nbsp;</p>
<h2 id='四局域网'>四、局域网</h2>
<h3 id='1）基本概念和体系结构'>（1）基本概念和体系结构</h3>
<ol start='' >
<li><p>局域网（LAN，Local Area Network）：指在某一区域内由多台计算机互连成的计算机组，使用<em>广播信道</em>。</p>
</li>
<li><p>特点</p>
<ol start='' >
<li>覆盖的地理范围较小，只在一个相对独立的局部范围内联，如一座或集中的建筑群内。</li>
<li>使用专门铺设的传输介质进行联网，数据传输率高（10Mb/s～10Gb/s）。</li>
<li>通信延迟时间短，误码率低，可靠性高。</li>
<li>各站点为平等关系，共享传输信道。</li>
<li>多采用分布式控制和广播式通信，能进行广播和组播。</li>

</ol>
</li>
<li><p>决定局域网的主要要素：网络拓扑、传输介质、介质访问控制方法。</p>
</li>
<li><p>拓扑结构</p>
<ol start='' >
<li><p>星型拓扑<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-30%20%E4%B8%8A%E5%8D%889.39.10.png" referrerpolicy="no-referrer" alt="截屏2023-06-30 上午9.39.10"></p>
<ol start='' >
<li>中心节点是控制中心，任意两个节点间的通信最多只需两步，传输速度快，网络构型简单、建网容易、便于控制和管理。</li>
<li>但是星型拓扑网络可靠性差，网络共享能力差，有单点故障问题。</li>

</ol>
</li>
<li><p>总线型拓扑<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-30%20%E4%B8%8A%E5%8D%889.37.41.png" referrerpolicy="no-referrer" alt="截屏2023-06-30 上午9.37.41"></p>
<ol start='' >
<li>网络可靠性高、网络节点间响应速度快、共享资源能力强、设备投入量少、成本低、安装使用方便。</li>
<li>当某个节点出现故障时，对整体网络的影响较小。</li>

</ol>
</li>
<li><p>环型拓扑<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-30%20%E4%B8%8A%E5%8D%889.38.42.png" referrerpolicy="no-referrer" alt="截屏2023-06-30 上午9.38.42"></p>
<ol start='' >
<li>系统中通信设备和线路比较节省，有单点故障问题。</li>
<li>由于环路是封闭的，所以不便于扩充，系统响应延时长。</li>
<li>信息传输效率较低。</li>

</ol>
</li>
<li><p>树型拓扑<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-30%20%E4%B8%8A%E5%8D%889.40.30.png" referrerpolicy="no-referrer" alt="截屏2023-06-30 上午9.40.30"></p>
<ol start='' >
<li>易于扩展，易于隔离故障，也容易有单点故障。</li>

</ol>
</li>

</ol>
</li>
<li><p>传输介质</p>
<ol start='' >
<li>有线局域网：双绞线、同轴电缆、光纤。</li>
<li>无线局域网：电磁波。</li>

</ol>
</li>
<li><p>介质访1问控制方法</p>
<ol start='' >
<li>CSMA/CD：常用总线型局域网，也用于树型网络。</li>
<li>令牌总线：常用总线型局域网，也用于树型网络。</li>
<li>令牌环：用于环型局域网，如令牌环网。</li>

</ol>
</li>
<li><p>分类</p>
<ol start='' >
<li><p>以太网</p>
<ol start='' >
<li>以太网是应用最为广泛的局域网，包括标准以太网（10Mbps）、快速以太网 （100Mbps）、千兆以太网 （1000 Mbps）和10G以太网，它们都符合IEEE802.3系列标准规范。</li>
<li>逻辑拓扑总线型，物理拓扑是星型或拓展星型。</li>
<li>使用CSMA/CD。</li>

</ol>
</li>
<li><p>令牌环网</p>
<ol start='' >
<li>物理上采用了星形拓扑结构，逻辑上是环形拓扑结构。</li>
<li>己过时</li>

</ol>
</li>
<li><p>FDDI网（Fiber Distriburted Data Interface）</p>
<ol start='' >
<li>物理上采用了双环拓扑结构，逻辑上是环形拓扑结构。</li>

</ol>
</li>
<li><p>ATM网（Asynchronous Transfer Mode）</p>
<ol start='' >
<li>较新型的单元交换技术，使用53字节固定长度的单元进行交换。</li>

</ol>
</li>
<li><p>无线局域网（Wireless Local Area Netwrorks WLAN）</p>
<ol start='' >
<li>采用IEEE 802.11标准。</li>
<li>WiFi就是无线局域网的一种应用。</li>

</ol>
</li>

</ol>
</li>

</ol>
<h3 id='2）ieee-802标准'>（2）IEEE 802标准</h3>
<ol start='' >
<li><p>IEEE 802：IEEE 802系列标准是IEEE 802 LAN/MAN 标准委员会制定的局域网、城域网技术标准（1980年2月成立）。其中最广泛使用的有以太网、令牌环、无线局域网等。这一系列标准中的每一个子标准都由委员会中的专门工作组负责。</p>
</li>
<li><p>IEEE 802现有标准：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-30%20%E4%B8%8A%E5%8D%889.51.48.png" referrerpolicy="no-referrer" alt="截屏2023-06-30 上午9.51.48"></p>
</li>
<li><p>IEEE 802标准所描述的局域网参考模型只对应OSI参考模型的数据链路层与物理层，它将数据链路层划分为逻辑链路层LLC子层和介质访问控制MAC子层。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-30%20%E4%B8%8A%E5%8D%889.54.50.png" referrerpolicy="no-referrer" alt="截屏2023-06-30 上午9.54.50"></p>
<ol start='' >
<li>LLC负责识别网络层协议，然后对它们进行封装。LLC报头告诉数据链路层一旦帧被接收到时，应当对数据包做何处理。为网络层提供服务：无确认无连接、面向连接、带确认无连接、高速传送。</li>
<li>MAC子层的主要功能包括数据帧的封装/卸装，帧的寻址和识别，帧的接收与发送，链路的管理，帧的差错控制等。MAC子层的存在屏蔽了不同物理链路种类的差异性。</li>

</ol>
</li>

</ol>
<p>&nbsp;</p>
<h2 id='五以太网'>五、以太网</h2>
<h3 id='1）概述-1'>（1）概述</h3>
<ol start='' >
<li><p>以太网(Ethernet)指的是由Xerox公司创建并由Xerox、Intel和DEC公司联合开发的基带总线局域网规范，是当今现有局域网采用的最通用的通信协议标准。以太网络使用CSMA/CD（载波监听多路访问及冲突检测）技术。</p>
</li>
<li><p>以太网在局域网各种技术中占统治性地位：</p>
<ol start='' >
<li>造价低廉（以太网网卡不到100块）。</li>
<li>是应用最广泛的局域网技术。</li>
<li>比令牌环网、ATM网便宜，简单。</li>
<li>满足网络速率要求：10Mb/s~10Gb/s。</li>

</ol>
</li>
<li><p>以太网两个标准</p>
<ol start='' >
<li>DIX Ethernet V2：第一个局域网产品（以太网）规约。</li>
<li>IEEE 802.3：IEEE 802委员会802.3工作组制定的第一个IEEE的以太网标准。</li>

</ol>
</li>
<li><p>以太网采用两项措施以简化通信</p>
<ol start='' >
<li>采用<strong>无连接</strong>的工作方式，不对发送的数据帧编号，也不要求接收方发送确认，即以太网尽最大努力交付数据，提供的是<strong>不可靠服务</strong>，对于差错的纠正则
由高层完成。</li>
<li>发送的数据都使用曼彻斯特编码的信号，每个码元的中间出现一次电压转换，接收端利用这种电压转换方便地把位同步信号提取出来。</li>

</ol>
</li>

</ol>
<h3 id='2）以太网传输介质和网卡'>（2）以太网传输介质和网卡</h3>
<ol start='' >
<li><p>以太网传输介质和适用情况<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-30%20%E4%B8%8A%E5%8D%8810.02.03.png" referrerpolicy="no-referrer" alt="截屏2023-06-30 上午10.02.03"></p>
</li>
<li><p>物理拓扑</p>
<ol start='' >
<li>总线型 -&gt; 星型。</li>
<li>使用集线器的以太网在逻辑上仍是一个总线网，各站共享逻辑上的总线，使用的还是CSMA/CD协议。</li>
<li>以太网拓扑：逻辑上总线型，物理上星型。</li>

</ol>
</li>
<li><p>10BASE-T以太网<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-30%20%E4%B8%8A%E5%8D%8810.06.17.png" referrerpolicy="no-referrer" alt="截屏2023-06-30 上午10.06.17"></p>
</li>
<li><p>网卡<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-30%20%E4%B8%8A%E5%8D%8810.09.03.png" referrerpolicy="no-referrer" alt="截屏2023-06-30 上午10.09.03"></p>
</li>

</ol>
<h3 id='3）以太网mac帧'>（3）以太网MAC帧</h3>
<ol start='' >
<li><p>MAC地址也称物理地址，MAC地址长6字节，一般用由连字符/冒号分隔的12个十六进制数表示，如 02-60-8c-e4-b1-21。</p>
</li>
<li><p>由于总线上使用的是广播通信，因此网卡从网络上每收到一MAC帧，首先要用硬件检查MAC 帧中的 MAC 地址。如果是发往本站的帧，那么就收下，否则丢弃。</p>
</li>
<li><p>以太网MAC帧格式有两种标准：DIX Ethernet v2 标准（即以太网V2标准）和IEEE 802.3标准。</p>
</li>
<li><p>以太网V2标准<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-30%20%E4%B8%8A%E5%8D%8810.16.05.png" referrerpolicy="no-referrer" alt="截屏2023-06-30 上午10.16.05"></p>
<ol start='' >
<li>前导码：使接收端与发送端时钟同步。在帧前面插入的8B可再分为两个字段：第一个字段共7B，是前同步码，用来快速实现 MAC 帧的比特同步；第二个字段是帧开始定界符，表示后面的信息就是MAC帧。</li>
<li>地址：通常使用6B（48bit）地址 （MAC地址）。</li>
<li>类型：2B，指出数据域中携带的数据应交给哪个协议实体处理。</li>
<li>数据：46~1500B，包含高层的协议消息（CSMA/CD协议要求帧最少64B，其余数据已有18B，故数据部分最少46B）。</li>
<li>校验码(FCS)：4字节，校验范围从目的地址段到数据段的末尾，算法采用 32 位CRC（不但需要检验MAC 帧的数据部分，还要检验目的地址、源地址和类型字段，但不校验前导码）。</li>
<li>MAC帧并不需要帧结束符，因为以太网在传送帧时，各帧之问必须有一定的间隙。因此，接收端只要找到帧开始定界符，其后面连续到达的比特流就都属于同一个MAC 帧，所以只有帧开始定界符。以太网MAC帧仍旧需要尾部，在数据链路层上，帧既要加首部，也要加尾部。</li>

</ol>
</li>
<li><p>802.3帧格式与DIX以太帧格式的不同之处在于用长度域替代了DIX帧中的类型域，指出数据域的长度。在实践中，前述长度/类型两种机制可以并存，由于IEEE 802.3数据段的最大字节数是1500，所以长度段的最大值是1500，因此从1501到65535 的值可用于类型段标识符。</p>
</li>

</ol>
<h3 id='4）高速以太网'>（4）高速以太网</h3>
<ol start='' >
<li><p>速率&gt;=100Mb/s的以太网称为高速以太网。</p>
</li>
<li><p>100BASE-T以太网</p>
<ol start='' >
<li><p>在双绞线上传送100Mb/s基带信号的星形拓扑结构以太网，使用CSMA/CD协议。</p>
</li>
<li><p>支持全双工方式和半双工方式，可在全双工方式下工作而无冲突发生。</p>
</li>
<li><p>吉比特以太网</p>
<ol start='' >
<li>又称千兆以太网，在光纤或双绞线上传输1Gb/s信号。</li>
<li>支持全双工和半双工两种方式工作，可在全双工方式下工作而无冲突发生。</li>

</ol>
</li>
<li><p>10吉比特以太网</p>
<ol start='' >
<li>在光纤上传送10Gb/s信号。</li>

</ol>
</li>

</ol>
</li>

</ol>
<p>&nbsp;</p>
<h2 id='六ieee-80211无线局域网'>六、IEEE 802.11无线局域网</h2>
<h3 id='1）无线局域网的分类'>（1）无线局域网的分类</h3>
<ol start='' >
<li><p>无线局域网分为有固定基础设施无线局域网和无固定基础设施的移动自组织网络。</p>
</li>
<li><p>有固定基础设施无线局域网</p>
<ol start='' >
<li>对于有固定基础设施的无线局域网，IEEE制定了无线局域网的802.11系列协议标准，包802.11a/b/g/n 等。802.11使用星形拓扑，<strong>其中心称为接入（Access Point, AP）</strong>，在MAC 层使用CSMA/CA 协议。</li>
<li>使用802.11系列协议的局域网又称 Wi-Fi。</li>
<li>802.11标准规定无线局域网的最小构件是基本服务集BSS（Basic Service Set）。</li>
<li>一个基本服务集包括一个接入点和若干移动站。各站在本BSS内之间的通信，或与本BSS外部站的通信，都必须通过本BSS的AP。AP 就是基本服务集中的基站 (base station）。</li>
<li>一个基本服务集可以是孤立的，也可通过 AP 连接到一个分配系统DS（Distribution System），然后再连接到另一个基本服务集，就构成了一个护展的服务集 （Extended Service Set, ESS）。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-30%20%E4%B8%8B%E5%8D%882.05.19.png" referrerpolicy="no-referrer" alt="截屏2023-06-30 下午2.05.19"></li>

</ol>
</li>
<li><p>无固定基础设施的移动自组织网络</p>
<ol start='' >
<li>又称自组网络（ad hoc network）。自组网络没有上述基本服务集中的 AP，而是由一些平等状态的移动站相互通信组成的临时网络。各结点之间地位平等，中间结点都为转发结点，因此都具有路由器的功能。</li>
<li><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-30%20%E4%B8%8B%E5%8D%882.06.25.png" referrerpolicy="no-referrer" alt="截屏2023-06-30 下午2.06.25"></li>

</ol>
</li>

</ol>
<h3 id='2）mac帧'>（2）MAC帧</h3>
<ol start='' >
<li><p>802.11帧分为数据帧、控制帧和管理帧三部分。</p>
</li>
<li><p>数据帧<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-30%20%E4%B8%8B%E5%8D%881.47.40.png" referrerpolicy="no-referrer" alt="截屏2023-06-30 下午1.47.40"></p>
<ol start='' >
<li>MAC首部：共30字节（帧的复杂性都在MAC首部）。</li>
<li>帧主体：帧的数据部分，不超过2312字节（比以太网的帧大很多）。</li>
<li>MAC尾部：帧检验序列FCS，共4字节。</li>
<li>这里地址1、2、3会在转发过程中不断变化，这3个地址分别代表什么依赖于去往AP和来自AP：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-30%20%E4%B8%8B%E5%8D%881.57.41.png" referrerpolicy="no-referrer" alt="截屏2023-06-30 下午1.57.41"></li>

</ol>
</li>

</ol>
<h2 id='七vlan'>七、VLAN</h2>
<ol start='' >
<li><p>传统局域网的局限：</p>
<ol start='' >
<li>缺乏流量隔离：广播流量会跨越整个机构网络。</li>
<li>管理用户不便</li>
<li>路由器成本高</li>

</ol>
</li>
<li><p>VLAN：虚拟局域网（Virtual LAN）是一种将局域网内的设备划分成与物理位置无关的逻辑组的技术，这些逻辑组有某些共同的需求，每个VLAN是一个单独的广播域/不同的子网。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-30%20%E4%B8%8B%E5%8D%882.10.10.png" referrerpolicy="no-referrer" alt="截屏2023-06-30 下午2.10.10"></p>
</li>
<li><p>VLAN实现</p>
<ol start='' >
<li>虚拟网络是<strong>通过软件的方式</strong>在<strong>交换机</strong>上建立的。</li>
<li>同一个VLAN的设备之间通信可以通过交换机直接通信，通信方式有通过端口和MAC地址两种。</li>
<li>交换机上不同的VLAN之间互不相同，实现通信需要借助路由器和三层交换机实现。</li>
<li>VLAN可以跨越交换机构建，不同交换机、同一VLAN的设备交互需要经过交换机的交换。</li>

</ol>
</li>
<li><p>802.1Q帧</p>
<ol start='' >
<li>802.1Q帧是在原本的以太网帧上插入一个VLAN标签。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-30%20%E4%B8%8B%E5%8D%882.24.45.png" referrerpolicy="no-referrer" alt="截屏2023-06-30 下午2.24.45"></li>
<li>VLAN标签的前2个字节表明是IEEE 802.1Q帧，接下来4位无意义，后面12位是VLAN标识符VID，唯一表示了该以太网帧属于哪个VLAN。</li>
<li>VID取值范围为0～4095，但0和4095不用来表示VLAN，所以有效取值范围为1～4094。</li>
<li>IEEE 802.1Q帧是由交换机处理而不是主机处理的，主机和交换机之间交互的都是标准以太网帧。同一个交换机之间传递帧不需要加入Q帧，直接向其他交换机传递帧才需要加入Q帧。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-06-30%20%E4%B8%8B%E5%8D%882.28.38.png" referrerpolicy="no-referrer" alt="截屏2023-06-30 下午2.28.38"></li>

</ol>
</li>

</ol>
<p>&nbsp;</p>
<h2 id='八广域网'>八、广域网</h2>
<h3 id='1）基本概念'>（1）基本概念</h3>
<ol start='' >
<li>广域网：指<strong>覆盖范围很广的长距离网络</strong>，所覆盖范围从几十公里到几千公里，能连接过个城市和国家或跨越大洲并提供远距离通信，形成国际性的远程网络。</li>
<li>广域网的通信子网主要是用分组交换技术，广域网将分布在不同地区的局域网或计算机系统连接起来，达到资源共享的目的，如因特网就是最大的广域网。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-01%20%E4%B8%8A%E5%8D%888.56.31.png" referrerpolicy="no-referrer" alt="截屏2023-07-01 上午8.56.31"></li>

</ol>
<h3 id='2）广域网协议'>（2）广域网协议</h3>
<ol start='' >
<li><p>PPP协议</p>
<ol start='' >
<li><p>点对点协议（Point-to-Point Protocol）是目前使用最广泛的数据链路层协议，拨号电话上网就是PPP协议。</p>
</li>
<li><p>PPP协议的组成</p>
<ol start='' >
<li>链路控制协议（LCP）：扩展链路控制协议，用于建立、配置、测试和管理数据链路。</li>
<li>网络控制协议（NCP）：PPP允许多种网络层协议，每个不同的协议都要一个对应的NCP配置，为网络层协议建立和配置逻辑连接。</li>
<li>一个将IP数据报封装到串行链路的方法。</li>

</ol>
</li>
<li><p>PPP协议的状态图<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-01%20%E4%B8%8A%E5%8D%889.03.47.png" referrerpolicy="no-referrer" alt="截屏2023-07-01 上午9.03.47"></p>
</li>
<li><p>帧格式<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-01%20%E4%B8%8A%E5%8D%889.04.43.png" referrerpolicy="no-referrer" alt="截屏2023-07-01 上午9.04.43"></p>
<ol start='' >
<li>控制转义字符为7D，若标志字符出现在信息字段中，必须做字节填充。</li>
<li>PPP是面向字节的。</li>
<li>协议段占2字节，说明信息段运载的是什么种类的分组。</li>
<li>信息段大小为0～1500B。</li>

</ol>
</li>
<li><p>PPP协议的特点</p>
<ol start='' >
<li>简单</li>
<li>封装成帧</li>
<li>透明性</li>
<li>多种网络层协议</li>
<li>多种类型链路</li>
<li>差错检测</li>
<li>检测连接状态</li>
<li>最大传送单元</li>
<li>网络层地址协商</li>
<li>数据压缩协商</li>

</ol>
</li>

</ol>
</li>
<li><p>HDLC协议（408不考，谢希仁的计网也没有这个，略过）</p>
</li>

</ol>
<p>&nbsp;</p>
<h2 id='九链路层设备'>九、链路层设备</h2>
<h3 id='1）物理层扩展以太网'>（1）物理层扩展以太网</h3>
<ol start='' >
<li>由于以太网上的主机距离不能超过100m，否则信号就会衰减到无法使用，因此需要引入扩展手段实现扩展以太网。</li>
<li>光纤扩展：扩展主机和集线器之间距离的一种简单方法就是使用光纤和一对光纤调解器。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-01%20%E4%B8%8A%E5%8D%889.18.47.png" referrerpolicy="no-referrer" alt="截屏2023-07-01 上午9.18.47"></li>
<li>多层集线器：使用多个集线器就可以连接覆盖成更大范围的多级星型结构的以太网。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-01%20%E4%B8%8A%E5%8D%889.29.49.png" referrerpolicy="no-referrer" alt="截屏2023-07-01 上午9.29.49"><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-01%20%E4%B8%8A%E5%8D%889.22.16.png" referrerpolicy="no-referrer" alt="截屏2023-07-01 上午9.22.16"></li>

</ol>
<h3 id='2）链路层扩展以太网'>（2）链路层扩展以太网</h3>
<ol start='' >
<li><p>网桥<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-01%20%E4%B8%8A%E5%8D%889.29.23.png" referrerpolicy="no-referrer" alt="截屏2023-07-01 上午9.29.23"></p>
<ol start='' >
<li><p>网桥根据MAC帧的目的地址对帧进行转发和过滤。当网桥收到一个帧时，先检查帧的目的MAC地址在确定转发到哪个接口或直接丢弃（即过滤），而不是直接广播。</p>
</li>
<li><p>网段：一般指一个计算机网络中使用同一物理层设备能够直接通信的那一部分。</p>
</li>
<li><p>优点</p>
<ol start='' >
<li>过滤通信量，增大吞吐量。</li>
<li>扩大了物理范围。</li>
<li>提高了可靠性。</li>
<li>可互连不同物理层、不同MAC子层和不同速率的以太网。</li>

</ol>
</li>
<li><p>网桥分类</p>
<ol start='' >
<li><p>透明网桥：“透明”指以太网上的站点并不知道所发送的帧将经过哪几个网桥，是一种即插即用的设备。</p>
</li>
<li><p>源路由网桥：</p>
<ol start='' >
<li>在发送帧时，发详细的最佳路由信息放在帧首部。</li>
<li>源站以广播的方式向欲通信的目的站发送一个发现帧。</li>

</ol>
</li>

</ol>
</li>

</ol>
</li>
<li><p>以太网交换机</p>
<ol start='' >
<li><p>以太网交换机实际上就是一个多接口的网桥，通常都有十几个或更多的接口，和工作在物理层的转发器、集线器有很大的差别。以太网交换机的每个接口都直接与一个单台主机或另一个以太网交换机相连，并且一般都工作在全双工方式。</p>
</li>
<li><p>以太网交换机还具有并行性，即能同时连通多对接口，使多对主机能同时通信（而网桥只能一次分析和转发一个帧）。相互通信的主机都是<strong>独占传输媒体</strong>，无碰撞地传输数据。</p>
</li>
<li><p>交换方式</p>
<ol start='' >
<li>直通式交换机：查询目的地址直接转发，延迟小，可靠性低，无法支持不同速率的端口交换。</li>
<li>存储转发式交换机：将帧放入高速缓存并检查是否正确，正确则转发否则丢弃。延迟大，可靠性高，可以支持不同速率的端口交换。</li>

</ol>
</li>

</ol>
</li>
<li><p>冲突域：在同一个冲突域中的每一个节点都能收到所有被发送的帧。简单的说就是同一时间内只能有一台设备发送信息的范围</p>
<p>广播域：网络中能接收任一设备发出的广播帧的所有设备的集合。简单的说如果站点发出一个广播信号，所有能接收收到这个信号的设备范围称为一个广播域。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-01%20%E4%B8%8A%E5%8D%889.55.43.png" referrerpolicy="no-referrer" alt="截屏2023-07-01 上午9.55.43"></p>
</li>

</ol>
<p>&nbsp;</p>
<h1 id='计网-04-网络层'>计网-04-网络层</h1>
<h2 id='一概述和功能'>一、概述和功能</h2>
<h3 id='1）概述-2'>（1）概述</h3>
<p>网络层主要任务是把分组从源端传到目的端，为分组交换网上的不同主机提供通信服务，网络层传输单位是数据报。</p>
<p>网络层的设计思路就是向上只提供简单灵活的、无连接的、尽最大努力交付的数据报服务。也就是说传输的分组可能出错、丢失、重复、失序或超时等，但是这能是的网络中的路由器尽量简单和价格低廉，是的网络成本大大降低，运行灵活，适应多种应用。</p>
<h3 id='2）功能'>（2）功能</h3>
<ol start='' >
<li><p>路由与转发</p>
<ol start='' >
<li>主要完成路由选择和分组转发。</li>
<li>路由选择：根据复杂的分布式算法，根据从相邻路由器所得到的网络拓扑的变化情况动态的改变所选择的路由。</li>
<li>分组转发：指路由器根据转发表将用户的IP数据报从合适的端口转发出去。</li>

</ol>
</li>
<li><p>异构网络互联</p>
<ol start='' >
<li>将两个以上的计算机网络通过一定方法和一些中间设备相互连接起来已构成更大的网络系统。</li>
<li>使用物理层设备扩展网络只是把一个网络变大了，从网络层的角度看并不是连接了不同的网络。</li>

</ol>
</li>
<li><p>拥塞控制</p>
<ol start='' >
<li><p>在通信子网中，因出现过量分组引起的网络性能下降的现象称为拥塞。</p>
</li>
<li><p>拥塞控制方法有</p>
<ol start='' >
<li>开环控制：在设计网络时事先将有关发生拥塞的因素考虑周到，使得网络在工作时不产生拥塞，是一种静态的预防方法。</li>
<li>闭环控制：事先不考虑有关发生拥塞的各种因素，实时监测那里发生拥塞然后调整网络运行来解决拥塞。</li>

</ol>
</li>

</ol>
</li>

</ol>
<p>&nbsp;</p>
<h2 id='二路由算法'>二、路由算法</h2>
<h3 id='1）静态路由和动态路由'>（1）静态路由和动态路由</h3>
<ol start='' >
<li><p>静态路由算法/非自适应路由算法</p>
<ol start='' >
<li>由网络管理员手工配置的路由信息。当网络的拓扑结构或链路的状态发生变化时，网络管理员需要手工去修改路由表中相关的静态路由信息。</li>
<li>不能及时适应网络状态的变化，对于简单的小型网络，可以采用静态路由。</li>

</ol>
</li>
<li><p>动态路由算法/自适应路由算法</p>
<ol start='' >
<li>指路由器上的路由表项是通过相互连接的路由器之间彼此交换信息，然后按照一定的算法优化出来的，而这些路由信息会在一定时间间隙里不断更新，以适应不断变化的网络，随时获得最优的寻路效果。</li>

</ol>
</li>
<li><p>静态路由算法的特点是简便和开销较小，在拓扑变化不大的小网络中运行效果很好。</p>
</li>
<li><p>动态路由算法能改善网络的性能并有助于流量控制；但算法复杂，会增加网络的负担，有时因对动态变化的反应太快而引起振荡，或反应太慢而影响网络路由的一致性，因此要仔细设计动态路由算法以发挥其优势。</p>
</li>

</ol>
<h3 id='2）距离-向量路由算法'>（2）距离-向量路由算法</h3>
<ol start='' >
<li><p>距离-向量路由算法，要求网络中的每一个路由器都维护从他自己到其他每一个目的网络的唯一最佳距离记录，是因特网的协议标准，最大优点是简单，最经典的是RIP算法。</p>
</li>
<li><p>距离：通常用跳数表示距离，即从源端口到目的端口所经过的路由器个数，经过一个路由器跳数+1。从一路由器到直接连接的网络距离为1。<strong>RIP允许一条路最多包含15个路由器，因此距离16表示网络不可到达</strong>。</p>
</li>
<li><p>RIP算法通过在路由器之间交换路由表实现距离向量</p>
<ol start='' >
<li>路由器仅和相邻路由器交换信息。</li>
<li>路由器交换信息是自己的路由表</li>
<li>路由器刚开始工作时只知道直接连接的网络的距离（为1）。</li>
<li>每个路由器也只和数目有限的相邻路由器交换并更新路由信息。</li>
<li>经过若干次更新后，所有路由器最终都会知道到达本系统下任何网络的最短距离和下一跳路由器地址。</li>

</ol>
</li>
<li><p>更新路由表原则</p>
<ol start='' >
<li>获知一条新的路由，在本节点的路由表中不存在，加入新的路由。</li>
<li>获知的路由中有到达某个目的地的路由，该路由比现有路由更短，则用新路由替换旧路由。</li>

</ol>
</li>

</ol>
<h3 id='3）链路状态路由算法'>（3）链路状态路由算法</h3>
<ol start='' >
<li>见后文OSPF协议</li>

</ol>
<h2 id='三ipv4'>三、IPv4</h2>
<h3 id='1）ipv4分组'>（1）IPv4分组</h3>
<ol start='' >
<li><p>IPv4是目前最普遍使用的版本，IP协议定义数据传输的最基本单元——IP分组及其确切的数据格式。</p>
</li>
<li><p>IP数据报<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-01%20%E4%B8%8A%E5%8D%8810.54.21.png" referrerpolicy="no-referrer" alt="截屏2023-07-01 上午10.54.21"></p>
<ol start='' >
<li>版本：指IP协议的版本，目前广泛使用的版本是4.</li>
<li>首部长度：占4位，<em>单位是4B</em>，即用4位表示0～60B的长度，最常用的是20B。</li>
<li>总长度：占16位，指首部和数据之和的长度，<em>单位是B</em>，因此数据报最长为65535B。</li>
<li>标识：占16位，标识字段表示分组的顺序，以能够正确重装成原来的数据报，同一数据报的分片用同一标识。</li>
<li>标志：占3位，最低位是MF，MF=1表示后续还有分片，MF=0表示最后一个分片。中间一位是DF，只有DF=0时才能分片。</li>
<li>片偏移：占13位，指出较长的分组在分片后某片在原分组中的相对位置。<em>片偏移以8B为单位</em>，除开最后一个片外所有片长度必须为8B的整数倍。</li>
<li>生存时间（TTL）：占8位，IP分组的保质期，经过一个路由器-1，变成0则丢弃。</li>
<li>协议：占8位，指出数据部分的协议。</li>
<li>首部检验和：占16位，只检验首部的。</li>
<li>源地址字段：占4B，标识发送方的IP地址。</li>
<li>目的地址字段：占4B，标识接收方的IP地址。</li>

</ol>
</li>
<li><p>IP数据报分片</p>
<ol start='' >
<li>一个数据链路层的数据报会有最大传送单元（MTU），因此IP数据报的大小可能会超过MTU，此时就需要将IP数据报分装到多个小的数据报中，这些较小的数据报就叫片。</li>
<li>IP数据报能否分片和MF、DF标识位相关，分片后在原数据的位置和片偏移相关。</li>
<li>如：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-01%20%E4%B8%8B%E5%8D%883.11.22.png" referrerpolicy="no-referrer" alt="截屏2023-07-01 下午3.11.22"></li>

</ol>
</li>

</ol>
<h3 id='2）ipv4地址'>（2）IPv4地址</h3>
<ol start='' >
<li><p>IP地址是连接到因特网上的每台主机或路由器都分配的一个32比特的全球唯一标识符，即IP地址。</p>
</li>
<li><p>分类的IP地址：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-01%20%E4%B8%8B%E5%8D%883.28.06.png" referrerpolicy="no-referrer" alt="截屏2023-07-01 下午3.28.06"></p>
</li>
<li><p>无论哪类IP地址都由网络号和主机号两部分组成，即IP地址::={&lt;网络号&gt;,&lt;主机号&gt;}。</p>
</li>
<li><p>特殊IP地址，不用做主机地址：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-01%20%E4%B8%8B%E5%8D%883.36.35.png" referrerpolicy="no-referrer" alt="截屏2023-07-01 下午3.36.35"></p>
</li>
<li><p>IP地址范围：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-01%20%E4%B8%8B%E5%8D%883.43.36.png" referrerpolicy="no-referrer" alt="截屏2023-07-01 下午3.43.36"></p>
</li>
<li><p>IP地址的特点</p>
<ol start='' >
<li><p>每个IP地址都由网络号和主机号两部分组成，因此IP地址是一种分等级的地址结构。分等级的好处是：</p>
<ol start='' >
<li>IP 地址管理机构在分配IP地址时只分配网络号，而主机号则由得到该类网络的单位自行分配，方便了IP地址的管理。</li>
<li>路由器仅根据目的主机所连接的网络号来转发分组（而不考虑目标主机号)，从而减小了路由表所占的存储空间。</li>

</ol>
</li>
<li><p>IP地址是标志一台主机（或路由器）和一条链路的接口。</p>
</li>
<li><p>用转发器或桥接器（网桥等）连接的若干LAN仍然是同一个网络（同一个广播域），因此该LAN中所有主机的IP地址的网络号必须相同，但主机号必须不同。</p>
</li>
<li><p>在IP地址中，所有分配到网络号的网络（无论是LAN 还是 WAN）都是平等的。</p>
</li>
<li><p>在同一个局域网上的主机或路由器的IP地址中的网络号必须是一样的。路由器总是具有两个或两个以上的IP地址，路由器的每个端口都有一个不同网络号的I地址。</p>
</li>

</ol>
</li>

</ol>
<h3 id='3）网络地址转换nat）'>（3）网络地址转换（NAT）</h3>
<ol start='' >
<li><p>网络地址转换（NAT）：指通过将专用网络地址转换为公用地址从而对外隐藏内部的IP地址。</p>
</li>
<li><p>NAT技术使得整个专用网只需要一个全球IP地址就可以与因特网连通，所以大大降低了IP地址的消耗。同时隐藏了内部的网络结构，从而降低了内部网络受到攻击的风险。</p>
</li>
<li><p>使用NAT需要在专用网连接到因特网的路由器上安装NAT软件，安装了NAT软件的路由器叫NAT路由器，它至少有一个有效的外部全球IP地址。</p>
</li>
<li><p>为了网络安全而划分出部分IP地址作为私有地址IP地址，私有地址只用于LAN，不用与WAN连接（因此私有IP地址不能直接用于Internet，必须通过网关转换），私有IP地址网段有：</p>
<ol start='' >
<li>A类：1个A类网段，即10.0.0.0～10.255.255.255。</li>
<li>B类：16个B类网段，即172.16.0.0～172.31.255.255。</li>
<li>C类：256个C类网段，即192.168.0.0～192.168.255.255。</li>

</ol>
</li>

</ol>
<h3 id='4）子网划分'>（4）子网划分</h3>
<ol start='' >
<li><p>两级IP地址的缺点</p>
<ol start='' >
<li>IP地址的空间利用率很低。</li>
<li>给每个物理网络分配一个网络号会使路由表太大而使网络性能变坏。</li>
<li>两级的IP地址不够灵活。</li>

</ol>
</li>
<li><p>从1985年起，在IP地址中增加一个“子网号字段”，使两级IP地址变成了3级IP地址，称为子网划分。</p>
</li>
<li><p>子网划分纯属单位内部的工作，对外仍旧表现为没划分的网络。</p>
</li>
<li><p>从主机号划分若干比特作为网段号，使得三级IP地址为{&lt;网络号&gt;，&lt;网段号&gt;，&lt;主机号&gt;}。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-01%20%E4%B8%8B%E5%8D%884.26.06.png" referrerpolicy="no-referrer" alt="截屏2023-07-01 下午4.26.06"></p>
</li>
<li><p>主机号不能全0全1，但是子网号可能可以为全0全1。</p>
</li>

</ol>
<h3 id='5）子网掩码'>（5）子网掩码</h3>
<ol start='' >
<li>为了告诉主机或路由器对一个A类、B类、C类网络进行了子网划分，使用子网掩码来表达对原网络中主机号的借位。</li>
<li>子网掩码是一个与IP地址相对应的、长32bit的二进制串，它由一串1和跟随的一串0组成。其中，1对应于IP地址中的网络号及子网号，而0对应于主机号。计算机只需将IP地址和其对
应的子网掩码逐位 “与”运算，就可得出相应子网的网络地址。</li>
<li>现在的因特网标准规定：所有的网络都必须使用子网掩码，如果一个网络未划分子网，那么就采用默认子网掩码。</li>
<li>A、B、C类地址的默认子网掩码分别为 255.0.0.0、255.255.0.0、255.255.255.0。</li>

</ol>
<h3 id='6）无分类编址cidr'>（6）无分类编址CIDR</h3>
<ol start='' >
<li><p>无分类域间路由选择CIDR是在变长子网掩码的基础上提出的一种消除传统A、B、C类网络划分，并可以在软件的支持下实现超网构造的一种IP地址的划分方法。</p>
</li>
<li><p>CIDR消除了传统的ABC类地址和子网的概念，引入“网络前缀”来代替子网，网络前缀的位数不是固定的，可以任意选取，IP::={&lt;网络前缀&gt;，&lt;主机号&gt;}。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-01%20%E4%B8%8B%E5%8D%885.33.13.png" referrerpolicy="no-referrer" alt="截屏2023-07-01 下午5.33.13"></p>
</li>
<li><p>CIDR虽然不使用子网，但是仍旧可以在分配到的CIDR地址块中划分子网，通过从主机号中再借用几位即可。CIDR也保留了子网掩码，仍旧通过和前n位全1的掩码取与计算。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-02%20%E4%B8%8A%E5%8D%888.32.22.png" referrerpolicy="no-referrer" alt="截屏2023-07-02 上午8.32.22"></p>
</li>
<li><p>超网</p>
<ol start='' >
<li>将多个子网聚合成一个较大的子网，叫构成超网，或路由聚合。</li>
<li>方法：将网络前缀缩短（所有网络地址取交集）</li>
<li>路由聚合使得路由表中的一个项目可以表示多个原始的传统地址，有利于减少路由器之间的信息交换，提高网络性能。</li>

</ol>
</li>
<li><p>最长前缀匹配：使用CIDR时，查找路由表可能得到几个匹配结果，应该选择有最长网络前缀的路由。前缀越长，地址快越小，路由越具体。</p>
</li>

</ol>
<h3 id='7）网络层分组转发'>（7）网络层分组转发</h3>
<ol start='' >
<li><p>分组到达路由器后，路由器根据目的IP地址的网络前缀来查找转发表，因此在转发表中每条路由需要包括：（目的网络，下一跳地址）。</p>
</li>
<li><p>转发表中可以有两种特殊路由</p>
<ol start='' >
<li>主机路由：对特定目的主机的IP地址专门指明路由，网络前缀是32位，这样子网掩码就没有意义了，但这个特殊的前缀可以用在转发表中。</li>
<li>默认路由：用特殊前缀0.0.0.0/0表示默认路由，全0编码和任何目的地址都可以匹配上，只要目的网络是其他网络则一律选择默认路由。</li>

</ol>
</li>
<li><p>路由器执行分组转发算法的步骤</p>
<ol start='' >
<li>从收到的IP分组的首部提取目的主机的IP地址D（即目的地址）。</li>
<li>若查找到特定主机路由（目的地址为D），就按照这条路由的下一跳转发分组；否则从转发表中的下一条（即按前缀长度的顺序）开始检查，执行步骤3。</li>
<li>将这一行的子网掩码与目的地址D进行按位与运算。若运算结果与本行的前缀匹配，则查找结束，按照“下一跳”指出的进行处理（或者直接交付本网络上的目的主机，或通过指定接口发送到下一跳路由器)。否则，若转发表还有下一行，则对下一行进行检查，重新执行步骤3；否则，执行步骤4。</li>
<li>若转发表中有一个默认路由，则把分组传送给默认路由；否则，报告转发分组出错。</li>

</ol>
</li>
<li><p><em>得到下一跳路由器的IP地址后，不是将该地址填入数据报，而是将IP地址换成MAC地址并放入MAC帧首部，然后根据MAC地址找到下一跳路由器。</em></p>
</li>

</ol>
<p>&nbsp;</p>
<h2 id='四arpdhcpicmp'>四、ARP、DHCP、ICMP</h2>
<h3 id='1）ip地址与mac地址'>（1）IP地址与MAC地址</h3>
<ol start='' >
<li>IP地址是网络层及以上的地址，MAC地址是数据链路层使用的地址，IP地址放在IP数据报的首部，MAC地址放在MAC帧的首部。数据链路层是看不到封装的MAC帧中的IP地址的。</li>
<li>IP网络不能直接广播MAC地址来完成跨网络的发送，因此在网络层和网络之间传递只能通过IP地址通信，而在一个LAN中，需要通过MAC地址来寻找目的主机。即在路由器之间转发使用IP地址，到达目标LAN中改用MAC地址以广播的方式寻址，这样可以提高路由选择的效率。</li>
<li>在路由器转发过程中，IP分组在每个路由器中都会被解封装和重新封装，MAC帧的首部会不断变化，这也决定了不能用MAC地址跨网络通信。</li>

</ol>
<h3 id='2）地址解析协议arp）'>（2）地址解析协议（ARP）</h3>
<ol start='' >
<li><p>在实际的网络链路上传输数据帧时最终必须使用MAC地址，因此需要ARP实现IP地址到MAC地址的映射。</p>
</li>
<li><p>每个主机都有一个ARP高速缓存，存放本局域网上个主机和路由器的IP地址到MAC地址的映射，称为ARP表，并通过ARP来维护这个表。</p>
</li>
<li><p>ARP使用过程：</p>
<ol start='' >
<li>检查ARP高速缓存，有对应表项则写入MAC帧。</li>
<li>没有则用目的MAC地址为FF-FF-FF-FF-FF-FF的帧封装并<strong>广播ARP请求分组</strong>，同一局域网中所有主机都能收到该请求。</li>
<li>目的主机收到请求后就会向源主机<strong>单播一个ARP响应分组</strong>，源主机收到后将此映射写入ARP缓存（10-20min更新一次）。</li>
<li>ARP解决同一局域网上的主机或路由器的IP地址和MAC地址的映射问题，如果目的主机和源主机不在同一个局域网上，那就要通过ARP找到本地局域网上的路由器的硬件地址，然后把分组转发到路由器让路由器转发给下一个网络。</li>

</ol>
</li>
<li><p>ARP的4种典型情况：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-02%20%E4%B8%8A%E5%8D%8810.05.59.png" referrerpolicy="no-referrer" alt="截屏2023-07-02 上午10.05.59"></p>
<ol start='' >
<li>发送方是主机H1，要把IP数据报发送到本网络上的另一台主机H2，H1在网1用ARP找到目的主机H2的硬件地址。</li>
<li>发送方是主机H1，要把IP数据报发送到另一个网络上的一台主机H3，H1用ARP找到与网1连接的路由器R1的硬件地址，剩下的工作由R1来完成。</li>
<li>发送方是路由器R1，要把IP数据报转发到与 R1连接的网2上的一台主机H3，R1在网2用 ARP找到目的主机H3的硬件地址。</li>
<li>发送方是路由器R1，要把IP数据报转发到网3上的一台主机H4。这时R1在网2用ARP找到与网2连接的路由器R2的硬件地址，剩下的工作由R2来完成。</li>

</ol>
</li>
<li><p>从IP地址到MAC地址的解析是自动进行的，主机的用户并不知道这种地址解析过程。</p>
</li>
<li><p><em>注意这里路由器发送到路由器也是要经过一次ARP协议的</em></p>
</li>

</ol>
<h3 id='3）动态主机配置协议dhcp）'>（3）动态主机配置协议（DHCP）</h3>
<ol start='' >
<li><p>DHCP常用于给主机动态分配IP地址，DHCP是应用层协议，使用客户/服务器方式，客户端和服务端通过广播方式进行交互，基于UDP。</p>
</li>
<li><p>DHCP提供即插即用联网的机制，主机可以从服务器动态获取IP地址、子网掩码、默认网关、DNS服务器名称与IP地址，允许地址重用，支持移动用户加入网络，支持在用地址续租。</p>
</li>
<li><p>DHCP服务器和客户端交互过程：</p>
<ol start='' >
<li>DHCP客户机<strong>广播</strong>“DHCP发现” 消息，试图找到网络中的DHICP 服务器，以便从DHCP服务器获得一个IP地址，源地址为 0.0.0.0，目的地址为 255.255.255.255。</li>
<li>DHCP服务器收到“DHCP发现”消息后，<strong>广播</strong>“DHCP提供”消息，其中包括提供给DHCP客户机的IP地址，源地址为DHCP服务器地址，目的地址为 255.255.255.255。</li>
<li>DHCP客户机收到“DHCP提供”消息，如果接受该地址，那么就<strong>广播</strong>“DHCP请求”消息向DHCP服务器请求提供IP地址，源地址为0.0.0.0，目的地址为 255.255.255.255。</li>
<li>DHCP服务器<strong>广播</strong>“DHCP确认”消息，将IP地址分配给DHCP客户机，源地址为DHCP服务器地址，目的地址为 255.255.255.255。</li>
<li><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-02%20%E4%B8%8A%E5%8D%8810.25.55.png" referrerpolicy="no-referrer" alt="截屏2023-07-02 上午10.25.55"></li>

</ol>
</li>
<li><p>客户机发出DHCP发现消息时，可能会收到多个应答消息，此时客户机只会选择一个，通常是选择第一个收到的。</p>
</li>
<li><p>DHCP服务器分配的IP地址是临时的，因此客户只能在一段时间内使用地址，DHCP称这段时间为租用期。</p>
</li>
<li><p>DHCP的服务器和客户机要通过广播进行交互，因为交互过程开始客户机不知道服务器的位置，交互过程客户机缺少IP地址，因此需要通过广播交互。</p>
</li>

</ol>
<h3 id='4）网络控制报文协议icmp）'>（4）网络控制报文协议（ICMP）</h3>
<ol start='' >
<li><p>为了提高IP数据报交付成功的机会，在网络层使用ICMP来让主机或路由器报告差错和异常情况。</p>
</li>
<li><p>ICMP报文作为IP层数据报的数据，加上数据报首部，组成IP数据报发送出去。</p>
</li>
<li><p>ICMP是网络层协议。</p>
</li>
<li><p>ICMP报文有两种：</p>
<ol start='' >
<li>ICMP差错报文</li>
<li>ICMP询问报文</li>

</ol>
</li>
<li><p>ICMP差错报告报文的5种类型：</p>
<ol start='' >
<li>终点不可达：当路由器或主机不能交付数据报时，就向源点发送终点不可达报文——无法交付。</li>
<li>源点抑制（现在已不使用）：当路由器或主机由于拥塞而丢弃数据报时，就向源点发送源点抑制报文，使源点知道应当把数据报的发送速率放慢——拥塞丢数据。</li>
<li>时间超过：当路由器收到生存时间（TTL）为零的数据报时，除丢弃该数据报外，还要向源点发送时间超过报文。当终点在预先规定的时间内不能收到一个数据报的全部数据报片时，就把己收到的数据报片都丢弃，并向源点发送时间超过报文——TTL=0.</li>
<li>参数问题：当路由器或目的主机收到的数据报的首部中有的字段的值不正确时，就丢弃该数据报，并向源点发送参数问题报文——首部字段有问题。</li>
<li>改变路由（重定向）：路由器把改变路由报文发送给主机，让主机知道下次应将数据报发
送给另外的路由器——可通过更好的路由。</li>

</ol>
</li>
<li><p>ICMP差错报告报文数据字段：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-02%20%E4%B8%8A%E5%8D%8810.39.13.png" referrerpolicy="no-referrer" alt="截屏2023-07-02 上午10.39.13"></p>
</li>
<li><p>不发送ICMP差错报文的情况：</p>
<ol start='' >
<li>对ICMP差错报告报文不再发送ICMP差错报告报文。</li>
<li>对第一个分片的数据报片的所有后续数据报片都不发送ICMP差错报告报文。</li>
<li>对具有组播地址的数据报都不发送ICMP差错报告报文。</li>
<li>对具有特殊地址（如127.0.0.0 或 0.0.0.0）的数据报不发送ICMP差错报告报文。</li>

</ol>
</li>
<li><p>ICMP询问报文：</p>
<ol start='' >
<li>回送请求和回答报文：主机或路由器向特定目的主机发出的询问，收到此报文的主机必须给源主机或路由器发送ICMP回送回答报文。测试目的站是否可达以及了解其相关状态。</li>
<li>时间戳请求和回答报文：请某个主机或路由器回答当前的日期和时间。用来进行时钟同步和测量时间。</li>
<li>掩码地址请求和回答报文</li>
<li>路由器询问和通告报文</li>

</ol>
</li>
<li><p>ICMP的应用</p>
<ol start='' >
<li>分组网间探测PING：测试两个主机之间的连通性，使用ICMP回送请求和回答报文。</li>
<li>Traceroute：跟踪一个分组从源点到终点的路径，使用了ICMP时间超过差错报告报文。</li>

</ol>
</li>

</ol>
<p>&nbsp;</p>
<h2 id='五ipv6'>五、IPv6</h2>
<h3 id='1）ipv6的特性'>（1）IPv6的特性</h3>
<ol start='' >
<li><p>无论是CIDR还是NAT，都只是延长了IPv4的耗尽时间，只有IPV6从根本上解决了IP地址耗尽的问题。</p>
</li>
<li><p>IPv6数据报格式<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-02%20%E4%B8%8A%E5%8D%8810.55.43.png" referrerpolicy="no-referrer" alt="截屏2023-07-02 上午10.55.43"><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-02%20%E4%B8%8A%E5%8D%8810.57.35.png" referrerpolicy="no-referrer" alt="截屏2023-07-02 上午10.57.35"></p>
<ol start='' >
<li>版本：指明协议版本，总是6</li>
<li>优先级：区分数据报的类别和优先级。</li>
<li>流标签：“流”是从特定源点到特定终点的一系列数据报。所有属于同一个流的数据报都具有同样的流标签。</li>
<li>有戏载荷长度：有效载荷部分的长度。</li>
<li>下一个首部：标识下一个扩展首部或上层协议首部。</li>
<li>跳数限制：TTL</li>
<li>源。目的地址：注意这里地址有128位，IPv4只有32位。</li>

</ol>
</li>
<li><p>IPv6的变化和特性</p>
<ol start='' >
<li>IPv6将地址从32位扩大到128位。</li>
<li>IPv6将IPv4的校验和字段彻底删除，以减少每条的处理时间。</li>
<li>IPv6将Ipv4的可选字段移出首部，变成了扩展首部，成为灵活的首部格式。</li>
<li>IPv6支持即插即用，不需要DHCP协议。</li>
<li>IPv6首部长度必须是8B的整数倍，IPv4首部是4B的整数倍。</li>
<li>IPv6只能在主机处分片，IPv4可以在路由器和主机处分片。</li>
<li>ICMPv6：附加报文类型“分组过大”。</li>
<li>IPv6支持资源的预分配，支持实时视像等，保证一定的带宽和时延的应用。</li>
<li>IPv6取消了协议字段，改成下一个首部字段。</li>
<li>Ipv6取消了总长度字段，改用有效荷载长度字段。</li>
<li>IPv6取消了服务类型字段。</li>

</ol>
</li>

</ol>
<h3 id='2）ipv6地址'>（2）IPv6地址</h3>
<ol start='' >
<li><p>IPv6使用冒号十六进制记法，把地址中的每4位用一个16进制数标识，并用冒号分割每16位，如AAAA:BBBB:CCCC:DDDD:0101:2323:4545:7878。</p>
</li>
<li><p>当在16位域中开头有一些0的时候，可以使用缩写写法，但一个16位域中至少有一个数字：AAAA:000B:000C:DDDD:0000:0023:4545:7878=AAAA:B:C:DDDD:0:23:4545:7878。</p>
</li>
<li><p>当有相继的0值域时，还可以进一步缩写，这些域可以用双冒号缩写（::），且<strong>双冒号只能出现一次</strong>，AAAA:0000:0000:0000:0000:0003:4545:7878=AAAA::23:4545:7878。</p>
</li>
<li><p>IPv6基本地址类型</p>
<ol start='' >
<li>单播：一对一通信，可做源地址+目的地址。</li>
<li>多播：一对多通信，可做目的地址，分组被交付到一组计算机中的每台计算机。</li>
<li>任播：一对多中的一个通信，目的站是一组计算机，但数据报之交付给其中的一台计算机，通常是最近的计算机。</li>

</ol>
</li>
<li><p>IPv6地址扩展了IPv4的分级概念，采用三个等级</p>
<ol start='' >
<li>第一级（顶级）指明全球都知道的公共拓扑。</li>
<li>第二级（场点级）指明单个场点。</li>
<li>第三级指明单个网络接口。</li>

</ol>
</li>

</ol>
<h3 id='3）ipv4向ipv6过渡策略'>（3）IPv4向IPv6过渡策略</h3>
<ol start='' >
<li><p>双协议栈</p>
<ol start='' >
<li>双协议栈是指在一台设备上同时装有IPv4和IPv6协议栈，那么这台设备既能和IPv4网络通信，又能和IPv6网络通信。</li>
<li>如果这台设备是一个路由器，那么在路由器的不同接口上分别配置了IPv4地址和IPv6地址，并很可能分别连接了 IPv4 网络和IPv6 网络。</li>
<li>如果这台设备是一台计算机，那么它将同时拥有IPv4 地址和IPv6 地址，并具备同时处理这两个协议地址的功能。</li>

</ol>
</li>
<li><p>隧道技术</p>
<ol start='' >
<li>隧道技术是在IPv6数据报要进入IPv4网络时，把整个IPV6数据报封装到IPV4 数据报的数据部分，使得 IPV6 数据报就好像在IPv4 网络的隧道中传输。</li>
<li><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-02%20%E4%B8%8B%E5%8D%882.28.55.png" referrerpolicy="no-referrer" alt="截屏2023-07-02 下午2.28.55"></li>

</ol>
</li>

</ol>
<p>&nbsp;</p>
<h2 id='六路由协议'>六、路由协议</h2>
<h3 id='1）路由协议'>（1）路由协议</h3>
<ol start='' >
<li>自制系统（Autonomous System，AS）：单一技术管理下的一组路由器，这些路由器使用一种AS内部的路由选择协议和共同的度量来确定分组在该AS内的路由，同时还使用一种AS之间的路由选择协议来确定分组在 AS 之间的路由。</li>
<li>一个自治系统的所有路由器在本自治系统内都必须是连通的。</li>

</ol>
<h3 id='2）域内路由与域间路由'>（2）域内路由与域间路由</h3>
<ol start='' >
<li><p>自治系统内部的路由选择称为域内路由选择，自治系统之间的路由选择称为域问路由选择。</p>
</li>
<li><p>因特网有两大类路由选择协议。</p>
<ol start='' >
<li><p>内部网关协议（Interior Gateway Protocol, IGP）</p>
<ol start='' >
<li>内部网关协议即在一个自治系统内部使用的路由选择协议，它与互联网中其他自治系统选用什么路由选择协议无关。</li>
<li>目前这类路由选择协议使用得最多，如RIP和OSPF。</li>

</ol>
</li>
<li><p>外部网关协议(External Gateway Protocol, EGP)</p>
<ol start='' >
<li>若源站和目的站处在不同的自治系统中，当数据报传到一个自治系统的边界时（两个自治系统可能使用不同的IGP)，就需要使用一种协议将路由选择信息传递到另一个自治系统中，这样的协议就是外部网关协议(EGP)。</li>
<li>目前使用最多的外部网关协议是BGP-4。</li>

</ol>
</li>

</ol>
</li>
<li><p><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-02%20%E4%B8%8B%E5%8D%882.35.21.png" referrerpolicy="no-referrer" alt="截屏2023-07-02 下午2.35.21"></p>
</li>

</ol>
<h3 id='3）rip协议'>（3）RIP协议</h3>
<ol start='' >
<li><p>RIP协议，要求网络中的每一个路由器都维护从他自己到其他每一个目的网络的唯一最佳距离记录，是因特网的协议标准，最大优点是简单，最经典的是RIP算法。</p>
</li>
<li><p>距离：通常用跳数表示距离，即从源端口到目的端口所经过的路由器个数，经过一个路由器跳数+1。从一路由器到直接连接的网络距离为1。<strong>RIP允许一条路最多包含15个路由器，因此距离16表示网络不可到达</strong>。</p>
</li>
<li><p>RIP协议只适用于小互联网。</p>
</li>
<li><p>RIP协议通过在路由器之间交换路由表实现距离向量</p>
<ol start='' >
<li>路由器仅和相邻路由器交换信息。</li>
<li>路由器交换信息是自己的路由表</li>
<li>每30s交换一次路由信息并更新，若超过180s没收到邻居的信息则认为邻居消失并更新路由表。</li>
<li>路由器刚开始工作时只知道直接连接的网络的距离（为1）。</li>
<li>每个路由器也只和数目有限的相邻路由器交换并更新路由信息。</li>
<li>经过若干次更新后，所有路由器最终都会知道到达本系统下任何网络的最短距离和下一跳路由器地址。</li>

</ol>
</li>
<li><p>更新路由表原则</p>
<ol start='' >
<li>获知一条新的路由，在本节点的路由表中不存在，加入新的路由。</li>
<li>获知的路由中有到达某个目的地的路由，该路由比现有路由更短，则用新路由替换旧路由。</li>

</ol>
</li>
<li><p>RIP协议的报文格式：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-01%20%E4%B8%8B%E5%8D%885.08.12.png" referrerpolicy="no-referrer" alt="截屏2023-07-01 下午5.08.12"></p>
</li>
<li><p>RIP协议在当网络出现故障时，需要较长的时间才能将此信息传送到所有路由器——慢收敛。</p>
</li>

</ol>
<h3 id='4）开放最短路径优先ospf）协议'>（4）开放最短路径优先（OSPF）协议</h3>
<ol start='' >
<li><p>“开放：表明OSPF协议不是受某一厂商控制的，而是公开发表的。</p>
</li>
<li><p>”最短路径优先”：是因为使用了Dijkstra提出的最短路径算法SPF。</p>
</li>
<li><p>OSPF和RIP相比有以下区别</p>
<ol start='' >
<li>OSPF使用<em>洪泛法</em>向AS中的所有路由器发送信息。</li>
<li>发送的信息是本路由器相邻的所有路由器的链路状态，链路状态说明本路由器和谁相邻以及链路的“度量”。</li>
<li>只有当链路状态发生变化时，路由器才用洪泛法向所有路由器发送此信息，并且更新过程收敛很快。</li>
<li>OSPF是网络层协议，不实用UDP或TCP，直接用IP数据报传送，而RIP是应用层协议，在传输层使用UDP。</li>

</ol>
</li>
<li><p>OSPF特点</p>
<ol start='' >
<li>OSPF对不同链路可根据IP分组的不同服务类型（TOS）设备不同的度量。</li>
<li>如果到同一个网络有多条相同代价的路径，那么可以将通信量分配给这几条路径，这称为多路径间的负载平衡。</li>
<li>所有在OSPF路由器之间交换的分组都具有鉴别功能，因此保证在可信赖的路由器之间交换交换链路状态信息。</li>
<li>支持可变长度的子网划分和CIDR。</li>
<li>每个链路状态都带上一个32位的序号，序号越大，状态就越新。</li>

</ol>
</li>
<li><p>OSPF的五种分组类型：</p>
<ol start='' >
<li>问候分组：用来发现和维持邻站的可达性。</li>
<li>数据库描述分组：向邻站给出自己的链路状态数据库中的所有链路状态项目的摘要信息。</li>
<li>链路状态请求分组：向对方请求发送某些链路状态项目的详细信息。</li>
<li>链路状态更新分组：用洪泛法对全网更新链路状态。</li>
<li>链路状态确认分组：对链路更新分组的确认。</li>

</ol>
</li>
<li><p>OSPF的步骤</p>
<ol start='' >
<li>每个路由器发现它的邻居结点【HELLO问候分组】，并了解邻居节点的网络地址，</li>
<li>设置到它的每个邻居的成本度量metric。</li>
<li>构造【DD数据库描述分组】，向邻站给出自己的链路状态数据库中的所有链路状态项目的摘要信息。</li>
<li>如果数据库描述分组中的摘要自己都有，则邻站不做处理；如果有没有的或者是更新的，则发送【LSR链路状态请求分组】请求自己没有的和比自己更新的信息。</li>
<li>收到邻站的LSR分组后，发送【LSU链路状态更新分组】进行更新。</li>
<li>更新完毕后，邻站返回一个【LSAck链路状态确认分组】进行确认。</li>
<li>路由器的链路状态发生变化，泛洪发送【LSU链路状态更新分组】进行更新。</li>
<li>更新完毕后，其他站返回一个【LSAck链路状态确认分组】进行确认。</li>
<li>使用Dijkstra根据自己的链路状态数据库构造到其他节点间的最短路径。</li>

</ol>
</li>
<li><p>OSPF的区域<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-02%20%E4%B8%8B%E5%8D%882.55.54.png" referrerpolicy="no-referrer" alt="截屏2023-07-02 下午2.55.54"></p>
<ol start='' >
<li>为了使OSPF能够用于更大的网络，OSPF将一个AS划分成更小的区域，每个区域都有一个32位的区域标识符。</li>
<li>使用区域的好处在于利用洪泛法交换信息可以局限于一个区域而不是AS，减少了整个网络上的通信量。</li>

</ol>
</li>
<li><p>OSPF分组<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-02%20%E4%B8%8B%E5%8D%882.59.59.png" referrerpolicy="no-referrer" alt="截屏2023-07-02 下午2.59.59"></p>
</li>
<li><p>OSPF的优点</p>
<ol start='' >
<li>当互联网规模很大时，OSPF比RIP好很多。</li>
<li>OSPF的收敛速度很快。</li>

</ol>
</li>

</ol>
<h3 id='5）边界网关协议bgp）'>（5）边界网关协议（BGP）</h3>
<ol start='' >
<li><p>BGP是不同AS的路由器之间交换路由信息的协议，由于因特网规模极大，AS之间路由选择困难；AS之间的路由选择要找到最佳路由是不现实的；AS之间的路由选择需要考虑有关策略，倒是BGP只能寻找一条能够到达目的网络且较好的路由。</p>
</li>
<li><p>BGP是应用层协议，是基于TCP的。</p>
</li>
<li><p>BGP的工作原理：</p>
<ol start='' >
<li>每个自治系统的管理员要选择至少一个路由器（可以有多个）作为该自治系统的“BGP发言人”。</li>
<li>一个BGP发言人与其他自治系统中的BGP发言人要交换路由信息，就要先建立 TCP 连接，然后在此连接上交换BGP报文以建立BGP会话，再利用 BGP 会话交换路由信息。</li>
<li>当所有BGP发言人都相互交换网络可达性的信息后，各BGP发言人就可找出到达各个自治系统的较好路由。</li>
<li>每个BGP发言人除必须运行BGP外，还必须运行该AS所用的内部网关协议。</li>
<li>BGP所交换的网络可达性信息就是要到达某个网络（用网络前缀表示） 所要经过的一系列
AS。</li>
<li>图例：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-02%20%E4%B8%8B%E5%8D%883.11.55.png" referrerpolicy="no-referrer" alt="截屏2023-07-02 下午3.11.55"></li>

</ol>
</li>
<li><p>BGP报文格式<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-02%20%E4%B8%8B%E5%8D%883.12.40.png" referrerpolicy="no-referrer" alt="截屏2023-07-02 下午3.12.40"></p>
</li>
<li><p>BGP的特点</p>
<ol start='' >
<li>BGP交换路由信息的结点数量级是自治系统的数量级，比这些自治系统中的网络数少很多。每个自治系统中BGP 发言人（或边界路由器）的数目是很少的。这样就使得自治系统之
间的路由选择不致过分复杂。</li>
<li>BGP支持CIDR，因此BGP的路由表也就应当包括目的网络前级、下一跳路由器，以及到达该目的网络所要经过的各个自治系统序列。</li>
<li>在BGP刚运行时，BGP的邻站交换整个BGP路由表，但以后只需在发生变化时更新有变化的部分。这样做对节省网络带宽和减少路由器的处理开销都有好处。</li>

</ol>
</li>
<li><p>BGP-4的四种报文</p>
<ol start='' >
<li>打开（Open）报文：用来与相邻的另一个BGP 发言人建立关系。</li>
<li>更新 （Update）报文：用来发送某一路由的信息，以及列出要撤销的多条路由。</li>
<li>保活（Keepalive）报文：用来确认打开报文并周期性地证实邻站关系。</li>
<li>通知 （Notification）报文：用来发送检测到的差错。</li>

</ol>
</li>

</ol>
<h3 id='6）三种路由协议的比较'>（6）三种路由协议的比较</h3>
<p><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-02%20%E4%B8%8B%E5%8D%883.15.15.png" referrerpolicy="no-referrer" alt="截屏2023-07-02 下午3.15.15"></p>
<p>&nbsp;</p>
<h2 id='七ip组播'>七、IP组播</h2>
<h3 id='1）组播的概念'>（1）组播的概念</h3>
<ol start='' >
<li>当网络中的某些用户需要特定数据时，组播数据发送者仅发送一次数据，借助组播路由协议为组播数据包建立组播分发树，被传递的数据到达距离用户端尽可能近的节点后才开始复制和分发，是一种点对多点传输方式。</li>
<li>组播就是让源计算机一次发送的单个分组可以抵达用一个组地址标识的若干目标主机，并被他们正确接受。</li>
<li>组播提高了数据传送效率。减少了主干网出现拥塞的可能性。组播组中的主机可以是在同一个物理网络，也可以来自不同的物理网络（如果有组播路由器的支持）。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-02%20%E4%B8%8B%E5%8D%883.32.20.png" referrerpolicy="no-referrer" alt="截屏2023-07-02 下午3.32.20"></li>

</ol>
<h3 id='2）ip组播地址'>（2）IP组播地址</h3>
<ol start='' >
<li><p>IP组播地址让源设备能够将分组发送给一组设备，属于多播组的设备将被分配一个组播组IP地址（一群共同需求主机的相同标识）。</p>
</li>
<li><p>IP组播使用D类地址格式，地址范围是224.0.0.0～239.255.255.255，一个D类地址表示一个组播组，只能用作分组的目的地址，源地址总为单播地址。</p>
</li>
<li><p>组播数据报也是尽最大努力交付，不提供可靠交付。</p>
</li>
<li><p>组播数据报不产生ICMP差错报文，因此PING不可用于组播地址。</p>
</li>
<li><p>IP组播分为在本LAN上的硬件组播和在因特网上的组播，而在因特网上组播的最后还是需要通过在LAN上用硬件组播交付数据报。</p>
</li>
<li><p>硬件组播<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-02%20%E4%B8%8B%E5%8D%883.48.09.png" referrerpolicy="no-referrer" alt="截屏2023-07-02 下午3.48.09"></p>
<ol start='' >
<li>同单播地址一样，组播地址也需要相应的组播MAC地址在LAN传播。</li>
<li>组播MAC地址以十六进制01-00-5E开头，后面6个十六进制位根据IP组播组地址的最后23位转换得到。</li>
<li>所以IP组播的MAC地址只有23位来表示，而D类地址有28位表示，所有将会出现32个D类地址共享一个MAC地址的现象，因此需要在IP层通过软件对收到的组播数据报进行过滤。</li>

</ol>
</li>

</ol>
<h3 id='3）igmp协议'>（3）IGMP协议</h3>
<ol start='' >
<li><p>因特网组管理协议（IGMP）的目的就是使路由器知道组播组成员的信息，让路由器知道本LAN上是否有主机加入或退出了某个组播组。</p>
</li>
<li><p>IGMP工作的两个阶段：</p>
<ol start='' >
<li>当某台主机加入新的组播组时，该主机应向组播组的组播地址发送一个IGMP报文，声明自己要成为该组的成员。本地的组播路由器收到IGMP 报文后，将组成员关系转发给因特网上的其他组播路由器。</li>
<li>本地组播路由器周期性地探询本地局域网上的主机，以便知道这些主机是否仍继续是组的成员。只要对某个组有一台主机响应，那么组播路由器就认为这个组是活跃的。但一个组在经过几次的探询后仍然没有一台主机响应时，则不再将该组的成员关系转发给其他的组播路由器。</li>

</ol>
</li>

</ol>
<h3 id='4）组播路由选择协议'>（4）组播路由选择协议</h3>
<ol start='' >
<li><p>组播路由选择协议就是要找出以源主机为根节点的组播转发树，其中每个分组在每条链路上只传送一次。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-02%20%E4%B8%8B%E5%8D%883.56.58.png" referrerpolicy="no-referrer" alt="截屏2023-07-02 下午3.56.58"></p>
</li>
<li><p>对于不同的多播组对应于不同的多播转发树，同一个多播组，对不同的源点也会有不同的转发树。</p>
</li>
<li><p>组播路由选择协议的三种算法</p>
<ol start='' >
<li>基于链路状态的路由选择</li>
<li>基于距离向量的路由选择</li>
<li>协议无关的组播（悉数/密集）</li>

</ol>
</li>

</ol>
<p>&nbsp;</p>
<h2 id='八移动ip'>八、移动IP</h2>
<h3 id='1）移动ip'>（1）移动IP</h3>
<ol start='' >
<li><p>移动IP技术是指移动站以固定的网络IP地址实现跨越不同网段的漫游功能，并保证基于网IP的网络权限在漫游过程中不发生任何改变。</p>
</li>
<li><p>移动IP的目标是把分组自动地投递给移动站，一个移动站是把其连接点从一个网络或子网改变到另一个网络或子网的主机。</p>
</li>
<li><p>移动 IP 定义了三种功能实体：</p>
<ol start='' >
<li>移动节点：具有永久卫地址的移动站。</li>
<li>本地代理：通常就是连接在归属网络（原始连接到的网络）上的路由器。</li>
<li>外地代理：通常就是连接在被访网络（移动到另一地点所接入的网络）上的路由器。</li>

</ol>
</li>

</ol>
<h3 id='2）移动ip的通信过程'>（2）移动IP的通信过程</h3>
<ol start='' >
<li><p>在移动IP中，每个移动站都有一个原始地址，即永久地址（或归属地址），移动站原始连接的网络称为归属网络，永久地址和归属网络的关联是不变的。归属代理通常是连接到归属网络上的路由器，然而它实现的代理功能是在应用层完成的。</p>
</li>
<li><p>当移动站移动到另一地点，所接入的外地网络也称被访网络。被访网络中使用的代理称为外地代理，它通常是连接在被访网络上的路由器。</p>
</li>
<li><p>外地代理有两个重要功能：</p>
<ol start='' >
<li>要为移动站创建一个临时地址，称为转交地址。转交地址的网络号显然和被访网络一致。</li>
<li>及时把移动站的转交地址告诉其归属代理。</li>

</ol>
</li>
<li><p>移动IP技术的基本通信流程如下：</p>
<ol start='' >
<li>移动站在归属网络时，按传统的TCP/IP方式进行通信。</li>
<li>移动站漫游到外地网络时，向外地代理进行登记，以获得一个临时的转交地址。外地代理要向移动站的归属代理登记移动站的转交地址。</li>
<li>归属代理知道移动站的转交地址后，会构建一条通向转交地址的隧道，将截获的发送给移动站的IP分组进行再封装，并通过隧道发送给被访网络的外地代理。</li>
<li>外地代理把收到的封装的数据报进行拆封，恢复成原始的IP分组，然后发送给移动站，这样移动站在被访网络就能收到这些发送给它的IP分组。</li>
<li>移动站在被访网络对外发送数据报时，仍然使用自己的永久地址作为数据报的源地址，此时显然无须通过A的归属代理来转发，而是直接通过被访网络的外部代理。</li>
<li>移动站移动到另一外地网络时，在新外地代理登记后，然后新外地代理将移动站的新转交地址告诉其归属代理。无论如何移动，移动站收到的数据报都是由归属代理转发的。</li>
<li>移动站回到归属网络时，移动站向归属代理注销转交地址。</li>

</ol>
</li>

</ol>
<p>&nbsp;</p>
<h2 id='九网络层设备'>九、网络层设备</h2>
<h3 id='1）路由器'>（1）路由器</h3>
<ol start='' >
<li><p>路由器是一种具有多个输入端口和多个输出端口的专用计算机，其任务是转发分组。</p>
</li>
<li><p>当源主机向目标主机发送数据报时，路由器先检查源主机和目标主机是否在一个网络上，如果在同一个网络则直接交付无需通过路由器。如果不在一个网络，需要通过路由器转发给下一个路由器。可见跨网络的交付必须要路由器参与。</p>
</li>
<li><p>路由器体系结构<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-02%20%E4%B8%8B%E5%8D%884.11.31.png" referrerpolicy="no-referrer" alt="截屏2023-07-02 下午4.11.31"></p>
<ol start='' >
<li><p>路由选择部分也称控制部分，其核心构件是路由选择处理机。路由选择处理机的任务是根据所选定的路由选择协议构造出路由表，同时经常或定期地和相邻路由器交换路由信息而不断更新和维护路由表。</p>
</li>
<li><p>分组转发部分由三部分组成：交换结构、一组输入端口、一组输出端口。</p>
<ol start='' >
<li>输入端口在从物理层接收到的比特流中提取出数据链路层帧，进而从帧中提取出网络层数据报，</li>
<li>输出端口则执行恰好相反的操作，输入输出端口是有缓冲区的，如果接受数据报的速度超过了处理的速度，就会导致缓冲区满而丢失数据报。</li>
<li>交换结构是路由器的关键部件，它根据转发表对分组进行处理，将某个输入端口进入的分组从一个合适的输出端口转发出去。</li>

</ol>
</li>

</ol>
</li>
<li><p>路由器主要完成两个功能：一是分组转发，二是路由计算。前者处理通过路由器的数据流，关键操作是转发表查询、转发及相关的队列管理和任务调度等；后者通过和其他路由器进行基于路由协议的交互，完成路由表的计算。</p>
</li>
<li><p>路由器和网桥的重要区别是：网桥与高层协议无关，而路由器是面向协议的，它依据网络地址进行操作，并进行路径选择、分段、帧格式转换、对数据报的生存时间和流量进行控制等。现今的路由器一般都提供多种协议的支持，包括 OSI、TCP/IP、IX 等。</p>
</li>

</ol>
<h3 id='2）路由表和路由转发'>（2）路由表和路由转发</h3>
<ol start='' >
<li>路由表是根据路由选择算法得出的，主要用途是路由选择，依靠软件实现。</li>
<li>转发表由路由表的来，可用软件实现也可用特殊硬件实现。转发表必须包含完成转发所必需的信息。在转发表的每一行必须包含目的网络的输出端口和某些MAC地址的映射。</li>
<li>转发是路由器根据转发表把收到的IP数据报从合适的端口转发出去，仅涉及一个路由器，但是路由转发则涉及很多路由器。</li>

</ol>
<h1 id='计网-05-传输层'>计网-05-传输层</h1>
<h2 id='一传输层概述'>一、传输层概述</h2>
<h3 id='1）传输层的功能'>（1）传输层的功能</h3>
<ol start='' >
<li><p>传输层是主机才有的层次，是面向通信部分的最高层，为应用层提供通信服务，使用网络层的服务。</p>
</li>
<li><p>传输层的功能</p>
<ol start='' >
<li>传输层提供进程和进程之间的逻辑通信。</li>
<li>复用和分用：复用指发送方的不同进程都可以使用同一个传输层协议，分用指传输层能够把数据交付给正确的进程。</li>
<li>对收到的报文进行差错检测（首部和数据，网络层只检测IP数据报的首部，不检测数据部分）。</li>
<li>提供两种不同的传输协议：面向连接的TCP和无连接的UDP。</li>

</ol>
</li>

</ol>
<h3 id='2）传输层的寻址和端口'>（2）传输层的寻址和端口</h3>
<ol start='' >
<li><p>端口：传输层服务访问点（TSAP），他在传输层的作用类似于IP地址在网络层的作用，标识各个进程。</p>
</li>
<li><p>端口号：</p>
<ol start='' >
<li><p>应用程序通过端口号进行标识，端口号长度为16bit，能表示65536个不同的端口号。</p>
</li>
<li><p>端口号只有本地意义，不同计算机的端口号无论是否相同之间都没有关联。</p>
</li>
<li><p>根据端口号的范围可将端口分为两类</p>
<ol start='' >
<li><p>服务端使用的端口号，其中又分为两类。</p>
<ol start='' >
<li>熟知端口号：数值为0～1023，被指派给TCP/IP最重要的一些进程，让所有用户都知道。</li>
<li>登记端口号：数值为1023～49151，供没有熟知端口号的进程使用的，使用这类端口号必须要在IANA登记。</li>
<li>一些熟知端口号：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-03%20%E4%B8%8A%E5%8D%889.33.08.png" referrerpolicy="no-referrer" alt="截屏2023-07-03 上午9.33.08"></li>

</ol>
</li>
<li><p>客户端使用的端口号：数值为49152～65535，这类端口号仅在客户进程运行时才动态的选择，因此又称临时端口，通信结束后端口号的使用就撤销。</p>
</li>

</ol>
</li>

</ol>
</li>
<li><p>套接字Socket：</p>
<ol start='' >
<li>端口号拼接到IP地址就构成套接字Socket，在网络中用发送方和接收方的套接字来识别端点。</li>
<li>套接字实际上就是一个通信端点：套接字Socket=（IP地址：端口号），套接字唯一地标识一台主机上的一个进程。</li>

</ol>
</li>

</ol>
<p>&nbsp;</p>
<h2 id='二udp'>二、UDP</h2>
<h3 id='1）udp概述'>（1）UDP概述</h3>
<ol start='' >
<li><p>UDP仅在IP数据报服务之上增加了两个最基本的服务：复用分用和差错检测。</p>
</li>
<li><p>UDP的优点</p>
<ol start='' >
<li>UDP无需建立连接：UDP不会引入建立连接的时延，速度快。</li>
<li>无连接状态：UDP无需维护连接状态，使用UDP的服务器能支持更多的活动客户机。</li>
<li>分组首部开销小：UDP首部8B，TCP首部20B。</li>
<li>UDP没有拥塞控制：应用层能更好的控制发送数据和发送数据，拥塞不会影响效率，适合实时应用（少量拥塞导致的错误完全可以接受）。</li>
<li>UDP支持一对一、一对多、多对多的交互通信。</li>
<li>UDP不保证可靠交付：维护可靠性的工作可在应用层完成。</li>
<li>UDP面向报文，适合一次性传输较少数据的网络应用。</li>

</ol>
</li>
<li><p>UDP首部格式<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-03%20%E4%B8%8A%E5%8D%889.51.29.png" referrerpolicy="no-referrer" alt="截屏2023-07-03 上午9.51.29"></p>
<ol start='' >
<li>UDP数据报包括首部和用户数据，首部有8B。</li>
<li>源端口：源端口号，在需要对方回复时使用，否则可为全0。</li>
<li>目的端口：目的端口号，在终点交付报文时必须使用到。</li>
<li>长度：UDP数据报的长度（包括首部和数据），最小值是8（仅首部）。</li>
<li>校验和：检测UDP是否出错，可选，当源主机不校验时可为0。</li>

</ol>
</li>

</ol>
<h3 id='2）udp校验'>（2）UDP校验</h3>
<ol start='' >
<li><p>伪首部：在计算校验和时临时添加在UDP的首部，构成一个临时的UDP数据报。伪首部占12B，只是用来模拟UDP数据报方便计算校验和，伪首部本身既不向下传送也不向上递交。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-03%20%E4%B8%8A%E5%8D%8810.04.14.png" referrerpolicy="no-referrer" alt="截屏2023-07-03 上午10.04.14"></p>
</li>
<li><p>UDP校验和和IP数据报首部校验和类似，但是IP数据报只检验首部而UDP检验首部和数据。</p>
</li>
<li><p>检验方法：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-03%20%E4%B8%8A%E5%8D%8810.07.25.png" referrerpolicy="no-referrer" alt="截屏2023-07-03 上午10.07.25"></p>
<ol start='' >
<li><p>在发送端：</p>
<ol start='' >
<li>填上伪首部</li>
<li>全0填充检验和字段</li>
<li>全0填充数据部分（UDP数据报要看成许多2B的字串接起来，如果数据部分是奇数B，则要填充一个全0的B）</li>
<li>伪首部＋首部＋数据部分采用二
进制反码求和</li>
<li>把和求反码填入检验和字段</li>
<li>去掉伪首部，发送</li>

</ol>
</li>
<li><p>在接收端：</p>
<ol start='' >
<li>填上伪首部</li>
<li>伪首部+首部＋数据部分采用二
进制反码求和</li>
<li>结果全为1则无差错，否则丢弃数据报/交给应用层附上出差错的警告。</li>

</ol>
</li>

</ol>
</li>

</ol>
<p>&nbsp;</p>
<h2 id='三tcp'>三、TCP</h2>
<h3 id='1）tcp概述'>（1）TCP概述</h3>
<ol start='' >
<li><p>TCP是在不可靠的IP层之上实现的可靠的数据传输协议，主要解决的传输的可靠、有序、无丢失和不重复问题。</p>
</li>
<li><p>TCP的特点</p>
<ol start='' >
<li><p>TCP是面向连接的传输层协议。</p>
</li>
<li><p>每一条TCP协议连接只能有两个端点，TCP连接只能是点对点的。</p>
</li>
<li><p>TCP提供可靠交付的服务，保证传送的数据无差错、不丢失、不重复、按序到达。</p>
</li>
<li><p>TCP提供全双工通信，允许通信双方的进程在任何时候都能发送数据。为此TCP连接的两端都有发送缓存和接收缓存。</p>
<ol start='' >
<li>发送缓存：准备发送的数据&amp;己发送但尚未收到确认的数据。</li>
<li>接收缓存：按序到达但尚未被接受应用程序读取的数据&amp;不按序到达的数据。</li>

</ol>
</li>
<li><p>TCP是面向字节流的，TCP把进程交付的数据看成是无结构的字节流。</p>
</li>

</ol>
</li>

</ol>
<h3 id='2）tcp报文'>（2）TCP报文</h3>
<ol start='' >
<li><p>TCP传送的数据单元称为报文段，TCP报文段既可以用来运载数据，又可以用来建立连接、释放连接和应答。</p>
</li>
<li><p>一个TCP报文段分为首部和数据两部分，整个TCP报文段作为IP数据报的数据部分封装在IP数据报中。首部的前20B固定，首部最短为20B，后面按4B为单位增加。</p>
</li>
<li><p>TCP首部：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-03%20%E4%B8%8A%E5%8D%8811.00.18.png" referrerpolicy="no-referrer" alt="截屏2023-07-03 上午11.00.18"></p>
<ol start='' >
<li><p>源端口和目的端口：各2B。</p>
</li>
<li><p>序号（seq）：占4B，共2^32个序号。TCP是面向字节流的，因此TCP传送的字节是按顺序编号的，序号代表本包文传送的数据的第一个字节的序号。</p>
</li>
<li><p>确认号（ack）：占4B，指期望收到对方下一个报文的第一个数据字节的序号，确认号为N则表示N-1都收到了。</p>
</li>
<li><p>数据偏移（即首部长度）：占4位，单位是4B，因此首部最大长度为60B。数据偏移表示的是数据的起始位距离首部起始位的距离。</p>
</li>
<li><p>保留：占6位，置为0。</p>
</li>
<li><p>紧急位URG：URG=1表示紧急指针字段有效，通知系统此报文段有紧急数据，应尽快传送。URG和首部中的紧急指针字段配合使用，即数据从第一个字节到紧急指针所指字节就是紧急数据。</p>
</li>
<li><p>确认位ACK：当ACK=1时确认号字段有效，TCP规定连接建立后所有传送的报文段都必须把ACK置为1。</p>
</li>
<li><p>推送位PSH（Push）：接收方收到PSH=1的报文段，就应当尽快交付给接受进程，而不是等待缓存满再交付。</p>
</li>
<li><p>复位位RST（Reset）：RST=1表示TCP连接中出现严重差错，必须释放连接再重新建立运输连接。</p>
</li>
<li><p>同步位SYN：</p>
<ol start='' >
<li>SYN=1时表示这是一个连接请求或连接接受报文。</li>
<li>SYN=1，ACK=0时表明这是一个连接请求报文，对方若同意建立连接，则应在响应报文中使用 SYN=1, ACK=1。</li>

</ol>
</li>
<li><p>终止位FIN（Finish）：用来释放一个连接。FIN=1时表明此报文段的发送方的数据己发送完毕，并要求释放运输连接。</p>
</li>
<li><p>窗口：占2B，范围为0~2^16-1。它指出现在允许对方发送的数据量。接收方的数据缓存空间是有限的，因此用窗口值作为接收方让发送方设置其发送窗口的依据。</p>
</li>
<li><p>校验和：占 2B，校验和字段检验的范围包括首部和数据两部分。在计算校验和时，和UDP
一样，要在TCP 报文段的前面加上12B的伪首部（只需将 UDP 伪首部的协议字段的17改成6，UDP长度字段改成TCP长度，其他和UDP一样)。</p>
</li>
<li><p>紧急指针：占2B。紧急指仅在URG=1时才有意义，它指出在本报文段中紧急数据共有多少字节（紧急数据在报文段数据的最前面）。</p>
</li>
<li><p>选项：长度可变，TCP最初只规定了一种选项，即最大报文段长度（Maximum Segment Size，MSS），用来规定<strong>数据字段</strong>的最大长度。</p>
</li>
<li><p>填充：填充字段使整个首部长度是4B的整数倍。</p>
</li>

</ol>
</li>

</ol>
<h3 id='3）tcp连接管理'>（3）TCP连接管理</h3>
<ol start='' >
<li><p>TCP是面向连接的协议，每个TCP连接都有三个阶段：连接建立、数据传送和连接释放。TCP连接的管理就是使连接的建立和释放都能正常进行。</p>
</li>
<li><p>TCP连接的端点是套接字，每条TCP连接都能唯一地被通信的两个端点，即两个套接字确定。</p>
</li>
<li><p>TCP连接的建立采用客户/服务器模式，主动发起连接建立的进程称为客户，等待连接建立的称为服务器。</p>
</li>
<li><p>TCP连接建立——<em>三次握手</em><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-03%20%E4%B8%8B%E5%8D%882.31.11.png" referrerpolicy="no-referrer" alt="截屏2023-07-03 下午2.31.11"></p>
<ol start='' >
<li>第一次握手（SYN发送）：客户端向服务器发送一个带有SYN=1的连接请求报文段。这表示客户端请求建立连接，并传递客户端选择的初始序列号seq=x，无应用层数据。</li>
<li>第二次握手（SYN-ACK发送）：服务器接收到客户端的SYN报文段，<strong>服务器为TCP分配缓存和变量</strong>，会发送一个带有SYN=1，ACK=1的确认报文段作为响应。服务器也会选择自己的初始序列号seq=y，并将ack=x+1。这个报文段确认了客户端的SYN请求，并表明允许建立连接，无应用层数据。</li>
<li>第三次握手（ACK发送）：客户端收到服务器的SYN-ACK报文段后，<strong>客户端为TCP分配缓存和变量</strong>，会发送一个带有SYN=0，ACK=1的TCP报文段作为最后的确认。客户端的seq=x+1，ack=y+1。这个ACK报文段告知服务器，客户端已经接收到了服务器的确认，可以携带数据。</li>
<li>需要注意到，服务器的资源是在第二次握手时分配的，而客户端的资源是在第三次握手时分配的，这就会导致SYN洪泛攻击。</li>
<li>SYN洪泛攻击：SYN洪泛攻击发生在OSI第四层，这种方式利用TCP协议的特性，就是三次握手。攻击者发送TCP SYN，SYN是TCP三次握手中的第一个数据包，而当服务器返回ACK后，该攻击者就不对其进行再确认，那这个TCP连接就处于挂起状态，也就是所谓的半连接状态，服务器收不到再确认的话，还会重复发送ACK给攻击者。这样更加会浪费服务器的资源。攻击者就对服务器发送非常大量的这种TCP连接，由于每一个都没法完成三次握手，所以在服务器上，这些TCP连接会因为挂起状态而消耗CPU和内存，最后服务器可能死机，就无法为正常用户提供服务了。</li>
<li>可以通过SYN Cookie解决SYN洪泛攻击。</li>

</ol>
</li>
<li><p>TCP连接释放——<em>四次握手</em><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-03%20%E4%B8%8B%E5%8D%882.42.20.png" referrerpolicy="no-referrer" alt="截屏2023-07-03 下午2.42.20"></p>
<ol start='' >
<li>第一次握手（Client -&gt; Server）：客户端发送一个FIN=1，seq=u的连接释放报文段给服务器，停止发送数据，表示客户端希望关闭连接。</li>
<li>第二次握手（Server -&gt; Client）：服务器接收到客户端发送的FIN报文段后，会发送一个ACK=1，seq=v，ack=u+1的确认报文段给客户端，表示服务器已经收到了客户端的关闭请求，客户到服务器的方向的连接就释放了——半关闭状态。</li>
<li>第三次握手（Server -&gt; Client）：服务器发完数据，发送一个FIN=1，ACK=1，seq=w，ack=u+1的连接释放报文段给客户端，表示服务器也准备关闭连接。</li>
<li>第四次握手（Client -&gt; Server）：客户端接收到服务器发送的FIN标志的报文段后，发送一个ACK=1，seq=u+1，ack=w+1的确认报文段给服务器，表示客户端已经收到了服务器的关闭请求确认。<strong>再等待2MSL的最长报文段寿命后，连接彻底关闭</strong>。</li>

</ol>
</li>
<li><p>连接和释放的字段内容：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-03%20%E4%B8%8B%E5%8D%882.48.47.png" referrerpolicy="no-referrer" alt="截屏2023-07-03 下午2.48.47"></p>
</li>

</ol>
<h3 id='4）tcp可靠传输'>（4）TCP可靠传输</h3>
<ol start='' >
<li><p>TCP提供的可靠数据传输服务保证接收方进程从缓冲区读出的字节流与发送方发出的字节流完全一样，TCP通过校验、序号、确认和重传机制实现。</p>
</li>
<li><p>校验：TCP校验和UDP校验一样，略过。</p>
</li>
<li><p>序号<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-03%20%E4%B8%8B%E5%8D%883.03.40.png" referrerpolicy="no-referrer" alt="截屏2023-07-03 下午3.03.40"></p>
<ol start='' >
<li>TCP首部的序号字段用来保证数据能有序提交给应用层，TCP认为数据是一个无结构但有序的字节流，序号建立在传送的字节流上而不是报文段上。</li>
<li><strong>数据是给传送的字节流的每一个字节标记一个序号，一次可能会发送多个连续序号的字节</strong>。</li>
<li>如第一次发送了序号1、2、3的字节，则第一个报文的序号是0，第二个报文段的序号是4。</li>

</ol>
</li>
<li><p>确认</p>
<ol start='' >
<li>TCP首部的确认号是期望收到对方的下一个报文段的数据的第一个字节的序号。如接收方收到序号为3、4、5的字段，则下一个报文段的确认号就为5。</li>
<li>发送方会储存那些已发送但未收到确认的报文段，以便在需要时重传。</li>
<li>TCP默认使用累计确认，TCP只确认数据流中至第一个丢失字节为止的字节，如接收方收到了1、2、3字节和7、8、9字节，则接收方仍在等待4、5、6字节，因此会反复发送确认号为3的报文段。</li>

</ol>
</li>
<li><p>重传</p>
<ol start='' >
<li><p>超时和冗余ACK会导致重传</p>
</li>
<li><p>超时</p>
<ol start='' >
<li>TCP每发送一个报文段，就对这个报文段设置一次计时器。计时器设置的重传时间到期但还未收到确认时，就要重传这一报文段。</li>
<li>为了计算超时计时器的重传时间，TCP采用一种自适应算法，它记录一个报文段发出的时间，以及收到相应确认的时间，这两个时间之差称为报文段的往返时间（Round-Trip Time，RTT），TCP保留了RTT的一个加权平均往返时间RTTs，它会随新测量 RTT 样本值的变化而变化。</li>
<li>显然，超时计时器设置的超时重传时间（Retransmission Time-Out, RTO）应略大于RTTS， 但也不能大太多，否则当报文段丢失时，TCP 不能很快重传，导致数据传输时延大。</li>

</ol>
</li>
<li><p>冗余ACK</p>
<ol start='' >
<li>超时触发重传存在的一个问题是超时周期往往太长，发送方通常在超时事件发生之前通过冗余ACK来检测丢包情况。</li>
<li>冗余ACK就是多次确认某个报文段的ACK，TCP规定每当比期望序号大的失序报文段到达时，就发送一个冗余ACK，指明下一个期待字节的序号。如发送方发送了1、2、3、4、5字节，其中3丢失，于是接收方就会发送多个对2号报文段的冗余ACK，表示自己期望接收2号报文段。</li>
<li>TCP 规定当发送方收到对同一个报文段的3个冗余 ACK 时，就可以认为跟在这个被确认报文段之后的报文段已经丢失。这时发送方可以立即对丢失报文执行重传，这种技术通常称为快速重传。</li>

</ol>
</li>

</ol>
</li>

</ol>
<h3 id='5）tcp流量控制'>（5）TCP流量控制</h3>
<ol start='' >
<li>TCP提供流量控制服务来消除发送方（发送速率太快）使接收方缓存区溢出的可能性，因此可以说流量控制是一个速度匹配服务（匹配发送方的发送速率与接收方的读取速率）。</li>
<li>TCP提供基于<strong>滑动窗口协议</strong>的流量控制机制，在通信过程中，接收方根据自己接收缓存的大小，动态地调整发送方的发送窗口大小，这称为接收窗口rwnd，即调整TCP报文段首部中的“窗口”字段值，来限制发送方向网络注入报文的速率。同时，发送方根据其对当前网络拥塞程度的估计而确定的窗口值，这称为拥塞窗口cwnd，其大小与网络的带宽和时延密切相关。</li>
<li>例如，在通信中，有效数据只从A发往B，而B仅向A发送确认报文，这时B可以通过设置确认报文段首部的窗口字段来将rwnd通知给A。rwnd即接收方允许连续接收的最大能力，单位是字节。发送方A总是根据最新收到的rwnd值来限制自己发送窗口的大小，从而将未确认的数据量控制在rwnd大小之内，保证A不会使B的接收缓存滥出。当然，A的发送窗口的实际大小取rwnd和cwnd中的最小值。图5.10中的例子说明了如何利用滑动窗口机制进行流量控制。设A向B发送数据，在连接建立时，B告诉A：“我的接收窗口rwnd=400”。接收方主机B进行了三次流量控制，这三个报文段都设置ACK=1，只有在ACK=1时确认号字段才有意义。第一次把窗口减小到rwnd=300，第二次又减到rwnd=100，最后减到rwnd=0，即不允许发送方再发送数据。这使得发送方暂停发送的状态将持续到B重新发出一个新的窗口值为止。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-04%20%E4%B8%8A%E5%8D%889.20.57.png" referrerpolicy="no-referrer" alt="截屏2023-07-04 上午9.20.57"></li>
<li>为了防止接受方在发送零窗口值之后发送的窗口值丢失，导致发送方持续停滞的情况，TCP为每一个连接设有一个持续计时器，只要TCP连接的一方收到对方的零窗口通知，就启动持续计时器。若持续计时器设置的时间到期，就发送一个零窗口探测报文段接收方收到探测报文段时给出现在的窗口值。</li>

</ol>
<h3 id='6）tcp拥塞控制'>（6）TCP拥塞控制</h3>
<ol start='' >
<li><p>拥塞控制的目的是防止过多的数据进入网络，保证网络中的路由器和链路不会过载。</p>
</li>
<li><p>拥塞控制和流量控制的区别</p>
<ol start='' >
<li>拥塞控制是让网络能够承受现有的网络负荷，是一个全局的过程，涉及整个网络。</li>
<li>流量控制则是指点对点的通信量的控制，是个端到端的问题。</li>

</ol>
</li>
<li><p>TCP进行拥塞控制，既要考虑接收方的接受能力，也要考虑网络的传输能力，因此要求发送方维护两个窗口：</p>
<ol start='' >
<li>接受窗口rwnd：接收方根据目前接收缓存大小所许诺的最新窗口值，反映接收方的容量。</li>
<li>拥塞窗口cwnd：发送方根据自己估算的网络拥塞程度设置的窗口值，反映网络的当前容量。</li>

</ol>
<p>发送窗口的上限=min[rwnd，cwnd]。</p>
</li>
<li><p>慢开始和拥塞避免算法</p>
<ol start='' >
<li><p>慢开始</p>
<ol start='' >
<li>在TCP开始时，令cwnd=1，即一个最法报文段长度MSS。每收到一个新报文段的确认信息，则增大一个MSS。</li>
<li>这样的可以逐步增长发送方的cwnd，可使分组进入网络的速率更加合理。</li>
<li>例如，A向B发送数据，发送方先置拥塞窗口cwnd=1，A发送第一个报文段，A收到B对第一个报文段的确认后，把cwnd从 1增大到2，于是A接着发送两个报文段，A收到B对这两个报文段的确认后，把cwnd从2增大到4，下次就可一次发送4个报文段。</li>
<li>使用慢开始算法后，每经过一个传输轮次（即往返时延RTT），cwnd就会翻倍，即cwnd的值会随传输轮次指数增长。</li>
<li>慢开始算法把cwnd增大到一个规定的<strong>慢开始门限ssthresh</strong>，然后改用拥塞避免算法。</li>

</ol>
</li>
<li><p>拥塞避免算法</p>
<ol start='' >
<li><p>让拥塞窗口cwnd缓慢增大，每经过一个RTT就把cwnd+1，增长速率比慢开始算法慢很多。</p>
</li>
<li><p>当cwnd&lt;ssthresh时，使用慢开始算法；</p>
<p>当cwnd&gt;ssthresh时，使用拥塞避免算法；</p>
<p>当cwnd=ssthresh时，即可以使用慢开始算法又可以使用拥塞避免算法。</p>
</li>
<li><p>拥塞避免算法不能完全消除拥塞，只能减少发送的分组数，尽量避免拥塞。</p>
</li>

</ol>
</li>
<li><p>网络拥塞的处理<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-04%20%E4%B8%8A%E5%8D%889.52.09.png" referrerpolicy="no-referrer" alt="截屏2023-07-04 上午9.52.09"></p>
<ol start='' >
<li>无论在慢开始阶段还是拥塞避免阶段，只要发送方判断网络出现拥塞（未按时收到确认），就要把ssthresh设为出现拥塞时cwnd的一半（但不能小于2）。然后把cwnd=1，重新开始慢开始算法。</li>
<li>这样可以迅速减少主机发送的分组数，让发生拥塞的路由器有时间把积压的分组处理完。</li>

</ol>
</li>
<li><p>慢开始和拥塞避免算法使用了“乘法减小”和“加法增大”的方法，使得网络出现拥塞时ssthresh下降很快，cwnd缓慢增大。</p>
</li>

</ol>
</li>
<li><p>快重传和快恢复——对慢开始和拥塞避免的改进</p>
<ol start='' >
<li><p>快重传</p>
<ol start='' >
<li>快重传技术使用冗余ACK技术来检测丢包，发送方连续收到三个重复的ACK时直接重传。</li>
<li>冗余ACK并非取消重传计时器，而是在某些情况下加快重传丢失的报文段。</li>

</ol>
</li>
<li><p>快恢复</p>
<ol start='' >
<li>发送方连续收到三个冗余ACK时，执行“乘法减小”算法，把ssthresh设置为当前cwnd的一半。</li>
<li>快恢复可以预防网络发生拥塞，同时由于能够收到后续的ACK，因此网络拥塞可能未必严重，因此可以跳过重新慢开始阶段，因此也称为快恢复。</li>

</ol>
</li>
<li><p>网络拥塞的处理<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-04%20%E4%B8%8A%E5%8D%8810.05.29.png" referrerpolicy="no-referrer" alt="截屏2023-07-04 上午10.05.29"></p>
</li>

</ol>
</li>
<li><p>在拥塞控制中，发送方自己通过检测网络状态决定发送量，慢开始、拥塞避免、快重传、快恢复算法是同时应用在拥塞控制机制中。</p>
</li>

</ol>
<h1 id='计网-06-应用层'>计网-06-应用层</h1>
<h2 id='一网络应用模型'>一、网络应用模型</h2>
<h3 id='1）应用层概述'>（1）应用层概述</h3>
<ol start='' >
<li><p>应用层对应用程序的通信提供服务。</p>
</li>
<li><p>应用层协议定义</p>
<ol start='' >
<li>进程交换的报文类型</li>
<li>各种报文类型的语法</li>
<li>字段的语义</li>
<li>进程何时、如何发送报文，以及对报文进行相应的规则</li>

</ol>
</li>
<li><p>应用层的功能</p>
<ol start='' >
<li>文件传输、访问和管理</li>
<li>电子邮件</li>
<li>虚拟终端</li>
<li>查询服务和远程作业登陆</li>

</ol>
</li>

</ol>
<h3 id='2）客户服务器模型'>（2）客户/服务器模型</h3>
<ol start='' >
<li><p>CS模型中，有一个总是打开的主机称为服务器，服务于许多来自其他称为客户机的主机请求。</p>
</li>
<li><p>服务器：提供计算服务的设备</p>
<ol start='' >
<li>永久提供服务</li>
<li>永久型访问地址/域名</li>

</ol>
</li>
<li><p>客户机：请求计算服务的主机</p>
<ol start='' >
<li>与服务器通信，使用服务器提供的服务</li>
<li>间歇性接入网络</li>
<li>可能使用动态IP地址</li>
<li>不与其他客户机直接通信</li>

</ol>
</li>
<li><p>CS模型的最主要特征就是客户是服务请求方，服务器是服务提供方。</p>
</li>
<li><p>CS模型的主要特点</p>
<ol start='' >
<li>网络中各计算机的地位不平等，服务器通过对用户权限的限制来达到管理客户机的目的。</li>
<li>客户机相互之间不直接通信。</li>
<li>可扩展性不佳</li>

</ol>
</li>

</ol>
<h3 id='3）p2p模型'>（3）P2P模型</h3>
<ol start='' >
<li><p>P2P模型的思想是整个网络的传输内容不在保存在服务器上，每个节点都是对等的。</p>
</li>
<li><p>P2P模型的特点</p>
<ol start='' >
<li>不存在永远在线的服务器，每个主机既可以提供服务，也可以请求服务。</li>
<li>任意端系统/节点之间可以直接通讯。</li>
<li>多个客户机之间可以直接共享文档。</li>
<li>减轻了服务器的计算压力，消除了对某个服务器的完全依赖，大大提高了系统效率和资源利用率。</li>
<li>节点间歇性接入网络。</li>
<li>节点可能改变IP地址。</li>
<li>可扩展性好。</li>
<li>网络健壮性强。</li>

</ol>
</li>

</ol>
<p>&nbsp;</p>
<h2 id='二域名系统dns）'>二、域名系统（DNS）</h2>
<p>域名系统（Domain Name System， DNS）是因特网使用的命名系统，用来把便于人们记忆的具有特定含义的主机名（如<a href='http://www.bilibili.com' target='_blank' class='url'>www.bilibili.com</a>）转换为便于机器处理的IP地址。</p>
<p>DNS 系统采用客户/服务器模型，其协议运行在 UDP之上，使用 53号端口。从概念上可将 DNS 分为3部分：层次域名空间、域名服务器和解析器。</p>
<h3 id='1）层次域名空间'>（1）层次域名空间</h3>
<ol start='' >
<li><p>因特网采用层次树状结构的命名方法。采用这种命名方法，任何一个连接到因特网的主机或路由器，都有一个唯一的层次结构名称，即域名（Domain Name）。</p>
</li>
<li><p>域（Domain）是名字空间中一个可被管理的划分。域还可以划分为子域，而子域还可以继续划分为子域的子域，这样就形成了顶级域、二级域、三级域等。每个域名都由标号序列组成，而各标号之间用点（“.”）隔开。如<a href='http://www.bilibili.com' target='_blank' class='url'>www.bilibili.com</a>由三个标号组成，其中标号com是顶级域名，标号bilibili是二级域名，标号 www是三级域名。</p>
</li>
<li><p>域名中的标号需要注意</p>
<ol start='' >
<li>标号不区分英文大小写。</li>
<li>标号中出连字符（-）外不能存在其他标点符号。</li>
<li>每个标号不超过63字符，多标号组成的域名不超过255个字符。</li>
<li>级别最低的域名在左边，级别最高的顶级域名在右边。</li>

</ol>
</li>
<li><p>顶级域名（Top Level Domain，TLD)分为：</p>
<ol start='' >
<li>国家（地区）顶级域名（nTLD）：国家和某些地区的域名，如“.cn”表示中国。</li>
<li>通用顶级域名（gTLD）：常见的如“.com”、“.net”等。</li>
<li>基础结构域名：这种顶级域名只有一个即arpa，用于反向域名解析，又称反向域名。</li>

</ol>
</li>
<li><p>国家（地区）顶级域名下注册的二级域名由该国家/地区自行确定。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-04%20%E4%B8%8A%E5%8D%8811.10.21.png" referrerpolicy="no-referrer" alt="截屏2023-07-04 上午11.10.21"></p>
</li>

</ol>
<h3 id='2）域名服务器'>（2）域名服务器</h3>
<ol start='' >
<li><p>因特网的域名系统是一个联机分布式的数据库系统，并采用客户/服务器模型。</p>
</li>
<li><p>域名到IP地址的解析是由运行在域名服务器上的程序完成的，一个服务器所负责管辖的（或有权限的范围称为区（不以“域”为单位），各单位根据具体情况来划分自己管辖范围的区，但在一个区中的所有结点必须是能够连通的，每个区设置相应的权限域名服务器，用来保存该区中的所有主机的域名到IP地址的映射。</p>
</li>
<li><p>每个域名服务器不但能够进行域名到IP地址的解析，而且还必
须具有连向其他域名服务器的信息。当自己不能进行域名到IP地址的转换时，能够知道到什么地方去找其他域名服务器。</p>
</li>
<li><p>DNS 使用了大量的域名服务器，它们以层次方式组织。没有一台域名服务器具有因特网上所有主机的映射，相反该映射分布在所有的DNS 上。</p>
</li>
<li><p>主要有4类域名服务器</p>
<ol start='' >
<li><p>根域名服务器</p>
<ol start='' >
<li>根域名服务器是最高层次的域名服务器，所有的根域名服务器都知道所有的顶级域名服务器的IP地址。</li>
<li>本地域名服务器只要自己无法解析域名，就首先要求助于根域名服务器。</li>
<li>通常根域名服务器并不直接把待查询的域名直接转换成 IP 地址，而是告诉本地域名服务器下一步应当找哪个顶级域名服务器进行查询。</li>

</ol>
</li>
<li><p>顶级域名服务器</p>
<ol start='' >
<li>负责管理在该顶级域名服务器注册的所有二级域名。</li>
<li>收到DNS查询请求时，就给出相应的回答。</li>

</ol>
</li>
<li><p>授权域名服务器（权限域名服务器）</p>
<ol start='' >
<li>每条主机都必须在权限域名服务器登记。</li>
<li>权限域名服务器总能将其管辖的主机名转换为主机的IP地址。</li>

</ol>
</li>
<li><p>本地域名服务器</p>
<ol start='' >
<li>每个网络服务提供者（ISP）都拥有一个本地域名服务器。</li>
<li>主机发出DNS查询请求，请求报文就发送给该主机的本地域名服务器。</li>

</ol>
</li>

</ol>
</li>
<li><p>DNS层次结构<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-04%20%E4%B8%8A%E5%8D%8811.19.04.png" referrerpolicy="no-referrer" alt="截屏2023-07-04 上午11.19.04"></p>
</li>

</ol>
<h3 id='3）域名解析过程'>（3）域名解析过程</h3>
<ol start='' >
<li><p>域名解析就是把域名映射成IP地址或把IP地址映射成域名的过程，前者称为正向解析，后者称为反向解析。</p>
</li>
<li><p>域名解析的两种方式</p>
<ol start='' >
<li><p>递归查询<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-04%20%E4%B8%8A%E5%8D%8811.25.40.png" referrerpolicy="no-referrer" alt="截屏2023-07-04 上午11.25.40"></p>
<ol start='' >
<li>递归查询中，如果本地域名服务器不知道本地主机要查询的IP地址，则本地域名服务器就向根域名服务器查询，而不是主机自己查询。</li>
<li>根域名服务器递归的向下查询到目标IP地址之后再告知本地域名服务器，本地域名服务器再通知主机。</li>
<li>递归查询会给根域名服务器造成较大负载，几乎不使用。</li>

</ol>
</li>
<li><p>迭代查询<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-04%20%E4%B8%8A%E5%8D%8811.28.33.png" referrerpolicy="no-referrer" alt="截屏2023-07-04 上午11.28.33"></p>
<ol start='' >
<li>递归查询中，如果本地主机要查询IP地址本地域名服务器不知道，则本地域名服务器就向根域名服务器查询。</li>
<li>根域名服务器告知本地域名服务器需要向哪个顶级域名服务器查询，随后本地域名服务去查询顶级域名服务器。</li>
<li>顶级域名服务器要么给出IP地址，要么告诉本地域名服务器应该向哪个权限域名服务器查询。</li>
<li>最后本地域名服务将查询到的IP地址告知主机。</li>

</ol>
</li>

</ol>
</li>
<li><p>为了提高DNS的查询效率，在域名服务器中广泛使用了高速缓存，当服务器收到查询结果时，会将结果出存在高速缓存中。由于主机名和IP地址映射不是永久的，所以DNS服务器一段时间后会丢弃这些信息。</p>
</li>

</ol>
<p>&nbsp;</p>
<h2 id='三文件传送协议ftp）'>三、文件传送协议（FTP）</h2>
<h3 id='1）ftp的工作原理'>（1）FTP的工作原理</h3>
<ol start='' >
<li><p>FTP是因特网上使用最广泛的文件传输协议，FTP提供交互式的访问，允许客户指明文件的类型和格式，允许文件具有存取权限。</p>
</li>
<li><p>FTP的功能</p>
<ol start='' >
<li>提供不同种类主机系统之间的文件传输能力。</li>
<li>以用户权限管理的方式提供用户对远程FTP服务器上的文件管理能力。</li>
<li>以匿名FTP的方式提供公用文件共享的能力。</li>

</ol>
</li>
<li><p>一个FTP服务器进程可同时为多个客户进程提供服务，FTP服务器进程由两大部分组成：一个主进程，负责接收新请求，若干从属进程，负责处理单个请求。</p>
</li>

</ol>
<h3 id='2）控制连接与数据连接'>（2）控制连接与数据连接</h3>
<ol start='' >
<li><p>FTP在工作时使用控制连接、数据连接两个并行的TCP连接。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-04%20%E4%B8%8B%E5%8D%882.25.53.png" referrerpolicy="no-referrer" alt="截屏2023-07-04 下午2.25.53"></p>
</li>
<li><p>控制连接</p>
<ol start='' >
<li>服务器监听 21 号端口，等待客户连接，建立在这个端口上的连接称为控制连接。</li>
<li>控制连接用来传输控制信息（如连接请求、传送请求等），并且控制信息都以7位ASCII格式传送。</li>
<li>FTP客户发出的传送请求，通过控制连接发送给服务器端的控制进程，但控制连接并不用来传送文件。</li>
<li>在传输文件时还可以使用控制连接(如客户在传输中途发一个中止传输的命令），因此控制连接
在整个会话期间一直保持打开状态。</li>

</ol>
</li>
<li><p>数据连接</p>
<ol start='' >
<li><p>服务器端的控制进程在接收到FTP客户发来的文件传输请求后，就创建“数据传送进程”和“数据连接”。</p>
</li>
<li><p>数据连接用来连接客户端和服务器端的数据传送进程，数据传送进程实际完成文件的传送，在传送完毕后关闭“数据传送连接”并结束运行。</p>
</li>
<li><p>数据连接有两种传输模式：</p>
<ol start='' >
<li>主动模式PORT：客户端连接到服务器的21端口，登录成功后要读取数据时，客户端随机开放一个端口，并发送命令告知服务器，服务器收到PORT命令和端口号后，通过20端口和客户端开放的端口连接，发送数据。</li>
<li>被动模式PASV：客户端要读取数据时，发送PASV 命令到服务器，服务器在本地随机开放一个端口，并告知客户端，客户端再连接到服务器开放的端口进行数据传输。</li>

</ol>
</li>

</ol>
</li>
<li><p>因为FTP使用了一个分离的控制连接，所以也称FTP的控制信息是带外（Out-of-band）传送的。使用FTP时，若要修改服务器上的文件，则需要先将此文件传送到本地主机，然后再将修改后的文件副本传送到原服务器，来回传送耗费很多时间。网络文件系统（NFS）采用另一种思路，它允许进程打开一个远程文件，并能在该文件的某个特定位置开始读写数据。这样，NFS可使用户复制一个大文件中的一个很小的片段，而不需要复制整个大文件。</p>
</li>

</ol>
<p>&nbsp;</p>
<h2 id='四电子邮件'>四、电子邮件</h2>
<h3 id='1）电子邮件系统的组成结构'>（1）电子邮件系统的组成结构</h3>
<ol start='' >
<li><p>电子邮件是一种异步通信方式，通信时不需要双方在场。电子邮件把邮件发送到收件人使用的服务器，并放在收件人邮箱中。</p>
</li>
<li><p>电子邮件有三个最主要的构件<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-04%20%E4%B8%8B%E5%8D%882.56.48.png" referrerpolicy="no-referrer" alt="截屏2023-07-04 下午2.56.48"><img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-04%20%E4%B8%8B%E5%8D%882.58.28.png" referrerpolicy="no-referrer" alt="截屏2023-07-04 下午2.58.28"></p>
<ol start='' >
<li>用户代理（User Agent）：用户与电子邮件系统的接口，用户代理至少有撰写、显示和邮件处理的功能。</li>
<li>邮件服务器：功能是收发邮件和通知发信人邮件的发送结果。</li>
<li>邮件发送协议和读取协议：用于用户代理向邮件服务器发送邮件或在邮件服务器之间发送邮件。</li>

</ol>
</li>

</ol>
<h3 id='2）电子邮件的信息格式'>（2）电子邮件的信息格式</h3>
<ol start='' >
<li><p>电子邮件分为信封和内容两大部分，内容又分为首部和主体两部分。<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-04%20%E4%B8%8B%E5%8D%882.48.09.png" referrerpolicy="no-referrer" alt="截屏2023-07-04 下午2.48.09"></p>
<ol start='' >
<li>RFC 822规定了邮件的首部格式，而邮件的主体部分让用户自由撰写，用户写好首部后，邮件系统自动将信封需要的信息提取出来。</li>
<li>邮件的首部包含一些首部行，每个首部行有一个关键字后跟冒号在后跟值组成。有些关键字是必须有些是可选的。最重要的是To和Subject。</li>
<li>To后面填入一个或多个收件人的电子邮件地址，地址为：收件人邮箱名@邮箱所在主机域名。</li>
<li>Subject可选，是邮件的主题，发宁邮件的主要内容。</li>

</ol>
</li>
<li><p>多用途网际邮件扩充（MIME）<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-04%20%E4%B8%8B%E5%8D%883.11.17.png" referrerpolicy="no-referrer" alt="截屏2023-07-04 下午3.11.17"></p>
<ol start='' >
<li><p>SMTP不能传送可执行文件或其他二进制对象，也不能传送超过一定长度或使用非英语的、不能转换为ASCII的文字。</p>
</li>
<li><p>因此使用MIME扩充SMTP，增加了邮件主题结构，定义了传送非ASCII的编码规则。</p>
</li>
<li><p>MIME并未改动SMTP，可以在现有的协议下传送。</p>
</li>
<li><p>MIME主要包括三个内容</p>
<ol start='' >
<li>5 个新的邮件首部字段，包括 MIME版本、内容描述、内容标识、传送编码和内容类型。</li>
<li>定义了许多邮件内容的格式，对多媒体电子邮件的表示方法进行了标准化。</li>
<li>定义了传送编码，可对任何内容格式进行转换，而不会被邮件系统改变。</li>

</ol>
</li>

</ol>
</li>

</ol>
<h3 id='3）简单邮件传输协议smtp）'>（3）简单邮件传输协议（SMTP）</h3>
<ol start='' >
<li><p>SMTP是一种提供可靠且有效的电子邮件传输的协议，控制两个互相通信的SMTP进程交换信息。SMTP采用客户/服务器方式，发送邮件的进程就是客户，接受邮件的就是服务器。</p>
</li>
<li><p>SMTP使用TCP连接，端口号为25。</p>
</li>
<li><p>SMTP有三个阶段<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-04%20%E4%B8%8B%E5%8D%883.08.51.png" referrerpolicy="no-referrer" alt="截屏2023-07-04 下午3.08.51"></p>
<ol start='' >
<li><p>连接建立：发件人的邮件发送到发送方邮件服务器的邮件缓存中后，SMTP客户就每隔一定时间对邮件缓存扫描一次。如发现有邮件，就使用SMTP的熟知端口号（25）与接收方邮件服务器的SMTP服务器建立 TCP 连接。连接建立后，接收方SMTP服务器发出220 Service ready（服务就绪）。然后SMTP客户向SMTP服务器发送 HELLO命令，附上发送方的主机名。</p>
</li>
<li><p>邮件发送</p>
<ol start='' >
<li>连接建立后，就可开始传送邮件。邮件的传送从MAIL命令开始，MAIL命令后面有发件人的地址，如 MAIL FROM: &lt;<a href='mailto:wbw2333@nju.edu.cn' target='_blank' class='url'>wbw2333@nju.edu.cn</a>&gt;。</li>
<li>若SMTP 服务器已准备好接收邮件，则回答250 OK。</li>
<li>接着SMTP客户端发送一个或多个 RCPT(收件人recipient 的缩写）命令，格式为 RCFT TO：&lt;收件人地址＞。每发送一个 RCPT 命令，都应有相应的信息从 SMTP 服务器返回，如250 OK或 550 No such user here （无此用户）。</li>
<li>RCPT 命令的作用是，确认接收方系统已做好接收邮件的准备才发送邮件，避免浪费通信资源。</li>
<li>获得OK的回答后，客户端就使用DATA命令，表示要开始传输邮件的内容。正常情况下，SMTP服务器回复的信息是354 Start mail input; end with &lt;CRLF&gt;.&lt;CRLF&gt;。&lt;CRLF&gt;表示回车换
行。</li>
<li>此时 SMTP 客户端就可开始传送邮件内容，并用&lt;CRLF&gt;.&lt;CRLF&gt;表示邮件内容的结束。</li>

</ol>
</li>
<li><p>连接释放：邮件发送完毕后，SMTP客户应发送QUIT命令。SMTP服务器返回的信息是221（服务关闭），表示SMTP同意释放TCP连接。邮件传送的全部过程就此结束。</p>
</li>

</ol>
</li>

</ol>
<h3 id='4）邮局协议pop3）'>（4）邮局协议（POP3）</h3>
<ol start='' >
<li><p>POP是一个简单但功能有限的邮件读取协议，现在试用其第三版POP3.</p>
</li>
<li><p>POP3采用拉取Pull的方式的通信方式，当用户读取邮件时，用户代理想邮件服务器发出请求，拉取邮箱中的邮件。</p>
</li>
<li><p>POP也适用CS模式，在传输层使用TCP，端口号为110。</p>
</li>
<li><p>POP有两种工作模式</p>
<ol start='' >
<li>下载并保留：用户从服务器上读取邮件后，邮件会继续保留，用户可以在此读取。</li>
<li>下载并删除：邮件一旦被读取就从服务器上删除，用户不能再读。</li>

</ol>
</li>

</ol>
<h3 id='5）因特网报文存取协议imap）'>（5）因特网报文存取协议（IMAP）</h3>
<ol start='' >
<li>IMAP协议比POP协议复杂。当用户PC上的IMAP客户程序打开IMAP服务器的邮箱时，用户可以看到邮箱的首部，若用户需要打开某个邮件，该邮件才上传到用户的计算机上。</li>
<li>IMAP可以让用户在不同的地方使用不同的计算机随时上网阅读处理邮件，还允许<strong>只读取邮件中的某一个部分</strong>（先看正文，有WiFi的时候再下载附件）。</li>

</ol>
<h3 id='6）基于万维网的电子邮件'>（6）基于万维网的电子邮件</h3>
<p>有很多基于万维网的电子邮件，如Hotmail、Gmail等，通过HTTP传输，特点是非常方便。</p>
<p>&nbsp;</p>
<h2 id='五万维网和http'>五、万维网和HTTP</h2>
<h3 id='1）万维网概述'>（1）万维网概述</h3>
<ol start='' >
<li><p>万维网（WWW）是一个大规模的、联机式的信息储存所/资料空间，是无数个网络站点和网页的集合。</p>
</li>
<li><p>在WWW中储存资源，并靠URL唯一标识资源，这些资源通过HTTP传输给使用者。</p>
</li>
<li><p>WWW的核心部分是由三个标准构成的</p>
<ol start='' >
<li>URL：负责标识WWW上的各种文档，使每个文档在WWW上有唯一的标识符URL。</li>
<li>HTTP：一个应用层协议，通过TCP进行可靠传输。</li>
<li>HTML：一种文档结构的表示语言，使用一些约定的标记对页面上的各种信息、格式进行描述。</li>

</ol>
</li>
<li><p>URL</p>
<ol start='' >
<li>URL的一般形式是：&lt;协议&gt;://&lt;主机&gt;:&lt;端口&gt;/&lt;路径&gt;</li>
<li>协议表示用什么协议获取文档。</li>
<li>主机是存放资源的主机的域名/IP地址。</li>
<li>端口和路径有时可省略。</li>

</ol>
</li>

</ol>
<h3 id='2）超文本传输协议http）'>（2）超文本传输协议（HTTP）</h3>
<ol start='' >
<li><p>HTTP协议定义了浏览器怎样想服务器请求WWW文档、以及服务器怎样把文档传送给浏览器。</p>
</li>
<li><p>HTTP是面向事物的应用层协议，规定了浏览器和服务器之间请求和相应的格式与规则。</p>
</li>
<li><p>HTTP的操作过程：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-04%20%E4%B8%8B%E5%8D%883.28.17.png" referrerpolicy="no-referrer" alt="截屏2023-07-04 下午3.28.17"></p>
</li>
<li><p>HTTP的特点</p>
<ol start='' >
<li><p>HTTP协议是无状态的——Cookie。</p>
</li>
<li><p>HTTP采用TCP作为运输层协议，但HTTP本身是无连接的（通信双方在交换HTTP报文之前不需要建立HTTP连接）<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-04%20%E4%B8%8B%E5%8D%883.36.12.png" referrerpolicy="no-referrer" alt="截屏2023-07-04 下午3.36.12"></p>
<ol start='' >
<li><p>持久连接：指万维网服务器在发送响应后仍然保持这条连接，使同一个客户（浏览器）和该服务器可以继续在这条连接上传送后续的HTTP请求和响应报文，分为非流水线和流水线两种方式。</p>
<ol start='' >
<li>非流水线：客户在收到前一个响应后才能发出下一个请求，服务器发送完一个对象后，其TCP连接就处手空闲状态，浪费了服务器资源。</li>
<li>流水线：客户每遇到一个对象引用就立即发出一个请求，因而客户可以逐个地连续发出对各个引用对象的请求。如果所有的请求和响应都是连续发送的，那么所有引用的对象共计经历1个RTT延迟，而不是像非流水线方式那样，每个引用都必须有1个RTT延迟。这种方式减少了TCP 连接中的空闲时间，提高了效率。</li>

</ol>
</li>
<li><p>非持久连接：每个网页元素对象的传输都要建立一个TCP连接，请求一个万维网文档所需的时间是该文档的传输时间（与文档大小成正比）加上两倍往返时间RTT（一个RTT用于TCP连接，另一个RTT用于请求和接收文档）。每个对象引用都导致2×RTT的开销，此外每次建立新的TCP连接都要分配缓存和变量，使万维网服务器的负担很重。</p>
</li>

</ol>
</li>

</ol>
</li>
<li><p>HTTP的报文结构</p>
<ol start='' >
<li><p>HTTP是面向文本的，因此报文的每个字段都是一些ASCII码串，且每个字段长度不定</p>
</li>
<li><p>HTTP报文分为</p>
<ol start='' >
<li>请求报文：从客户向服务器发送的请求报文。</li>
<li>响应报文：从服务器到客户的回答。</li>

</ol>
</li>
<li><p>HTTP报文结构为：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-04%20%E4%B8%8B%E5%8D%883.39.13.png" referrerpolicy="no-referrer" alt="截屏2023-07-04 下午3.39.13"></p>
<ol start='' >
<li><p>开始行：</p>
<ol start='' >
<li>用于区分是请求报文还是响应报文。在请求报文中的开始行称为请求行，而在响应报文中的开始行称为状态行。</li>
<li>开始行的三个字段之问都以空格分隔，最后的“CR”和“LF分别代表“回车”和“换行”。</li>
<li>请求报文的“请求行”有三个内容：方法、请求资源的URL 及 HTIP 的版本。其中，“方法”是对所请求对象进行的操作，这些方法实际上也就是一些命令。</li>

</ol>
</li>
<li><p>首部行：</p>
<ol start='' >
<li>用来说明浏览器、服务器或报文主体的一些信息。首部可以有几行，但也可以不使用。</li>
<li>在每个首部行中都有首部字段名和它的值，每一行在结束的地方都要有“回车”和“换行”。整个首部行结束时，还有一空行将首部行和后面的实体主体分开。</li>

</ol>
</li>
<li><p>实体主体：在请求报文中一般不用这个字段，而在响应报文中也可能没有这个字段。</p>
</li>

</ol>
</li>
<li><p>常见状态码：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-04%20%E4%B8%8B%E5%8D%883.42.05.png" referrerpolicy="no-referrer" alt="截屏2023-07-04 下午3.42.05"></p>
</li>

</ol>
</li>
<li><p>常见应用层协议：<img src="https://wbw2333.github.io/assets/imgs/%E6%88%AA%E5%B1%8F2023-07-04%20%E4%B8%8B%E5%8D%883.43.12.png" referrerpolicy="no-referrer" alt="截屏2023-07-04 下午3.43.12"></p>
</li>

</ol>
</body>
</html>